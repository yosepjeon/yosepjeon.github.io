+++
title = "Chapter 09. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ êµ¬ì¡°ì™€ ì•„í‚¤í…ì²˜ ì´í•´í•˜ê¸°"
date = "2025-12-18"
weight = 9
+++

# 9.1 ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ì•„í‚¤í…ì²˜ì— ëŒ€í•˜ì—¬
ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” 'ì¼ë°˜ì ì¸ ì›¹ ì„œë¹„ìŠ¤ì²˜ëŸ¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë²„ì™€ ë°ì´í„°ë² ì´ìŠ¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤'ê³  ìƒê°í•˜ë©´ ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# 9.2 ì•„í‚¤í…ì²˜ ê°œìš”

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” í¬ê²Œ **ì»¨íŠ¸ë¡¤ í”Œë ˆì¸(Control Plane)**ê³¼ **ì›Œì»¤ ë…¸ë“œ(Worker Node)**ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” kubectlì„ í†µí•´ API Serverì™€ í†µì‹ í•˜ê³ , ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì´ ì›Œì»¤ ë…¸ë“œë“¤ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           ì¿ ë²„ë„¤í‹°ìŠ¤ ì•„í‚¤í…ì²˜ ê°œìš”                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   kubectl    â”‚  â—€â”€â”€ ì‚¬ìš©ì/ê´€ë¦¬ìê°€ ì‚¬ìš©í•˜ëŠ” CLI ë„êµ¬
  â”‚  (í´ë¼ì´ì–¸íŠ¸) â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ HTTPS (REST API)
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ (Control Plane)                            â”‚
â”‚                                   (ë§ˆìŠ¤í„° ë…¸ë“œ)                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                            kube-apiserver                                   â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì˜ ì¤‘ì‹¬ (í—ˆë¸Œ)                                             â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ REST API ì œê³µ                                                      â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ ì¸ì¦/ì¸ê°€ ì²˜ë¦¬                                                       â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ etcdì™€ í†µì‹ í•˜ëŠ” ìœ ì¼í•œ ì»´í¬ë„ŒíŠ¸                                          â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                 â”‚                                                  â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚         â”‚                       â”‚                       â”‚                          â”‚
â”‚         â–¼                       â–¼                       â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  kube-scheduler â”‚    â”‚    etcd         â”‚    â”‚ kube-controller â”‚                 â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚    -manager     â”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                 â”‚
â”‚  â”‚ â€¢ Pod ë°°ì¹˜ ê²°ì •   â”‚    â”‚ â€¢ í´ëŸ¬ìŠ¤í„° ìƒíƒœ     â”‚    â”‚ â€¢ ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰    â”‚                 â”‚
â”‚  â”‚ â€¢ ë…¸ë“œ ì„ íƒ       â”‚    â”‚   ì €ì¥ì†Œ          â”‚    â”‚ â€¢ Deployment    â”‚                 â”‚
â”‚  â”‚ â€¢ ë¦¬ì†ŒìŠ¤ ê³ ë ¤      â”‚    â”‚ â€¢ Key-Value     â”‚    â”‚ â€¢ ReplicaSet    â”‚                 â”‚
â”‚  â”‚                 â”‚    â”‚ â€¢ ë¶„ì‚° ì €ì¥       â”‚    â”‚ â€¢ Node ë“±        â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    cloud-controller-manager (ì„ íƒì )                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ í´ë¼ìš°ë“œ í”„ë¡œë°”ì´ë” ì—°ë™ (AWS, GCP, Azure ë“±)                            â”‚    â”‚   â”‚
â”‚  â”‚  â”‚ â€¢ LoadBalancer, ë…¸ë“œ ê´€ë¦¬, ë³¼ë¥¨ í”„ë¡œë¹„ì €ë‹                                â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚ kubelet â†” API Server í†µì‹ 
                                            â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                   â”‚                                   â”‚
        â–¼                                   â–¼                                   â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      ì›Œì»¤ ë…¸ë“œ #1           â”‚   â”‚      ì›Œì»¤ ë…¸ë“œ #2           â”‚   â”‚      ì›Œì»¤ ë…¸ë“œ #3            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                           â”‚   â”‚                           â”‚   â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      kubelet        â”‚  â”‚   â”‚  â”‚      kubelet        â”‚  â”‚   â”‚  â”‚      kubelet        â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚â€¢ Pod ìƒëª…ì£¼ê¸°   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ Pod ìƒëª…ì£¼ê¸°    â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ Pod ìƒëª…ì£¼ê¸°   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚â€¢ ì»¨í…Œì´ë„ˆ ê´€ë¦¬   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ ì»¨í…Œì´ë„ˆ ê´€ë¦¬    â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ ì»¨í…Œì´ë„ˆ ê´€ë¦¬   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚â€¢ ìƒíƒœ ë³´ê³       â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ ìƒíƒœ ë³´ê³        â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ ìƒíƒœ ë³´ê³       â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚   â”‚                           â”‚   â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚     kube-proxy      â”‚  â”‚   â”‚  â”‚     kube-proxy      â”‚  â”‚   â”‚  â”‚     kube-proxy      â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚â€¢ ë„¤íŠ¸ì›Œí¬ ê·œì¹™   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ ë„¤íŠ¸ì›Œí¬ ê·œì¹™    â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ ë„¤íŠ¸ì›Œí¬ ê·œì¹™   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚â€¢ Service êµ¬í˜„  â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ Service êµ¬í˜„  â”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ Service êµ¬í˜„  â”‚  â”‚  â”‚
â”‚  â”‚  â”‚â€¢ iptables/IPVSâ”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ iptables/IPVSâ”‚  â”‚  â”‚   â”‚  â”‚  â”‚â€¢ iptables/IPVSâ”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚   â”‚                           â”‚   â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Container Runtime  â”‚  â”‚   â”‚  â”‚  Container Runtime  â”‚  â”‚   â”‚  â”‚  Container Runtime  â”‚  â”‚
â”‚  â”‚  (containerd ë“±)    â”‚  â”‚   â”‚  â”‚  (containerd ë“±)     â”‚  â”‚   â”‚  â”‚  (containerd ë“±)     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                           â”‚   â”‚                           â”‚   â”‚                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Pod  â”‚ â”‚  Pod  â”‚      â”‚   â”‚  â”‚  Pod  â”‚ â”‚  Pod  â”‚      â”‚   â”‚  â”‚  Pod  â”‚ â”‚  Pod  â”‚      â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â” â”‚      â”‚   â”‚  â”‚ â”Œâ”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â” â”‚      â”‚   â”‚  â”‚ â”Œâ”€â”€â”€â” â”‚ â”‚ â”Œâ”€â”€â”€â” â”‚      â”‚
â”‚  â”‚ â”‚Appâ”‚ â”‚ â”‚ â”‚Appâ”‚ â”‚      â”‚   â”‚  â”‚ â”‚Appâ”‚ â”‚ â”‚ â”‚Appâ”‚ â”‚      â”‚   â”‚  â”‚ â”‚Appâ”‚ â”‚ â”‚ â”‚Appâ”‚ â”‚      â”‚
â”‚  â”‚ â””â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”˜ â”‚      â”‚   â”‚  â”‚ â””â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”˜ â”‚      â”‚   â”‚  â”‚ â””â”€â”€â”€â”˜ â”‚ â”‚ â””â”€â”€â”€â”˜ â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                           â”‚   â”‚                           â”‚   â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì»´í¬ë„ŒíŠ¸ ê°„ í†µì‹  íë¦„

kubectlë¡œ Podë¥¼ ìƒì„±í•  ë•Œì˜ í†µì‹  íë¦„ì„ ì‚´í´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      kubectl apply -f pod.yaml ì‹¤í–‰ ì‹œ íë¦„                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ kubectl  â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚ â‘  kubectlì´ API Serverì— Pod ìƒì„± ìš”ì²­
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   API Server     â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚       â”‚
       â”‚       â”‚ â‘¡ API Serverê°€ etcdì— Pod ì •ë³´ ì €ì¥
       â”‚       â–¼
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚  â”‚  etcd   â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ â‘¢ Schedulerê°€ API Serverë¥¼ Watchí•˜ë‹¤ê°€ ë¯¸ë°°ì¹˜ Pod ë°œê²¬
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Scheduler      â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ â‘£ ì ì ˆí•œ ë…¸ë“œ ì„ íƒ í›„ API Serverì— ë°”ì¸ë”© ì •ë³´ ì „ë‹¬
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   API Server     â”‚â”€â”€â”€â”€â”€â”€â–¶ etcdì— ë…¸ë“œ ë°”ì¸ë”© ì •ë³´ ì—…ë°ì´íŠ¸
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ â‘¤ kubeletì´ API Serverë¥¼ Watchí•˜ë‹¤ê°€ ìì‹ ì˜ ë…¸ë“œì— í• ë‹¹ëœ Pod ë°œê²¬
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     kubelet      â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ â‘¥ Container Runtimeì— ì»¨í…Œì´ë„ˆ ìƒì„± ìš”ì²­
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Container Runtimeâ”‚
  â”‚  (containerd)    â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ â‘¦ ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹¤í–‰
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚    Container     â”‚
  â”‚   (ì‹¤ì œ ì•± ì‹¤í–‰)  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì»´í¬ë„ŒíŠ¸ ì—­í•  ìš”ì•½

| ì»´í¬ë„ŒíŠ¸ | ìœ„ì¹˜ | ì—­í•  |
|---------|------|------|
| **kube-apiserver** | ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ | ëª¨ë“  í†µì‹ ì˜ ì¤‘ì‹¬, REST API ì œê³µ, ì¸ì¦/ì¸ê°€ |
| **etcd** | ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ | í´ëŸ¬ìŠ¤í„° ìƒíƒœ ì €ì¥ì†Œ (Key-Value) |
| **kube-scheduler** | ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ | Podë¥¼ ì–´ëŠ ë…¸ë“œì— ë°°ì¹˜í• ì§€ ê²°ì • |
| **kube-controller-manager** | ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ | ì—¬ëŸ¬ ì»¨íŠ¸ë¡¤ëŸ¬ ì‹¤í–‰ (Deployment, ReplicaSet ë“±) |
| **cloud-controller-manager** | ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ | í´ë¼ìš°ë“œ í”„ë¡œë°”ì´ë” ì—°ë™ (ì„ íƒì ) |
| **kubelet** | ì›Œì»¤ ë…¸ë“œ | Pod ìƒëª…ì£¼ê¸° ê´€ë¦¬, ì»¨í…Œì´ë„ˆ ì‹¤í–‰ |
| **kube-proxy** | ì›Œì»¤ ë…¸ë“œ | ë„¤íŠ¸ì›Œí¬ ê·œì¹™ ê´€ë¦¬, Service êµ¬í˜„ |
| **Container Runtime** | ì›Œì»¤ ë…¸ë“œ | ì‹¤ì œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ (containerd, CRI-O ë“±) |

# 9.3 ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì˜ í•µì‹¬ì¸ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸
* kube-apiserverëŠ” RESTë¡œ í†µì‹ í•  ìˆ˜ ìˆëŠ” API ì„œë²„ì…ë‹ˆë‹¤.
* etctëŠ” ë¶„ì‚°í˜• í‚¤-ê°’ ì €ì¥ì†Œë¡œ, ì¼ì¢…ì˜ DBì…ë‹ˆë‹¤.  
Client -> REST -> kube-api ì„œë²„ -> etcd

### 1) kube-apiteserverëŠ” RESTë¡œ í†µì‹ í•  ìˆ˜ ìˆëŠ” API ì„œë²„ì…ë‹ˆë‹¤. etcdëŠ” ë¶„ì‚°í˜• í‚¤-ê°’ ì €ì¥ì†Œë¡œ, ì¼ì¢…ì˜ ë°ì´í„°ë² ì´ìŠ¤ì…ë‹ˆë‹¤. 
ì‹¤ì œë¡œ kube-apiserverëŠ” ì‚¬ìš©ìë¡œë¶€í„° ìš”ì²­ì„ ë°›ì•„ etcdì— ë°ì´í„°ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. ë˜í•œ kubectl get ëª…ë ¹ì–´ëŠ” etcdì— ì €ì¥ëœ ë°ì´í„°ë¥¼ kube-apiserverë¡œë¶€í„° ë°›ì•„ì˜µë‹ˆë‹¤.  

```bash
$ kubectl get pod --namespace kube-system
NAME                                         READY   STATUS    RESTARTS        AGE
coredns-594f68c47f-gq6nk                     1/1     Running   18 (3d9h ago)   21d
coredns-594f68c47f-zfgmp                     1/1     Running   14 (3d9h ago)   21d
etcd-kind-control-plane                      1/1     Running   4 (3d9h ago)    21d
kindnet-p9c8m                                1/1     Running   3 (5d20h ago)   21d
kube-apiserver-kind-control-plane            1/1     Running   11 (3d9h ago)   21d
kube-controller-manager-kind-control-plane   1/1     Running   36 (3d9h ago)   21d
kube-proxy-pzrss                             1/1     Running   3 (5d20h ago)   21d
kube-scheduler-kind-control-plane            1/1     Running   32 (3d9h ago)   21d
yosep@yosepui-MacBookPro chapter-07 % kubectl get pod --v=7 --namespace kube-system
I1219 08:14:51.989974   76813 loader.go:402] Config loaded from file:  /Users/yosep/.kube/config
I1219 08:14:51.991041   76813 envvar.go:172] "Feature gate default state" feature="ClientsAllowCBOR" enabled=false
I1219 08:14:51.991054   76813 envvar.go:172] "Feature gate default state" feature="ClientsPreferCBOR" enabled=false
I1219 08:14:51.991060   76813 envvar.go:172] "Feature gate default state" feature="InformerResourceVersion" enabled=false
I1219 08:14:51.991065   76813 envvar.go:172] "Feature gate default state" feature="InOrderInformers" enabled=true
I1219 08:14:51.991070   76813 envvar.go:172] "Feature gate default state" feature="WatchListClient" enabled=false
I1219 08:14:51.994913   76813 round_trippers.go:527] "Request" verb="GET" url="https://127.0.0.1:61965/api/v1/namespaces/kube-system/pods?limit=500" headers=<
	Accept: application/json;as=Table;v=v1;g=meta.k8s.io,application/json;as=Table;v=v1beta1;g=meta.k8s.io,application/json
	User-Agent: kubectl1.33.3/v1.33.3 (darwin/arm64) kubernetes/80779bd
 >
I1219 08:14:52.008976   76813 round_trippers.go:632] "Response" status="200 OK" milliseconds=13
NAME                                         READY   STATUS    RESTARTS        AGE
coredns-594f68c47f-gq6nk                     1/1     Running   18 (3d9h ago)   21d
coredns-594f68c47f-zfgmp                     1/1     Running   14 (3d9h ago)   21d
etcd-kind-control-plane                      1/1     Running   4 (3d9h ago)    21d
kindnet-p9c8m                                1/1     Running   3 (5d20h ago)   21d
kube-apiserver-kind-control-plane            1/1     Running   11 (3d9h ago)   21d
kube-controller-manager-kind-control-plane   1/1     Running   36 (3d9h ago)   21d
kube-proxy-pzrss                             1/1     Running   3 (5d20h ago)   21d
kube-scheduler-kind-control-plane            1/1     Running   32 (3d9h ago)   21d
```

kubectl get podë¥¼ í•˜ë©´ ì–´ë–¤ ìš”ì²­ì´ ì´ë£¨ì–´ì§€ê³  ìˆëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
<mark>https://127.0.0.1:61965/api/v1/namespaces/kube-system/pods?limit=500</mark>ì— ëŒ€í•œ GETìš”ì²­ì— ëŒ€í•´ 200 OK ì‘ë‹µì´ ëŒì•„ì™”ìŠµë‹ˆë‹¤.

### 2) kube-schedulerëŠ” podë¥¼ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§í•˜ëŠ” ì—­í• ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.
ì§€ê¸ˆê¹Œì§€ Affinity ë“±ì„ ì„¤ëª…í•˜ë©´ì„œ podì˜ ìŠ¤ì¼€ì¤„ë§ì— ëŒ€í•´ ì‚´í´ë´¤ëŠ”ë° ì´ë¥¼ ê²°ì •í•˜ëŠ” ê²ƒì´ kube-schedulerì…ë‹ˆë‹¤.

### 3) kube-controller-managerëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ìµœì†Œí•œì˜ ë™ì‘ì„ ìœ„í•œ ì—¬ëŸ¬ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.  
** ì»¨íŠ¸ë¡¤ëŸ¬: ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì˜ ë‚´ìš©ì— ë”°ë¼ ì›€ì§ì´ëŠ” í”„ë¡œê·¸ë¨ ì „ë°˜ 
ì˜ˆë¥¼ ë“¤ì–´ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— replicas: 3ì´ë¼ê³  ì“°ì—¬ ìˆìœ¼ë©´ podë¥¼ 3ê°œ ì¤€ë¹„í•˜ëŠ” ê²ƒì´ Replication Controllerì˜ ì—­í• ì´ê³ , ë…¸ë“œê°€ ë‹¤ìš´ë˜ì—ˆì„ë•Œ ì•Œë¦¼ì„ ì£¼ëŠ” 
Nod Lifecycle Controller ë“±ì´ ìˆìŠµë‹ˆë‹¤.

# 9.4 ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰ì„ ë‹´ë‹¹í•˜ëŠ” ì›Œì»¤ ë…¸ë“œ
ì›Œì»¤ ë…¸ë“œì—ì„œëŠ” ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì»¨í…Œì´ë„ˆê°€ ëŒì•„ê°‘ë‹ˆë‹¤. ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì€ ë‹¤ì¤‘í™”ë¥¼ ê³ ë ¤í•˜ì—¬ 3ëŒ€ ì •ë„ì˜ ë…¸ë“œë¡œ êµ¬ì„±í•˜ëŠ” ë°˜ë©´, ì›Œì»¤ ë…¸ë“œëŠ” ê·œëª¨ì— ë”°ë¼ 100ëŒ€ê°€ ë  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              ì›Œì»¤ ë…¸ë“œ êµ¬ì¡°                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚           ì»¨íŠ¸ë¡¤ í”Œë ˆì¸                    â”‚
                    â”‚         (kube-apiserver)                â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â”‚ Watch & Report
                                       â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                  â”‚                                  â”‚
    â”‚                         ì›Œì»¤ ë…¸ë“œ (Worker Node)                       â”‚
    â”‚                                  â”‚                                  â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚    â”‚                        kubelet                            â”‚    â”‚
    â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ API Serverì™€ í†µì‹ í•˜ì—¬ Pod ìŠ¤ì¼€ì¤„ë§ ì •ë³´ ìˆ˜ì‹              â”‚  â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ Podì˜ ìƒëª…ì£¼ê¸° ê´€ë¦¬ (ìƒì„±, ì‹œì‘, ì¤‘ì§€, ì‚­ì œ)              â”‚  â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì— ì»¨í…Œì´ë„ˆ ìƒì„±/ì‚­ì œ ì§€ì‹œ                   â”‚  â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ ë…¸ë“œ ìƒíƒœë¥¼ API Serverì— ì£¼ê¸°ì ìœ¼ë¡œ ë³´ê³                  â”‚  â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ í—¬ìŠ¤ ì²´í¬ (liveness, readiness probe) ì‹¤í–‰           â”‚  â”‚    â”‚
    â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                               â”‚                                      â”‚
    â”‚                               â”‚ CRI (Container Runtime Interface)    â”‚
    â”‚                               â–¼                                      â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚    â”‚                   ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„                              â”‚    â”‚
    â”‚    â”‚              (containerd / CRI-O ë“±)                        â”‚    â”‚
    â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ ì‹¤ì œ ì»¨í…Œì´ë„ˆ ì‹¤í–‰/ì¤‘ì§€                                â”‚   â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€ Pull                                  â”‚   â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ ì»¨í…Œì´ë„ˆ ê²©ë¦¬ í™˜ê²½ ì œê³µ                                 â”‚   â”‚    â”‚
    â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                               â”‚                                      â”‚
    â”‚                               â–¼                                      â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚    â”‚                         Pods                               â”‚    â”‚
    â”‚    â”‚                                                            â”‚    â”‚
    â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
    â”‚    â”‚   â”‚    Pod A     â”‚   â”‚    Pod B     â”‚   â”‚    Pod C     â”‚   â”‚    â”‚
    â”‚    â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚    â”‚
    â”‚    â”‚   â”‚ â”‚Container â”‚ â”‚   â”‚ â”‚Container â”‚ â”‚   â”‚ â”‚Container â”‚ â”‚   â”‚    â”‚
    â”‚    â”‚   â”‚ â”‚  (App)   â”‚ â”‚   â”‚ â”‚  (App)   â”‚ â”‚   â”‚ â”‚  (App)   â”‚ â”‚   â”‚    â”‚
    â”‚    â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚    â”‚
    â”‚    â”‚   â”‚   10.0.0.1   â”‚   â”‚   10.0.0.2   â”‚   â”‚   10.0.0.3   â”‚   â”‚    â”‚
    â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
    â”‚    â”‚              â”‚               â”‚               â”‚             â”‚    â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                   â”‚               â”‚               â”‚                  â”‚
    â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
    â”‚                                   â”‚                                  â”‚
    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚    â”‚                       kube-proxy                           â”‚    â”‚
    â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ Service â†’ Pod íŠ¸ë˜í”½ ë¼ìš°íŒ… (iptables/IPVS)          â”‚   â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ í´ëŸ¬ìŠ¤í„° ë‚´ë¶€/ì™¸ë¶€ ë„¤íŠ¸ì›Œí¬ í†µì‹  ê´€ë¦¬                      â”‚   â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ Serviceì˜ ClusterIP, NodePort êµ¬í˜„                  â”‚   â”‚    â”‚
    â”‚    â”‚  â”‚ â€¢ ë¡œë“œ ë°¸ëŸ°ì‹± (ì—¬ëŸ¬ Podì— íŠ¸ë˜í”½ ë¶„ë°°)                     â”‚   â”‚    â”‚
    â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                   â”‚                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                               ì™¸ë¶€ íŠ¸ë˜í”½ / ë‹¤ë¥¸ ë…¸ë“œ
```

---

## ì›Œì»¤ ë…¸ë“œ ì»´í¬ë„ŒíŠ¸ ë™ì‘ íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Pod ìƒì„± ì‹œ ì›Œì»¤ ë…¸ë“œ ë‚´ë¶€ ë™ì‘ íë¦„                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  API Server     â”‚
   â”‚ (ì»¨íŠ¸ë¡¤ í”Œë ˆì¸)    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ â‘  "ì´ ë…¸ë“œì— Podë¥¼ ë°°ì¹˜í•´ë¼" (Pod Spec ì „ë‹¬)
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚    kubelet      â”‚  â—€â”€â”€ í•­ìƒ API Serverë¥¼ Watchí•˜ê³  ìˆìŒ
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ â‘¡ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì— ì»¨í…Œì´ë„ˆ ìƒì„± ìš”ì²­ (CRI í˜¸ì¶œ)
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Container       â”‚
   â”‚ Runtime         â”‚
   â”‚ (containerd)    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ â‘¢ ì´ë¯¸ì§€ Pull (í•„ìš”ì‹œ) + ì»¨í…Œì´ë„ˆ ìƒì„± ë° ì‹¤í–‰
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Container     â”‚  â—€â”€â”€ ì‹¤ì œ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹¤í–‰
   â”‚   (App ì‹¤í–‰)     â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚ â‘£ Podì— IP í• ë‹¹ë¨
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   kube-proxy    â”‚  â—€â”€â”€ Service ì„¤ì •ì— ë”°ë¼ ë„¤íŠ¸ì›Œí¬ ê·œì¹™ ì—…ë°ì´íŠ¸
   â”‚ (iptables ì„¤ì •)  â”‚      (ì˜ˆ: Service ClusterIP â†’ Pod IP ë§¤í•‘)
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

* **kubelet**: í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ê° ë…¸ë“œì—ì„œ ë™ì‘í•˜ë©° podì— ì—°ê²°ëœ ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ë…¸ë“œì— podê°€ ìŠ¤ì¼€ì¤„ë§ë˜ë©´ kubeletì´ ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì— ì§€ì‹œí•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
* **kube-proxy**: í´ëŸ¬ìŠ¤í„° ë‚´ì˜ ê° ë…¸ë“œì—ì„œ ë™ì‘í•˜ë©° Service ë¦¬ì†ŒìŠ¤ì˜ ì„¤ì •ì— ë”°ë¼ ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. kube-proxyì— ì˜í•´ í´ëŸ¬ìŠ¤í„° ì•ˆê³¼ ë°–ì˜ ë„¤íŠ¸ì›Œí¬ ì„¸ì…˜ì—ì„œ podì˜ ë„¤íŠ¸ì›Œí¬ í†µì‹ ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.
* **ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„**: ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ íŠ¹ìœ ì˜ ê¸°ìˆ ì€ ì•„ë‹™ë‹ˆë‹¤. êµ¬ì²´ì ìœ¼ë¡œ containerdë‚˜ CRI-Oë“±ì´ ìˆìŠµë‹ˆë‹¤.

# 9.5 ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ì— ì ‘ê·¼í•˜ê¸° ìœ„í•œ CLI: kubectl 
kubectlì€ kube-apiserverì™€ í†µì‹ í•˜ê¸° ìœ„í•œ CLI ë„êµ¬ì…ë‹ˆë‹¤. kube-apiserverëŠ” kubectlì—†ì´ë„ curl ë“±ìœ¼ë¡œ í†µì‹ í• ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
í•˜ì§€ë§Œ ê·¸ë ‡ê²Œ í†µì‹ í•˜ëŠ” ê²ƒì€ ë§¤ìš° ë²ˆê±°ë¡­ê¸° ë•Œë¬¸ì— wrapper ë„êµ¬ì¸ kubectlì„ ì‚¬ìš©í•©ë‹ˆë‹¤. kube-apiserverì™€ í†µì‹ í•œ ëª¨ë“  ê°’ì€ JSONí˜•ì‹ì´ì–´ì•¼ í•˜ì§€ë§Œ ìš°ë¦¬ê°€ í™•ì¸í•œ ëª¨ë“ ê°’ì€ yamlì´ì—ˆìŠµë‹ˆë‹¤. 
ì´ëŠ” kubectlì´ ì‚¬ìš©ìì—ê²Œ ë” ë³´ê¸° ì‰¬ìš´ í˜•íƒœì¸ YAML í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•´ì£¼ê¸° ë–„ë¬¸ì…ë‹ˆë‹¤.

# 9.6 kubectl apply ì´í›„ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë  ë–„ê¹Œì§€ì˜ íë¦„
kubectl apply --filename pod.yaml(podë¥¼ ìƒì„±í•˜ëŠ” ë§¤ë‹ˆí˜ìŠ¤íŠ¸)ë¥¼ ì‹¤í–‰í–ˆì„ ë–„ ì–´ë–¤ ì¼ì´ ë²Œì–´ì§€ëŠ”ì§€ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤.
```
                     (â‘  kubectl apply -f pod.yaml)
      (=^.^=)  ------------------------------------->  +-------------------+
                                                        |  kube-apiserver   |
                                                        +-------------------+
                                                           |           \
                                                           |            \----->  ( etcd )
                                                           |                      |   |
                                                           |                      |   |
                                                           |                      (-----)
                                                           |
                                                           v
                                                   +-------------------+
                                                   |  kube-scheduler   |
                                                   +-------------------+
                                                           |
                                     (â‘¡ node ì„ íƒ / ìŠ¤ì¼€ì¤„ë§ ì²˜ë¦¬)  (ë°”ì¸ë”© ê²°ê³¼ë¥¼ apiserverì— ë°˜ì˜)
                                                           |
                                                           +---------------------------+
                                                                                       |
                                                                                       v
+-----------------------------------------------------------------------------------------------+
|                                           NodeA                                               |
|                                                                                               |
|                                 (â‘¢ Pod ì¸ì§€)                                                   |
|                                     |                                                         |
|                                     v                                                         |
|                                 +----------+                                                  |
|                                 | kubelet  |                                                  |
|                                 +----------+                                                  |
|                                     |                                                         |
|                         (â‘£ ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì˜ë¢°)                                                    |
|                                     v                                                         |
|                           +--------------------+                                              |
|                           |  ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„     |                                                |
|                           +--------------------+                                              |
|                              |              |                                                 |
|                              v              v                                                 |
|                         +-----------+  +-----------+                                          |
|                         | ì»¨í…Œì´ë„ˆ  |  | ì»¨í…Œì´ë„ˆ  |                                               |
|                         +-----------+  +-----------+                                          |
+-----------------------------------------------------------------------------------------------+


```

kubectlì— ì˜í•´ kube-apiserverì—ê²Œ pod ìƒì„± ì§€ì‹œê°€ ì „ë‹¬ë©ë‹ˆë‹¤. etcdì—ëŠ” ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì˜ ì •ë³´ê°€ ì €ì¥ë©ë‹ˆë‹¤. ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ëŸ¬ê°€ ì–´ë–¤ ë…¸ë“œì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í• ì§€ ê²°ì •í•©ë‹ˆë‹¤. 
kubeletì€ ìê¸°ê°€ ëŒê³  ìˆëŠ” ë…¸ë“œì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•´ì•¼ í•¨ì„ ê°ì§€í•˜ê³  ì»¨í…Œì´ë„ˆ ëŸ°íƒ€ì„ì— ì§€ì‹œí•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.

# 9.7 ë§Œë“¤ê³  ë§ê°€ëœ¨ë¦¬ê¸° ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë¶€ì„œì§€ì§€ ì•ŠëŠ”ë‹¤?
ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ã…‡ë‹ˆ ì‹¤í–‰ë˜ê³  ìˆëŠ” ë¨¸ì‹ ì„ íŒŒê´´í•´ë„ ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ëŠ” ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ê° ì»´í¬ë„ŒíŠ¸ê°€ ë…ë¦½ì ìœ¼ë¡œ ë™ì‘í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. 
ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì— ì ‘ì†í•  ìˆ˜ ì—†ë‹¤ê³  í•´ì„œ ì›Œì»¤ ë…¸ë“œìƒì˜ ì»¨í…Œì´ë„ˆë¥¼ ì§€ìš°ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ì»¨í…Œì´ë„ˆë¥¼ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

## 9.7.1 ì¤€ë¹„: í´ëŸ¬ìŠ¤í„° êµ¬ì¶•í•˜ê¸°
``` bash
# ê¸°ì¡´í´ëŸ¬ìŠ¤í„°ê°€ ìˆë‹¤ë©´ ì¼ë‹¨ ì‚­ì œí•©ë‹ˆë‹¤.
$ kind delete cluster
```

ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì§€ì •í•˜ëŠ” ëª…ë ¹ìœ¼ë¡œ í´ëŸ¬ìŠ¤í„°ë¥¼ êµ¬ì¶•í•©ë‹ˆë‹¤.
```yaml
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
- role: worker
  extraPortMappings:
  - containerPort: 30599
    hostPort: 30599
    listenAddress: "127.0.0.1"
    protocol: TCP
- role: worker
```

``` bash
$ kind create cluster -n multinode-nodeport --config ./multinode-nodeport.yaml 
Creating cluster "multinode-nodeport" ...
 âœ“ Ensuring node image (kindest/node:v1.34.0) ğŸ–¼
 âœ“ Preparing nodes ğŸ“¦ ğŸ“¦ ğŸ“¦  
 âœ“ Writing configuration ğŸ“œ 
 âœ“ Starting control-plane ğŸ•¹ï¸ 
 âœ“ Installing CNI ğŸ”Œ 
 âœ“ Installing StorageClass ğŸ’¾ 
 âœ“ Joining worker nodes ğŸšœ 
Set kubectl context to "kind-multinode-nodeport"
You can now use your cluster with:

kubectl cluster-info --context kind-multinode-nodeport

Have a question, bug, or feature request? Let us know! https://kind.sigs.k8s.io/#community ğŸ™‚

# ë…¸ë“œ ëª©ë¡ì„ í™•ì¸í•©ë‹ˆë‹¤.
$ kubectl get node
kubectl get node
NAME                               STATUS   ROLES           AGE   VERSION
multinode-nodeport-control-plane   Ready    control-plane   80s   v1.34.0
multinode-nodeport-worker          Ready    <none>          65s   v1.34.0
multinode-nodeport-worker2         Ready    <none>          65s   v1.34.0

# ë©€í‹°ë…¸ë“œë¡œ êµ¬ì„±ë˜ì–´ ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

## 9.7.2 hello-server ì‹¤í–‰í•˜ê¸°
hello-serverë¼ëŠ” ê°„ë‹¨í•œ ì›¹ ì„œë²„ë¥¼ ì‹¤í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.  
``` yaml
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello-server
  labels:
    app: hello-server
spec:
  replicas: 3
  selector:
    matchLabels:
      app: hello-server
  template:
    metadata:
      labels:
        app: hello-server
    spec:
      containers:
      - name: hello-server
        image: blux2/hello-server:1.8
        resources:
          requests:
            memory: "256Mi"
            cpu: "10m"
          limits:
            memory: "256Mi"
            cpu: "10m"
        readinessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 5
          periodSeconds: 5
        livenessProbe:
          httpGet:
            path: /health
            port: 8080
          initialDelaySeconds: 10
          periodSeconds: 5
---
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: hello-server-pdb
spec:
  maxUnavailable: 10%
  selector:
    matchLabels:
      app: hello-server
---
apiVersion: v1
kind: Service
metadata:
  name: hello-server-external
spec:
  type: NodePort
  selector:
    app: hello-server
  ports:
    - port: 8080
      targetPort: 8080
      nodePort: 30599
```

``` bash
# ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì ìš©í•©ë‹ˆë‹¤.
$ kubectl apply --filename hello-server.yaml --namespace default
deployment.apps/hello-server created
poddisruptionbudget.policy/hello-server-pdb created
service/hello-server-external created

# podê°€ ì‹¤í–‰ ì¤‘ì¸ ê²ƒì„ í™•ì¸í•©ë‹ˆë‹¤.
$ kubectl get pod --namespace default
NAME                            READY   STATUS             RESTARTS   AGE
hello-server-5d6df7b9b7-6ktqj   1/1     Running            0          48s
hello-server-5d6df7b9b7-6r429   1/1     Running            0          48s
hello-server-5d6df7b9b7-lzrkq   1/1     Running            0          48s

# hello-serverì™€ì˜ í†µì‹ ì„ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤. ë¨¼ì € ë…¸ë“œì˜ IPë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
$ kubectl get node multinode-nodeport-worker -o jsonpath='{.status.addresses[?(@.type=="InternalIP")].address}'
172.18.0.3

# í™•ì¸í•œ InternalIPë¡œ ì ‘ì†í•©ë‹ˆë‹¤.
$ curl 172.18.0.2:30599
Hello, world! Let's learn Kubernaetes!
```

## 9.7.3 ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ ì •ì§€í•˜ê¸°
kindë¥¼ ì´ìš©í•˜ê³  ìˆë‹¤ë©´ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ìš© Docker ì»¨í…Œì´ë„ˆë¥¼ ì •ì§€í•˜ë©´ ë©ë‹ˆë‹¤. 
``` bash
# ë¨¼ì € DFocker ì»¨í…Œì´ë„ˆ IDë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
$ docker ps

# multinode-nodeport-control-planeë¼ê³  ì“°ì—¬ìˆëŠ” ì»¨í…Œì´ë„ˆì˜ CONTAINER IDë¥¼ ë³µì‚¬í•˜ì—¬ ì»¨í…Œì´ë„ˆë¥¼ ì •ì§€í•©ë‹ˆë‹¤.
$ docker stop <multinode-nodeport-control-planeì˜ CONTAINER ID>

# ê·¸ëŸ¼ hello-serverëŠ” ì–´ë–»ê²Œ ë˜ì—ˆì„ê¹Œìš”?
$ curl 172.18.0.2:30599
Hello, world! Let's learn Kubernaetes!

# ë¬¸ì œì—†ì´ ë™ì‘í•˜ëŠ”ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Podì˜ STATUSë„ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.
$ kubectl get pod --namespace default
The connection to the server localhost:6443 was refused - did you specify the right host or port?

# ì ‘ì†í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ëŠ” ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì„ ë©ˆì¶°ì„œ kube-apiserverì— ì ‘ì†í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
# ê·¸ëŸ¬ë‚˜ ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì´ ì •ì§€ë˜ë”ë¼ë„ ì»¨í…Œì´ë„ˆëŠ” ê³„ì† ì‹¤í–‰ë©ë‹ˆë‹¤. kube-apiserverì— ì ‘ì† í•  ìˆ˜ ì—†ê¸° ë–„ë¬¸ì— ì»¨í…Œì´ë„ˆë¥¼ ì—…ë°ì´íŠ¸í•˜ê±°ë‚˜ podì˜ ìˆ˜ë¥¼ ë³€ê²½í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ
# ì ì–´ë„ ì„œë¹„ìŠ¤ê°€ ì¦‰ì‹œ ë©ˆì¶”ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ì¥ì• ì— ê°•í•˜ë‹¤ê³  í•˜ëŠ” ì´ìœ ì…ë‹ˆë‹¤.
# ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ì„ ë‹¤ì‹œ ì‹œì‘í•˜ë©´, ì´ì „ì²˜ëŸ¼ kubectlì„ ì‚¬ìš©í•  ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤.
$ docker start <multinode-nodeport-control-planeì˜ CONTAINER ID>

# ë§ˆì§€ë§‰ìœ¼ë¡œ ì‹¤ìŠµ í´ëŸ¬ìŠ¤í„°ë¥¼ ì •ë¦¬í•©ë‹ˆë‹¤.
$ kind delete cluster --name multinode-nodeport

# ê¸°ë³¸ êµ¬ì„±ì˜ í´ëŸ¬ìŠ¤í„°ë¥¼ ë‹¤ì‹œ ì‹œì‘í•©ë‹ˆë‹¤.
$ kind create cluster --image kindest/node:v1.34.0
```

## 9.8 ì¿ ë²„ë„¤í‹°ìŠ¤ë¥¼ í™•ì¥í•˜ëŠ” ë°©ë²•
ì¿ ë²„ë„¤í‹°ìŠ¤ íŠ¹ì§• ì¤‘ í•˜ë‚˜ëŠ” <mark>ì‚¬ìš©ìê°€ ìŠ¤ìŠ¤ë¡œ í™•ì¥í•  ìˆ˜ ìˆë‹¤</mark>ëŠ” ê²ƒì…ë‹ˆë‹¤.  
í™•ì¥ì„ ìœ„í•œ ì„œì ê³¼ ì‚¬ì´íŠ¸ë¥¼ 12ì¥ì—ì„œ ì†Œê°œí•©ë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ podë‚˜ Deployment ë“±ì˜ 'ë¦¬ì†ŒìŠ¤'ë¥¼ ìƒì„±í•´ì™”ëŠ”ë° ì¿ ë²„ë„¤í‹°ìŠ¤ í‘œì¤€ìœ¼ë¡œ ì œê³µí•˜ëŠ” ë¦¬ì†ŒìŠ¤ë§Œìœ¼ë¡œëŠ” ë¶€ì¡±í•  ë–„ê°€ ìˆìŠµë‹ˆë‹¤. 
ì˜ˆë¥¼ ë“¤ì–´ 10ì¥ì—ì„œ ì„¤ëª…í•˜ëŠ” ArgoCDë¼ëŠ” OSSëŠ” ì§€ì •í•œ ë¦¬í¬ì§€í„°ë¦¬ì˜ ì´ë¦„ê³¼ ê²½ë¡œì˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ìë™ìœ¼ë¡œ ë°°í¬í•©ë‹ˆë‹¤.  
  
í•˜ì§€ë§Œ ê¸°ì¡´ ë¦¬ì†ŒìŠ¤ë§Œìœ¼ë¡œëŠ” ì´ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 'ë¦¬í¬ì§€í† ë¦¬ ì´ë¦„', 'ê²½ë¡œ'ë¥¼ ì§€ì •í•˜ëŠ” ë¦¬ì†ŒìŠ¤ì™€ ì´ ë¦¬ì†ŒìŠ¤ì˜ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ 'ìë™ ë°°í¬ë¥¼ ìˆ˜í–‰í•˜ëŠ” í”„ë¡œê·¸ë¨'ì´ 
í•„ìš”í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ë…ìì ì¸ ë¦¬ì†ŒìŠ¤ë¥¼ Custom Resource(CR)ì´ë¼ê³  ë¶€ë¥´ë©°, CRì„ ë§Œë“¤ê¸° ìœ„í•´ í•„ìš”í•œ ì •ì˜ê°€ Custom Resource Definition(CRD)ì…ë‹ˆë‹¤.  
  
ë˜í•œ CRì„ ì°¸ì¡°í•˜ì—¬ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì„ <mark>ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤ëŸ¬</mark>ë¼ê³  í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ í‘œì¤€ìœ¼ë¡œ íƒ‘ì¬ëœ Deployment ControllerëŠ” kube-controller-managerì— í¬í•¨ë˜ì–´ìˆìŠµë‹ˆë‹¤.

```
                      ( Deployment Controller )
                 .--------------------------------.
               .'                                  '.
              (          Deployment Controller       )
               '.                                  .'
                 '--------------------------------'
                        |                 \
                     watch                 \  create
                        v                  v
                 .--------------.    .--------------.
               .'                '.  .'              '.
              (    Deployment      ) (   ReplicaSet   )
               '.                .'  '.              .'
                 '--------------'      '--------------'


  --------------------------------------------------------------------


                           ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤

                 .--------------. 
               .'                '.
              (      Otofu        )
               '.                .'
                 '--------------'
                        ^
                        |  watch
                        |
          .--------------------------------.
        .'                                  '.
       (          Otofu Controller            )
        '.                                  .'
          '--------------------------------'
                        \
                         \  create
                          v
                    .--------------.
                  .'                '.
                 (       Pod          )
                  '.                .'
                    '--------------'

                           ì»¤ìŠ¤í…€ ì»¨íŠ¸ë¡¤ëŸ¬


   (ì˜ˆë¥¼ ë“¤ë©´, Otofuë¼ëŠ” ì»¤ìŠ¤í…€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•´ì„œ
    Podë¥¼ ë§Œë“¤ ìˆ˜ ìˆì–´)
                 \ 
                  \    (=^.^=)

```

ConfigMapì— í•„ìš”í•œ ì •ë³´ë¥¼ ì €ì¥í•˜ê³  í•´ë‹¹ ì •ë³´ë¥¼ ì½ëŠ” í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•´ë„ ë˜ì§€ ì•Šì„ê¹Œ ìƒê°í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.  
ë‹¤ìŒ ì¤‘ í•˜ë‚˜ë¼ë„ í•´ë‹¹ëœë‹¤ë©´ ConfigMapì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤ê³  í•©ë‹ˆë‹¤.
* ë„ë¦¬ ì‚¬ìš©ë˜ëŠ” ì˜ ë¬¸ì„œí™”ëœ ã…ˆì„¤ì • íŒŒì¼ í˜•ì‹(ex mysql.cnf, pom.xml ë“±)ì„ ì‚¬ìš©í•˜ê³  ìˆë‹¤.
* ì„¤ì • ì „ì²´ë¥¼ ConfigMapì˜ í‚¤ í•˜ë‚˜ì— ë„£ê³  ì‹¶ë‹¤.
* podì—ì„œ ë™ì‘í•˜ëŠ” í”„ë¡œê·¸ë¨ì´ ìì‹ ì˜ ì„¤ì •ì„ ìœ„í•´ í•´ë‹¹ íŒŒì¼ì„ ì‚¬ìš©í•œë‹¤.
* ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ APIê°€ ì•„ë‹Œ podì˜ íŒŒì¼ì´ë‚˜ í™˜ê²½ ë³€ìˆ˜ë¡œ ì‚¬ìš©í•˜ê³  ì‹¶ë‹¤.
* íŒŒì¼ì´ ì—…ë°ì´íŠ¸ë˜ì—ˆì„ ë•Œ Deploymentë¥¼ ì‚¬ìš©í•˜ì—¬ RollingUpdateë¥¼ ì‹¤í–‰í•˜ê³  ì‹¶ë‹¤.