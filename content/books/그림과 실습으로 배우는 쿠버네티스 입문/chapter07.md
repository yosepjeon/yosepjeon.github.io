+++
title = "Chapter 07. ë¬´ìƒíƒœ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì•ˆì „í•˜ê²Œ ë§Œë“¤ê¸°"
date = "2025-12-10"
weight = 7
+++




# 7.1 ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ í—¬ìŠ¤ ì²´í¬
ì¿ ë²„ë„¤í‹°ìŠ¤ì—ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ í—¬ìŠ¤ ì²´í¬ë¥¼ ìˆ˜í–‰í•˜ê³ ,  
ì •ìƒì ì´ì§€ ì•Šì„ ë•Œ ìë™ìœ¼ë¡œ Serviceë‚˜ podë¥¼ ì œì–´í•˜ëŠ” ê¸°ëŠ¥ì´ ìˆìŠµë‹ˆë‹¤.

## 7.1.1 Readiness Probe
Readiness ProbeëŠ” Podê°€ íŠ¸ë˜í”½ì„ ë°›ì„ ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ì§€ë¥¼ í™•ì¸í•˜ëŠ” í—¬ìŠ¤ ì²´í¬ ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.  
ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ ì¤‘ì¸ ìƒíƒœì™€ íŠ¸ë˜í”½ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ìƒíƒœëŠ” ê°™ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì´ˆê¸°í™”ê°€ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì€ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ëœ ì´í›„ì—ë„ íŠ¸ë˜í”½ì„ ë°›ì„ ìˆ˜ ìˆê¸°ê¹Œì§€ ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì´ë¥¼ ìœ„í•´ ì»¨í…Œì´ë„ˆê°€ Ready ìƒíƒœê°€ ë  ë•Œê¹Œì§€ì˜ ì‹œê°„ê³¼ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì œì–´í•©ë‹ˆë‹¤.

```yaml
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: httpserver
  name: httpserver-readiness
spec:
  containers:
  - name: httpserver
    image: blux2/delayfailserver:1.1
    readinessProbe:
      httpGet:
        path: /healthz
        port: 8080
      initialDelaySeconds: 5
      periodSeconds: 5
```

ì´ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” /healthzë¼ëŠ” ì—”ë“œí¬ì¸íŠ¸ì˜ 8080í¬íŠ¸ì— 5ì´ˆë§ˆë‹¤ í—¬ìŠ¤ ì²´í¬ ìš”ì²­ì„ ë³´ë‚´ì£¼ê³  ìˆìŠµë‹ˆë‹¤.  
ì´ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” HTTP ìš”ì²­ì„ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ, ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ê±°ë‚˜ TCP ì†Œì¼“ì„ ì‚¬ìš©í•˜ë„ë¡ Probeë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.(ë²„ì „ 1.24ë¶€í„°ëŠ” gRPCë„ ë² íƒ€ë¡œ ì§€ì›)  
Readinessë¼ëŠ” ì´ë¦„ì´ì§€ë§Œ, ì»¨í…Œì´ë„ˆë¥¼ ì‘ë™í•  ë–„ë§Œì´ ì•„ë‹ˆë¼ podì˜ ë¼ì´í”„ì‚¬ì´í´ ì „ì²´ì— ê±¸ì³ ìœ íš¨í•©ë‹ˆë‹¤.  
  
Readiness probeì— ì‹¤íŒ¨í•œ podëŠ” ì‹¤íŒ¨í•œ podëŠ” Service ë¦¬ì†ŒìŠ¤ì˜ ì—°ê²° ëŒ€ìƒì—ì„œ ì œì™¸ë˜ì–´ íŠ¸ë˜í”½ì„ ë°›ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.
```bash
$ kubectl apply --filename pod-readiness.yaml
pod/httpserver-readiness created

// ì²˜ìŒì—ëŠ” READY 1/1ì´ì§€ë§Œ, ì ì‹œ í›„ READY 0/1ì´ ë©ë‹ˆë‹¤. 
$ kubectl get pod --watch --namespace default
NAME                     READY   STATUS    RESTARTS   AGE
httpserver-readiness     0/1     Running   0          10s
httpserver-readiness     1/1     Running   0          15s

// ë¡œê·¸ë¥¼ ì°¸ì¡°í•˜ë©´ í—¬ìŠ¤ ì²´í¬ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
$ kubectl logs httpserver-readiness --namespace default

// ì‹¤ìŠµì„ ì •ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.
$ kubectl delete --filename pod-readiness.yaml --name default
```

### Readiness Probeì˜ ë™ì‘ ì›ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Kubernetes Cluster                             â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   Service   â”‚         â”‚                    Pod                      â”‚    â”‚
â”‚  â”‚  (ë¡œë“œë°¸ëŸ°ì„œ)  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚             â”‚         â”‚  â”‚           Container                 â”‚    â”‚    â”‚
â”‚  â”‚  Endpoints: â”‚         â”‚  â”‚                                     â”‚    â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”‚â”€â”€â–¶  Readiness Probe ì²´í¬             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ Pod IP â”‚ â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”‚â”€â”€â”€â”€  (HTTP GET /health)             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚        â”‚ â”‚ ì„±ê³µ ì‹œ   â”‚  â”‚                                     â”‚    â”‚    â”‚
â”‚  â”‚  â”‚ ë“±ë¡    â”‚ â”‚ ë“±ë¡     â”‚  â”‚      âœ“ 200 OK â†’ Ready ìƒíƒœ           â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚  â”‚      âœ— 5xx   â†’ Not Ready ìƒíƒœ        â”‚    â”‚    â”‚
â”‚  â”‚             â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        Readiness Probe ì‹¤íŒ¨ ì‹œ                       â”‚     â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   Service                              Pod                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚    â”‚
â”‚  â”‚  â”‚  Endpoints  â”‚      â•³           â”‚  Container  â”‚                   â”‚    â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                   â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ Pod IP â”‚ â”‚  íŠ¸ë˜í”½ ì „ë‹¬ ì¤‘ë‹¨ â”‚  Not Ready  â”‚                      â”‚    â”‚
â”‚  â”‚  â”‚  â”‚ ì œê±°ë¨  â”‚ â”‚                  â”‚             â”‚                    â”‚    â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì£¼ìš” íŠ¹ì§•

| íŠ¹ì§• | ì„¤ëª… |
|------|------|
| **ëª©ì ** | Podê°€ íŠ¸ë˜í”½ì„ ë°›ì„ ì¤€ë¹„ê°€ ë˜ì—ˆëŠ”ì§€ í™•ì¸ |
| **ì‹¤íŒ¨ ì‹œ ë™ì‘** | Serviceì˜ Endpointsì—ì„œ Pod IP ì œê±° (íŠ¸ë˜í”½ ì „ë‹¬ ì¤‘ë‹¨) |
| **Pod ì¬ì‹œì‘** | âŒ Podë¥¼ ì¬ì‹œì‘í•˜ì§€ ì•ŠìŒ |
| **ì‚¬ìš© ì‹œì ** | ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™”, DB ì—°ê²° ëŒ€ê¸°, ìºì‹œ ì›Œë°ì—… ë“± |

### Readiness Probeì˜ 3ê°€ì§€ ì²´í¬ ë°©ì‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Readiness Probe ì²´í¬ ë°©ì‹                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚     HTTP GET         â”‚     TCP Socket       â”‚      Exec Command          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                      â”‚                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚ kubelet  â”‚       â”‚   â”‚ kubelet  â”‚       â”‚   â”‚ kubelet  â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚             â”‚        â”‚             â”‚        â”‚                   â”‚
â”‚   HTTP GET           â”‚   TCP ì—°ê²° ì‹œë„        â”‚   ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ             â”‚
â”‚   /healthz           â”‚   port: 8080         â”‚   ëª…ë ¹ì–´ ì‹¤í–‰                 â”‚
â”‚        â”‚             â”‚        â”‚             â”‚        â”‚                   â”‚
â”‚        â–¼             â”‚        â–¼             â”‚        â–¼                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   â”‚Container â”‚       â”‚   â”‚Container â”‚       â”‚   â”‚Container â”‚             â”‚
â”‚   â”‚ :8080    â”‚       â”‚   â”‚ :8080    â”‚       â”‚   â”‚ $ cmd    â”‚             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                      â”‚                      â”‚                            â”‚
â”‚  200-399: ì„±ê³µ        â”‚  ì—°ê²° ì„±ê³µ: ì„±ê³µ         â”‚  exit 0: ì„±ê³µ               â”‚
â”‚  ê·¸ ì™¸: ì‹¤íŒ¨           â”‚  ì—°ê²° ì‹¤íŒ¨: ì‹¤íŒ¨         â”‚  ê·¸ ì™¸: ì‹¤íŒ¨                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### YAML ì„¤ì • ì˜ˆì‹œ

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: my-app
spec:
  containers:
  - name: my-container
    image: my-app:1.0
    ports:
    - containerPort: 8080
    readinessProbe:
      httpGet:
        path: /health      # í—¬ìŠ¤ ì²´í¬ ì—”ë“œí¬ì¸íŠ¸
        port: 8080         # ì²´í¬í•  í¬íŠ¸
      initialDelaySeconds: 5   # ì»¨í…Œì´ë„ˆ ì‹œì‘ í›„ ì²« ì²´í¬ê¹Œì§€ ëŒ€ê¸° ì‹œê°„
      periodSeconds: 10        # ì²´í¬ ì£¼ê¸° (10ì´ˆë§ˆë‹¤)
      timeoutSeconds: 3        # íƒ€ì„ì•„ì›ƒ (3ì´ˆ)
      successThreshold: 1      # ì„±ê³µìœ¼ë¡œ íŒë‹¨í•  ì—°ì† ì„±ê³µ íšŸìˆ˜
      failureThreshold: 3      # ì‹¤íŒ¨ë¡œ íŒë‹¨í•  ì—°ì† ì‹¤íŒ¨ íšŸìˆ˜
```

### Readiness Probe íƒ€ì„ë¼ì¸

```
ì‹œê°„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶

Container ì‹œì‘
     â”‚
     â”‚â—€â”€â”€â”€â”€ initialDelaySeconds (5ì´ˆ) â”€â”€â”€â”€â–¶â”‚
     â”‚                                     â”‚
     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â–¶
     â”‚                                     â”‚  â”‚      â”‚      â”‚      â”‚
                                        ì²«ë²ˆì§¸  2ë²ˆì§¸  3ë²ˆì§¸  4ë²ˆì§¸  ...
                                        ì²´í¬   ì²´í¬   ì²´í¬   ì²´í¬
                                           â”‚â—€â”€10ì´ˆâ”€â–¶â”‚
                                           periodSeconds

     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚  ì²´í¬ ê²°ê³¼ì— ë”°ë¥¸ ìƒíƒœ ë³€í™”                                           â”‚
     â”‚                                                                 â”‚
     â”‚  [Not Ready] â”€â”€â”€ì„±ê³µâ”€â”€â”€â–¶ [Ready] â—€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
     â”‚       â–²                     â”‚             â”‚                     â”‚
     â”‚       â”‚                     â”‚          ì„±ê³µ                      â”‚
     â”‚       â”‚               3íšŒ ì—°ì† ì‹¤íŒ¨       â”‚                        â”‚
     â”‚       â”‚                     â”‚             â”‚                     â”‚
     â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Readiness Probeê°€ í•„ìš”í•œ ìƒí™©

1. **ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì‹œê°„ì´ í•„ìš”í•œ ê²½ìš°**
   - ëŒ€ìš©ëŸ‰ ë°ì´í„° ë¡œë”©
   - ìºì‹œ ì›Œë°ì—…
   - ì„¤ì • íŒŒì¼ íŒŒì‹±

2. **ì™¸ë¶€ ì˜ì¡´ì„± ì—°ê²° ëŒ€ê¸°**
   - ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° í™•ë¦½
   - ë©”ì‹œì§€ í ì—°ê²°
   - ì™¸ë¶€ API ì—°ê²° í™•ì¸

3. **Rolling Update ì‹œ ì•ˆì „í•œ ë°°í¬**
   - ìƒˆ Podê°€ ì™„ì „íˆ ì¤€ë¹„ëœ í›„ì—ë§Œ íŠ¸ë˜í”½ ì „ë‹¬
   - êµ¬ Pod ì¢…ë£Œ ì „ ìƒˆ Pod ì¤€ë¹„ ìƒíƒœ í™•ì¸

## 7.1.2 Liveness Probe
Liveness probeëŠ” Readness probeì™€ ë¹„ìŠ·í•˜ì§€ë§Œ, Readiness probeëŠ” Serviceì™€ì˜ ì—°ê²°ì„ ëŠëŠ” ë°˜ë©´, Liveness probeëŠ” podë¥¼ ì¬ì‹œì‘í•©ë‹ˆë‹¤.  
ì´ëŠ” `podê°€ ë©ˆì¶”ì—ˆì„ ë•Œ ì¬ì‹œì‘ìœ¼ë¡œ í•´ê²°ë  ìˆ˜ ìˆëŠ” ê²½ìš°`ì— ìœ íš¨í•©ë‹ˆë‹¤.  
í•˜ì§€ë§Œ, Liveness probeëŠ” ì¬ì‹œì‘ì„ ë¬´í•œíˆ ë°˜ë³µí•  ìœ„í—˜ì´ ìˆìœ¼ë¯€ë¡œ ì‹ ì¤‘í•˜ê²Œ ë„ì…í•´ì•¼í•©ë‹ˆë‹¤.

```yaml
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: httpserver
  name: httpserver-liveness
spec:
  containers:
  - name: httpserver
    image: blux2/delayfailserver:1.1
    livenessProbe:
      httpGet:
        path: /healthz
        port: 8080
      initialDelaySeconds: 5
      periodSeconds: 5
```

### Liveness Probeì˜ ë™ì‘ ì›ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Kubernetes Cluster                             â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         Liveness Probe ì„±ê³µ ì‹œ                        â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   kubelet                              Pod                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  â”‚             â”‚   Liveness       â”‚      Container          â”‚       â”‚    â”‚
â”‚  â”‚  â”‚   Health    â”‚â”€â”€â”€â”€â”€â”€ì²´í¬â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚       â”‚    â”‚
â”‚  â”‚  â”‚   Check     â”‚â—€â”€â”€â”€â”€â”€200 OKâ”€â”€â”€â”€â”€â”€â”‚   âœ“ ì •ìƒ ë™ì‘ ì¤‘           â”‚       â”‚    â”‚
â”‚  â”‚  â”‚             â”‚                  â”‚                         â”‚       â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â”‚        â”‚                                                            â”‚    â”‚
â”‚  â”‚        â””â”€â”€â–¶ ì•„ë¬´ ë™ì‘ ì—†ìŒ (ê³„ì† ì‹¤í–‰)                                    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         Liveness Probe ì‹¤íŒ¨ ì‹œ                        â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   kubelet                              Pod                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚  â”‚             â”‚   Liveness       â”‚      Container          â”‚       â”‚    â”‚
â”‚  â”‚  â”‚   Health    â”‚â”€â”€â”€â”€â”€â”€ì²´í¬â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                         â”‚       â”‚    â”‚
â”‚  â”‚  â”‚   Check     â”‚â—€â”€â”€â”€â”€â”€ì‹¤íŒ¨/íƒ€ì„ì•„ì›ƒâ”€â”€â”‚   âœ— ì‘ë‹µ ì—†ìŒ/ì˜¤ë¥˜          â”‚       â”‚    â”‚
â”‚  â”‚  â”‚             â”‚                  â”‚                         â”‚       â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â”‚         â”‚                                    â”‚                      â”‚    â”‚
â”‚  â”‚         â”‚         failureThreshold ì´ˆê³¼ ì‹œ    â”‚                       â”‚    â”‚
â”‚  â”‚         â”‚                                    â–¼                      â”‚    â”‚
â”‚  â”‚         â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚    â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€ ì¬ì‹œì‘ ëª…ë ¹ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   ğŸ”„ Container ì¬ì‹œì‘     â”‚       â”‚    â”‚
â”‚  â”‚                                   â”‚      (RESTARTS +1)      â”‚       â”‚    â”‚
â”‚  â”‚                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Readiness Probe vs Liveness Probe ë¹„êµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Readiness Probe vs Liveness Probe                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Readiness Probe         â”‚           Liveness Probe                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                â”‚                                           â”‚
â”‚   ì‹¤íŒ¨ ì‹œ:                      â”‚    ì‹¤íŒ¨ ì‹œ:                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚   â”‚ Service  â”‚                 â”‚    â”‚ kubelet  â”‚                           â”‚
â”‚   â”‚ Endpoint â”‚                 â”‚    â”‚          â”‚                           â”‚
â”‚   â”‚  ì—ì„œ    â”‚                 â”‚    â”‚  Pod     â”‚                            â”‚
â”‚   â”‚  ì œê±°    â”‚                 â”‚    â”‚  ì¬ì‹œì‘   â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚        â”‚                       â”‚         â”‚                                 â”‚
â”‚        â–¼                       â”‚         â–¼                                 â”‚
â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—             â”‚    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—                       â”‚
â”‚   â•‘  íŠ¸ë˜í”½ ì°¨ë‹¨   â•‘             â”‚    â•‘ ì»¨í…Œì´ë„ˆ Kill â•‘                         â”‚
â”‚   â•‘  PodëŠ” ìœ ì§€   â•‘             â”‚    â•‘  â†’ ì¬ìƒì„±    â•‘                         â”‚
â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•             â”‚    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                       â”‚
â”‚                                â”‚                                           â”‚
â”‚   ì‚¬ìš© ì¼€ì´ìŠ¤:                   â”‚    ì‚¬ìš© ì¼€ì´ìŠ¤:                               â”‚
â”‚   â€¢ ì´ˆê¸°í™” ì¤‘                    â”‚    â€¢ ë°ë“œë½ ìƒíƒœ                             â”‚
â”‚   â€¢ ì¼ì‹œì  ê³¼ë¶€í•˜                 â”‚    â€¢ ë¬´í•œ ë£¨í”„                               â”‚
â”‚   â€¢ ì˜ì¡´ì„± ì—°ê²° ëŒ€ê¸°              â”‚    â€¢ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¡œ ì‘ë‹µ ë¶ˆê°€                     â”‚
â”‚                                â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Liveness Probe ì£¼ì˜ì‚¬í•­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    âš ï¸  Liveness Probe ë¬´í•œ ì¬ì‹œì‘ ìœ„í—˜                          â”‚
â”‚                                                                             â”‚
â”‚   ì‹œê°„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶     â”‚
â”‚                                                                             â”‚
â”‚   Pod ì‹œì‘ â”€â”€â–¶ ì‹¤íŒ¨ â”€â”€â–¶ ì¬ì‹œì‘ â”€â”€â–¶ ì‹¤íŒ¨ â”€â”€â–¶ ì¬ì‹œì‘ â”€â”€â–¶ ì‹¤íŒ¨ â”€â”€â–¶ ...                 â”‚
â”‚       â”‚          â”‚         â”‚         â”‚         â”‚         â”‚                  â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                          ë¬´í•œ ë°˜ë³µ!                                           â”‚
â”‚                                                                             â”‚
â”‚   ì›ì¸ ì˜ˆì‹œ:                                                                  â”‚
â”‚   â€¢ ì˜ëª»ëœ ì„¤ì •ìœ¼ë¡œ ì¸í•œ ì‹œì‘ ì‹¤íŒ¨                                                 â”‚
â”‚   â€¢ ì™¸ë¶€ ì˜ì¡´ì„± ì˜êµ¬ ì¥ì•                                                         â”‚
â”‚   â€¢ ë¦¬ì†ŒìŠ¤ ë¶€ì¡± (CPU/Memory)                                                   â”‚
â”‚                                                                             â”‚
â”‚   í•´ê²°ì±…:                                                                     â”‚
â”‚   â€¢ Startup Probeì™€ í•¨ê»˜ ì‚¬ìš©                                                  â”‚
â”‚   â€¢ ì ì ˆí•œ initialDelaySeconds ì„¤ì •                                            â”‚
â”‚   â€¢ ê·¼ë³¸ ì›ì¸ í•´ê²° (ì¬ì‹œì‘ìœ¼ë¡œ í•´ê²°ë˜ì§€ ì•ŠëŠ” ë¬¸ì œëŠ” Livenessë¡œ ì²˜ë¦¬ âŒ)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7.1.3 Startup Probe
Startup ProbeëŠ” ì´ˆê¸° ì‘ë™ì‹œì—ë§Œ ì ìš©ë˜ëŠ” probeë¡œ, ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘í•˜ëŠ” ë° ì˜¤ëœ ì‹œê°„ì´ ê±¸ë¦¬ëŠ” ê²½ìš°ì— ìœ ìš©í•©ë‹ˆë‹¤.  
ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ 1.18ë¶€í„° ë„ì…ëœ ê¸°ëŠ¥ìœ¼ë¡œ, ì´ì „ì—ëŠ” Readiness probeë‚˜ Liveness probeì˜ initialDelaySecondsë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.
  
ì´ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ëŠ” ìµœëŒ€ 30ì´ˆ * 10íšŒ = 300ì´ˆ ë™ì•ˆ ì»¨í…Œì´ë„ˆì˜ ì‘ë™ì„ ê¸°ë‹¤ë¦¬ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.
```yaml
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: httpserver
  name: httpserver-liveness
spec:
  containers:
  - name: httpserver
    image: blux2/delayfailserver:1.1
    startupProbe:
      httpGet:
        path: /healthz
        port: 8080
      failureThreshold: 30
      periodSeconds: 10

```

### Startup Probeì˜ ë™ì‘ ì›ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Startup Probe ë™ì‘ íë¦„                            â”‚
â”‚                                                                            â”‚
â”‚  ì‹œê°„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶   â”‚
â”‚                                                                            â”‚
â”‚  Container                                                                 â”‚
â”‚   ì‹œì‘                                                                      â”‚
â”‚    â”‚                                                                       â”‚
â”‚    â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Startup Probe êµ¬ê°„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚    â”‚     â”‚                                                    â”‚            â”‚
â”‚    â”‚     â”‚   10ì´ˆ   10ì´ˆ   10ì´ˆ   10ì´ˆ         10ì´ˆ              â”‚            â”‚
â”‚    â”‚     â”‚  â”Œâ”€â”€â”  â”Œâ”€â”€â”  â”Œâ”€â”€â”  â”Œâ”€â”€â”   ...   â”Œâ”€â”€â”               â”‚            â”‚
â”‚    â–¼     â”‚  â”‚ì²´í¬â”‚  â”‚ì²´í¬â”‚  â”‚ì²´í¬â”‚  â”‚ì²´í¬â”‚         â”‚ì²´í¬â”‚           â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”   â”‚  â”‚âŒâ”‚  â”‚âŒâ”‚  â”‚âŒâ”‚  â”‚âœ“â”‚           â”‚  â”‚                â”‚            â”‚
â”‚  â”‚   â”‚â”€â”€â”€â”¼â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”˜                â”‚            â”‚
â”‚  â””â”€â”€â”€â”˜   â”‚                    â”‚                                â”‚            â”‚
â”‚          â”‚                    â”‚                                â”‚            â”‚
â”‚          â”‚              ì„±ê³µí•˜ë©´ ì¦‰ì‹œ                             â”‚            â”‚
â”‚          â”‚              Startup ì™„ë£Œ                            â”‚            â”‚
â”‚          â”‚                    â”‚                                â”‚            â”‚
â”‚          â”‚                    â–¼                                â”‚            â”‚
â”‚          â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚            â”‚
â”‚          â”‚         â”‚  Liveness/Readiness â”‚                     â”‚            â”‚
â”‚          â”‚         â”‚   Probe ì‹œì‘        â”‚                      â”‚            â”‚
â”‚          â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚            â”‚
â”‚          â”‚                                                     â”‚            â”‚
â”‚          â”‚   ìµœëŒ€ ëŒ€ê¸° ì‹œê°„: periodSeconds Ã— failureThreshold     â”‚            â”‚
â”‚          â”‚         (10ì´ˆ Ã— 30íšŒ = 300ì´ˆ)                         â”‚            â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Startup Probeì™€ ë‹¤ë¥¸ Probeì˜ ê´€ê³„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Probe ì‹¤í–‰ ìˆœì„œì™€ ê´€ê³„                                       â”‚
â”‚                                                                             â”‚
â”‚   Container ì‹œì‘                                                             â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â–¼                                                                    â”‚
â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—     â”‚
â”‚   â•‘                      Startup Probe ì‹¤í–‰ ì¤‘                          â•‘    â”‚
â”‚   â•‘                                                                   â•‘    â”‚
â”‚   â•‘   â€¢ Liveness Probe: â¸ï¸  ë¹„í™œì„±í™” (ëŒ€ê¸°)                              â•‘    â”‚
â”‚   â•‘   â€¢ Readiness Probe: â¸ï¸  ë¹„í™œì„±í™” (ëŒ€ê¸°)                             â•‘    â”‚
â”‚   â•‘                                                                   â•‘    â”‚
â”‚   â•‘   â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì¶©ë¶„íˆ ì‹œì‘í•  ì‹œê°„ì„ í™•ë³´                                â•‘    â”‚
â”‚   â•‘   â†’ Liveness Probeë¡œ ì¸í•œ ì¡°ê¸° ì¬ì‹œì‘ ë°©ì§€                              â•‘    â”‚
â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚
â”‚        â”‚                                                                   â”‚
â”‚        â”‚ Startup ì„±ê³µ âœ“                                                     â”‚
â”‚        â–¼                                                                   â”‚
â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚
â”‚   â•‘                    Startup Probe ì™„ë£Œ í›„                            â•‘    â”‚
â”‚   â•‘                                                                    â•‘    â”‚
â”‚   â•‘   â€¢ Liveness Probe: â–¶ï¸  í™œì„±í™” (ì£¼ê¸°ì  ì²´í¬ ì‹œì‘)                       â•‘    â”‚
â”‚   â•‘   â€¢ Readiness Probe: â–¶ï¸  í™œì„±í™” (ì£¼ê¸°ì  ì²´í¬ ì‹œì‘)                      â•‘    â”‚
â”‚   â•‘                                                                   â•‘     â”‚
â”‚   â•‘   â†’ ì´í›„ ì •ìƒì ì¸ í—¬ìŠ¤ ì²´í¬ ì§„í–‰                                         â•‘     â”‚
â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ê°€ì§€ Probe ë¹„êµ ìš”ì•½

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         3ê°€ì§€ Probe ë¹„êµ ìš”ì•½                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 â”‚  Startup Probe  â”‚ Readiness Probe â”‚   Liveness Probe      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‹¤í–‰ ì‹œì          â”‚ ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œ  â”‚ Startup ì´í›„    â”‚ Startup ì´í›„              â”‚
â”‚                 â”‚ (ìµœì´ˆ 1íšŒ)       â”‚ (ì§€ì†ì )        â”‚ (ì§€ì†ì )                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‹¤íŒ¨ ì‹œ ë™ì‘       â”‚ Pod ì¬ì‹œì‘       â”‚ Endpoint ì œê±°   â”‚ Pod ì¬ì‹œì‘               â”‚
â”‚                 â”‚ (Kill)          â”‚ (íŠ¸ë˜í”½ ì°¨ë‹¨)    â”‚ (Kill)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì£¼ìš” ëª©ì          â”‚ ëŠë¦° ì‹œì‘ í—ˆìš©    â”‚ íŠ¸ë˜í”½ ì œì–´     â”‚ ì¥ì•  ë³µêµ¬                    â”‚
â”‚                 â”‚                 â”‚                 â”‚                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ì‚¬ìš© ì˜ˆì‹œ         â”‚ â€¢ JVM ì›œì—…      â”‚ â€¢ DB ì—°ê²° ëŒ€ê¸°   â”‚ â€¢ ë°ë“œë½ ë³µêµ¬              â”‚
â”‚                 â”‚ â€¢ ëŒ€ìš©ëŸ‰ ìºì‹œ    â”‚ â€¢ ì´ˆê¸°í™” ì™„ë£Œ    â”‚ â€¢ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜               â”‚
â”‚                 â”‚   ë¡œë”©          â”‚ â€¢ ì˜ì¡´ì„± í™•ì¸    â”‚ â€¢ ë¬´í•œ ë£¨í”„                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Startup Probeê°€ í•„ìš”í•œ ìƒí™©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Startup Probe ì—†ì´ Livenessë§Œ ì‚¬ìš©í•  ë•Œì˜ ë¬¸ì œ                 â”‚
â”‚                                                                             â”‚
â”‚   ì‹œê°„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶       â”‚
â”‚                                                                             â”‚
â”‚   Container ì‹œì‘                                                             â”‚
â”‚        â”‚                                                                    â”‚
â”‚        â”‚    initialDelaySeconds = 30ì´ˆ                                       â”‚
â”‚        â”‚    â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                                     â”‚
â”‚        â”‚                               â”‚                                    â”‚
â”‚        â”‚   ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œì‘ ì¤‘...          â”‚   Liveness ì²´í¬ ì‹œì‘                 â”‚
â”‚        â”‚   (60ì´ˆ í•„ìš”)                   â”‚        â”‚                           â”‚
â”‚        â”‚                               â”‚        â–¼                           â”‚
â”‚        â”‚                               â”‚   âŒ ì‹¤íŒ¨ (ì•„ì§ ì´ˆê¸°í™” ì¤‘)              â”‚
â”‚        â”‚                               â”‚        â”‚                           â”‚
â”‚        â”‚                               â”‚        â–¼                           â”‚
â”‚        â”‚                               â”‚   ğŸ”„ ì¬ì‹œì‘ (ë¶ˆí•„ìš”í•œ ì¬ì‹œì‘!)           â”‚
â”‚        â”‚                               â”‚        â”‚                           â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â–¶ ë¬´í•œ ì¬ì‹œì‘ ë£¨í”„            â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  í•´ê²°ì±…: Startup Probe ì‚¬ìš©                                            â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚  â€¢ Startup Probeê°€ ì„±ê³µí•  ë•Œê¹Œì§€ Liveness Probe ë¹„í™œì„±í™”                  â”‚    â”‚
â”‚  â”‚  â€¢ ì¶©ë¶„í•œ ì‹œì‘ ì‹œê°„ í™•ë³´ (failureThreshold Ã— periodSeconds)              â”‚    â”‚
â”‚  â”‚  â€¢ ì‹œì‘ ì™„ë£Œ í›„ì—ë§Œ Liveness Probe í™œì„±í™”                                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7.1.4 ë§ê°€ëœ¨ë¦¬ê¸° StateëŠ” Runningì´ì§€ë§Œ...
Readiness probeì™€ Liveness probeë¥¼ ì˜ ì„¤ì •í•˜ë©´ ê°•ë ¥í•œ í˜œíƒì„ ë³¼ ìˆ˜ ìˆì§€ë§Œ ì˜ëª»ì„¤ì •í•˜ë©´ ë¬¸ì œê°€ ë©ë‹ˆë‹¤.  
ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¬¸ì œê°€ ì—†ëŠ”ë° íŠ¸ë˜í”½ì´ ë§‰íˆê²Œë©ë‹ˆë‹¤. ë˜í•œ, Liveness probeë¥¼ ì˜ëª»ì„¤ì •í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë¬¸ì œê°€ ì—†ëŠ”ë° ì»¨í…Œì´ë„ˆê°€ ê³„ì† Terminateë¥¼ ë°˜ë³µí•©ë‹ˆë‹¤.  

```bash
$ kubectl apply --filename deployment-destruction.yaml --namespace default
deployment.apps/hello-server created

$ kubectl get pod --namespace default
NAME                            READY   STATUS              RESTARTS   AGE
kubectl get pod --namespace default
NAME                            READY   STATUS              RESTARTS   AGE
hello-server-54577b6988-4j4r5   0/2     ContainerCreating   0          12s
hello-server-54577b6988-g6hj5   0/2     ContainerCreating   0          12s
hello-server-54577b6988-rjrzn   0/2     ContainerCreating   0          12s

// ì»¨í…Œì´ë„ˆì˜ STATUSê°€ Runningìœ¼ë¡œ ë¬¸ì œê°€ ì—†ì–´ ë³´ì´ì§€ë§Œ READYê°€ 1/2ì…ë‹ˆë‹¤.
//  ì ì‹œ ë’¤ ë‹¤ì‹œ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤. ë„ˆë¬´ ì˜¤ë˜ ê±¸ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.
$ kubectl get pod --namespace default
kubectl get pod --namespace default
NAME                            READY   STATUS              RESTARTS   AGE
hello-server-54577b6988-4j4r5   0/2     ContainerCreating   0          42s
hello-server-54577b6988-g6hj5   0/2     ContainerCreating   0          42s
hello-server-54577b6988-rjrzn   0/2     ContainerCreating   0          42s

// ì„ì˜ì˜ podì˜ ì´ë¦„ì„ í•˜ë‚˜ ë³µì‚¬í•˜ì—¬ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
$ kubectl describe pod hello-server-54577b6988-4j4r5 --namespace default
Name:             hello-server-54577b6988-4j4r5
Namespace:        default
Priority:         0
Service Account:  default
Node:             kind-control-plane/172.24.0.2
Start Time:       Thu, 11 Dec 2025 21:40:33 +0900
... ìƒëµ
Containers:
  hello-server:
    Container ID:   containerd://2252edef903c5a7058bc64f6c6ff0da2ba9b1ee287d03ba865134f799d5d9c5c
    Image:          blux2/hello-server:1.6
    Image ID:       docker.io/blux2/hello-server@sha256:035c114efa5478a148e5aedd4e2209bcc46a6d9eff3ef24e9dba9fa147a6568d
    Port:           8080/TCP
    Host Port:      0/TCP
    State:          Running
      Started:      Thu, 11 Dec 2025 21:40:39 +0900
    Ready:          False <------- (1)
... ìƒëµ
  busybox:
    Container ID:  containerd://538d82f209a04e49e97aad83e2790f5acaacf957b159bb31000f7fea3da09bca
    Image:         busybox:1.36.1
    Image ID:      docker.io/library/busybox@sha256:6b219909078e3fc93b81f83cb438bd7a5457984a01a478c76fe9777a8c67c39e
    Port:          <none>
    Host Port:     <none>
    Command:
      sleep
      9999
    State:          Running
      Started:      Thu, 11 Dec 2025 21:40:48 +0900
    Ready:          True <------- (2)
... ìƒëµ
Events:
  Type     Reason     Age                 From               Message
  ----     ------     ----                ----               -------
  Normal   Scheduled  2m14s               default-scheduler  Successfully assigned default/hello-server-54577b6988-4j4r5 to kind-control-plane
  Normal   Pulling    2m14s               kubelet            Pulling image "blux2/hello-server:1.6"
  Normal   Pulled     2m8s                kubelet            Successfully pulled image "blux2/hello-server:1.6" in 1.536s (6.091s including waiting). Image size: 3650825 bytes.
  Normal   Created    2m8s                kubelet            Created container: hello-server
  Normal   Started    2m8s                kubelet            Started container hello-server
  Normal   Pulling    2m8s                kubelet            Pulling image "busybox:1.36.1"
  Normal   Pulled     2m                  kubelet            Successfully pulled image "busybox:1.36.1" in 1.454s (8.074s including waiting). Image size: 1909538 bytes.
  Normal   Created    2m                  kubelet            Created container: busybox
  Normal   Started    119s                kubelet            Started container busybox
  Warning  Unhealthy  6s (x25 over 118s)  kubelet            Readiness probe failed: Get "http://10.244.0.44:8081/health": dial tcp 10.244.0.44:8081: connect: connection refused <----- (3)
```
(1) hello-server State: Running, Ready: False
(2) busyboxëŠ” State: Running, Ready: True
(3) Readiness probeê°€ ì‹¤íŒ¨í•˜ê³  ìˆë‹¤ê³  ì¶œë ¥ë˜ê³  ìˆìŠµë‹ˆë‹¤.

ì¦‰ (1) hello-serverì—ì„œ ì‹¤íŒ¨í•˜ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ì œ Readiness probeì˜ ì„¤ì • ë‚´ìš©ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello-server
  labels:
    app: hello-server
spec:
  replicas: 3
  selector:
    matchLabels:
      app: hello-server
  template:
    metadata:
      labels:
        app: hello-server
    spec:
      containers:
      - name: hello-server
        image: blux2/hello-server:1.6
        ports:
        - containerPort: 8080 <-- (1)
        readinessProbe:
          httpGet:
            path: /health
            port: 8081 <-- (2)
          initialDelaySeconds: 5
          periodSeconds: 5
        livenessProbe:
          httpGet:
            path: /health
            port: 8080 <-- (3)
          initialDelaySeconds: 10
          periodSeconds: 5
      - name: busybox
        image: busybox:1.36.1
        command:
        - sleep
        - "9999"
```

(1) ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ì™€ (2)ì˜ í¬íŠ¸ê°€ ë‹¤ë¥¸ ê²ƒë§Œìœ¼ë¡œëŠ” ë¬¸ì œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  
ê·¸ëŸ°ë° (3)ì˜ í¬íŠ¸ì™€ ì»¨í…Œì´ë„ˆì˜ í¬íŠ¸ëŠ” ë™ì¼í•œë° (2)ì˜ í¬íŠ¸ë§Œ ë‹¤ë¥¸ê²ƒì´ ìˆ˜ìƒí•©ë‹ˆë‹¤.

```bash
$ kubectl logs hello-server-54577b6988-4j4r5 --namespace default
Defaulted container "hello-server" out of: hello-server, busybox
2025/12/11 12:40:39 Starting server on port 8080
2025/12/11 12:40:53 Health Status OK
2025/12/11 12:40:58 Health Status OK
...
```

(3)ì¸ Liveness probeì˜ ë™ì‘ì€ ì •ìƒìœ¼ë¡œ í™•ì¸ì´ ë©ë‹ˆë‹¤. ë”°ë¼ì„œ Readiness probeì˜ í¬íŠ¸ ë²ˆí˜¸ê°€ ì˜ëª»ë˜ì—ˆì„ ê°€ëŠ¥ì„±ì´ ë†’ì•„ ë³´ì…ë‹ˆë‹¤.

helloì„œë²„ì˜ êµ¬í˜„ì½”ë“œë¥¼ ì‚´í´ë³´ë©´, í™˜ê²½ ë³€ìˆ˜ PORTê°€ ì„¤ì •ë˜ì–´ ìˆìœ¼ë©´ ì„¤ì •ëœ ê°’ì„ ì‚¬ìš©í•˜ê³ , ì„¤ì •ë˜ì–´ ìˆì§€ ì•Šìœ¼ë©´ 8080ë²ˆì„ ì‚¬ìš©í•˜ë„ë¡ ë˜ì–´ìˆìŠµë‹ˆë‹¤.
```go
port := os.Getenv("PORT")
if port == "" {
    port = "8080"
}
```
ìœ„ ë§¤ë‹ˆíŒ¨ìŠ¤íŠ¸ì—ì„œëŠ” í™˜ê²½ ë³€ìˆ˜ë¡œ PORTë¥¼ ì§€ì •í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í¬íŠ¸ë²ˆí˜¸ëŠ” 8080ì…ë‹ˆë‹¤.  
Readiness probeì—ì„œ ì§€ì •í•œ í¬íŠ¸ë²ˆí˜¸ 8081ì´ ì˜ëª»ëœ ê²ƒìœ¼ë¡œ íŒë‹¨í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
8081ì„ 8080ìœ¼ë¡œ ìˆ˜ì •í•œë’¤ ë‹¤ì‹œ ì‹¤í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.

```bash
$ kubectl edit deployment --namespace default
deployment.apps/hello-server edited

$ kubectl get pod --namespace default
NAME                            READY   STATUS    RESTARTS   AGE
hello-server-5fd8bd6855-gw4g4   2/2     Running   0          92s
hello-server-5fd8bd6855-przn9   2/2     Running   0          85s
hello-server-5fd8bd6855-zmxcj   2/2     Running   0          99s

$ kubectl delete --filename deployment-destruction.yaml --namespace default
deployment.apps "hello-server" deleted from default namespace
```
ì •ìƒì‘ë™í•©ë‹ˆë‹¤.

# 7.2 ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ì ˆí•œ ë¦¬ì†ŒìŠ¤ ì§€ì •í•˜ê¸°
ì•ˆì „í•œ ìš´ì˜ì„ ìœ„í•´ì„œëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì— ì ì ˆí•œ ë¦¬ì†ŒìŠ¤ë¥¼ ì§€ì •í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.  
ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” ë¦¬ì†ŒìŠ¤ ì§€ì •ì— ë”°ë¼ ìŠ¤ì¼€ì¤„ë§ì´ ë‹¬ë¼ì§€ê¸° ë•Œë¬¸ì— ë°˜ë“œì‹œ ëª…ì‹œì ìœ¼ë¡œ ì§€ì •í•´ì•¼ í•©ë‹ˆë‹¤.  
ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì…ë‹ˆë‹¤.

```yaml
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: hello-server
  name: hello-server
spec:
  containers:
  - name: hello-server
    image: blux2/hello-server:1.6
    resources:
      requests:
        memory: "64Mi"
        cpu: "10m"
      limits:
        memory: "64Mi"
        cpu: "10m"
```

## 7.2.1 Resource requestsë¡œ ì»¨í…Œì´ë„ˆì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ìš”êµ¬í•˜ê¸°
í™•ë³´í•˜ê³  ì‹¶ì€ ë¦¬ì†ŒìŠ¤ì˜ ìµœì†Œ ì‚¬ìš©ëŸ‰ì„ ì§€ì •í•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ì˜ ìŠ¤ì¼€ì¤„ëŸ¬ëŠ” ì´ ê°’ì„ ë³´ê³  ìŠ¤ì¼€ì¤„ë§í•  ë…¸ë“œë¥¼ ê²°ì •í•©ë‹ˆë‹¤.
 requestsë¡œ ì§€ì •í•œ ê°’ì„ í™•ë³´í•  ìˆ˜ ìˆëŠ” ë…¸ë“œë¥¼ ì°¾ì•„ ìŠ¤ì¼€ì¤„ë§í•˜ëŠ”ë° ê·¸ëŸ¬í•œ ë…¸ë“œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìœ¼ë©´ podëŠ” ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
 ì»¨í…Œì´ë„ˆë³„ë¡œ CPUì™€ ë©”ëª¨ë¦¬ì˜ requestsë¥¼ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```yaml
...
spec:
  containers:
    - name: hello-server
      image: blux2/hello-server:1.6
      resources:
        requests:
          memory: "64Mi"
          cpu: "10m"
...
```

## 7.2.2 Resource limitsë¡œ ì»¨í…Œì´ë„ˆì˜ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ ì œì–´í•˜ê¸°  
ì»¨í…Œì´ë„ˆê°€ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰ì˜ ìƒí•œì„ ì§€ì •í•©ë‹ˆë‹¤. ì»¨í…Œì´ë„ˆëŠ” ì´ limitsë¥¼ ì´ˆê³¼í•˜ì—¬ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. 
ë©”ëª¨ë¦¬ê°€ ìƒí•œê°’ì„ ì´ˆê³¼í•˜ëŠ” ê²½ìš°, Out Of Memory(OOM)ë¡œ podê°€ ì¢…ë£Œë©ë‹ˆë‹¤.  
CPUê°€ ìƒí•œê°’ì„ ì´ˆê³¼í•œ ê²½ìš°ì—ëŠ” podê°€ ë°”ë¡œ ì¢…ë£Œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  
ëŒ€ì‹  ìŠ¤ë¡œí‹€ë§ì´ ë°œìƒí•˜ì—¬ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë™ì‘ì´ ëŠë ¤ì§‘ë‹ˆë‹¤.

```yaml
...
spec:
  containers:
    - name: hello-server
      image: blux2/hello-server:1.6
      resources:
        limits:
          memory: "64Mi"
          cpu: "10m"
...
```

## 7.2.3 ë¦¬ì†ŒìŠ¤ì˜ ë‹¨ìœ„
* ë©”ëª¨ë¦¬
ë‹¨ìœ„ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ 1byteì…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ê¸°ë³¸ì ì¸ ë‹¨ìœ„ë¡œ K(í‚¬ë¡œ), M(ë©”ê°€) ë“±ì„ ë¶™ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* CPU
ë‹¨ìœ„ë¥¼ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ 1ì€ 1ì½”ì–´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¨ìœ„ë¥¼ ì§€ì •í•œ 1m = 0.001ì½”ì–´ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤.

## 7.2.4 podì˜ Quality of Service(QoS) í´ë˜ìŠ¤
OOM Killerë€ ë…¸ë“œì˜ ë©”ëª¨ë¦¬ê°€ ì „ë¶€ ì†Œì§„ë˜ì—ˆì„ ë•Œ í•´ë‹¹ ë…¸ë“œì— ìˆëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ë©ˆì¶° ë²„ë¦¬ëŠ” ê²ƒì„ ë°©ì§€í•˜ê¸° ìœ„í•œ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤.
OOM KillerëŠ” QoSì— ë”°ë¼ podì˜ ìš°ì„ ìˆœìœ„ë¥¼ ì •í•˜ê³  ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ podë¶€í„° OOM Killì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.

### QoS í´ë˜ìŠ¤ì˜ ì¢…ë¥˜

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë¦¬ì†ŒìŠ¤ ì„¤ì •ì— ë”°ë¼ ìë™ìœ¼ë¡œ Podì— QoS í´ë˜ìŠ¤ë¥¼ í• ë‹¹í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         QoS í´ë˜ìŠ¤ ìš°ì„ ìˆœìœ„                                     â”‚
â”‚                                                                             â”‚
â”‚   ë†’ìŒ â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ìš°ì„ ìˆœìœ„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ ë‚®ìŒ                     â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚   â”‚ Guaranteed  â”‚      â”‚  Burstable  â”‚      â”‚ BestEffort  â”‚                 â”‚
â”‚   â”‚             â”‚      â”‚             â”‚      â”‚             â”‚                 â”‚
â”‚   â”‚  ê°€ì¥ ë§ˆì§€ë§‰ì— â”‚      â”‚  ë‘ ë²ˆì§¸ë¡œ   â”‚      â”‚  ê°€ì¥ ë¨¼ì €   â”‚                    â”‚
â”‚   â”‚  OOM Kill   â”‚      â”‚  OOM Kill   â”‚      â”‚  OOM Kill   â”‚                 â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1. Guaranteed (ë³´ì¥ë¨)
podì˜ ëª¨ë“  ì»¨í…Œì´ë„ˆì— ëŒ€í•´ ë¦¬ì†ŒìŠ¤ì˜ requestsì™€ limitê°€ ì§€ì •ë˜ì–´ ìˆê³ , ë©”ëª¨ë¦¬ì™€ CPU ì „ë¶€ requests=limitsì¸ ê²½ìš°ë¡œ, 
ê°€ì¥ ë†’ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ë©°, OOM Kill ëŒ€ìƒì—ì„œ ê°€ì¥ ë§ˆì§€ë§‰ì— ì„ íƒë©ë‹ˆë‹¤.

**ì¡°ê±´:**
- ëª¨ë“  ì»¨í…Œì´ë„ˆì— CPUì™€ ë©”ëª¨ë¦¬ì˜ requestsì™€ limitsê°€ ì„¤ì •ë˜ì–´ ìˆì–´ì•¼ í•¨
- requestsì™€ limits ê°’ì´ ë™ì¼í•´ì•¼ í•¨

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: guaranteed-pod
spec:
  containers:
  - name: app
    image: nginx
    resources:
      requests:
        memory: "128Mi"
        cpu: "500m"
      limits:
        memory: "128Mi"    # requestsì™€ ë™ì¼
        cpu: "500m"        # requestsì™€ ë™ì¼
```

### 2. Burstable (ë²„ìŠ¤íŠ¸ ê°€ëŠ¥)
podì˜ ì»¨í…Œì´ë„ˆ ì¤‘ ì ì–´ë„ í•˜ë‚˜ëŠ” ë©”ëª¨ë¦¬ ë˜ëŠ” CPUì˜ requestsì™€ limitsê°€ ì§€ì •ë˜ì–´ìˆëŠ” ê²½ìš°ë¡œ, 
ì¤‘ê°„ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§‘ë‹ˆë‹¤. requestsë³´ë‹¤ ë” ë§ì€ ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆì§€ë§Œ, limitsë¥¼ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**ì¡°ê±´:**
- Guaranteed ì¡°ê±´ì„ ì¶©ì¡±í•˜ì§€ ì•ŠìŒ
- ìµœì†Œ í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆì— CPU ë˜ëŠ” ë©”ëª¨ë¦¬ì˜ requestsë‚˜ limitsê°€ ì„¤ì •ë˜ì–´ ìˆìŒ

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: burstable-pod
spec:
  containers:
  - name: app
    image: nginx
    resources:
      requests:
        memory: "64Mi"
        cpu: "250m"
      limits:
        memory: "128Mi"    # requestsë³´ë‹¤ ë†’ìŒ
        cpu: "500m"        # requestsë³´ë‹¤ ë†’ìŒ
```

### 3. BestEffort (ìµœì„  ë…¸ë ¥)
Guaranteedë‚˜ Burstableì´ ì•„ë‹Œê²ƒì„ ì˜ë¯¸í•˜ê³  ë¦¬ì†ŒìŠ¤ì— ì•„ë¬´ê²ƒë„ ì§€ì •ë˜ì–´ ìˆì§€ ì•Šì€ ê²½ìš°ë¡œ, 
ê°€ì¥ ë‚®ì€ ìš°ì„ ìˆœìœ„ë¥¼ ê°€ì§€ë©°, OOM Kill ëŒ€ìƒì—ì„œ ê°€ì¥ ë¨¼ì € ì„ íƒë©ë‹ˆë‹¤.

**ì¡°ê±´:**
- ì–´ë–¤ ì»¨í…Œì´ë„ˆì—ë„ CPUë‚˜ ë©”ëª¨ë¦¬ì˜ requests/limitsê°€ ì„¤ì •ë˜ì–´ ìˆì§€ ì•ŠìŒ

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: besteffort-pod
spec:
  containers:
  - name: app
    image: nginx
    # resources ì„¤ì • ì—†ìŒ
```

### QoS í´ë˜ìŠ¤ ê²°ì • íë¦„ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          QoS í´ë˜ìŠ¤ ê²°ì • íë¦„                                   â”‚
â”‚                                                                             â”‚
â”‚   Pod ìƒì„±                                                                   â”‚
â”‚      â”‚                                                                      â”‚
â”‚      â–¼                                                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚   â”‚ ëª¨ë“  ì»¨í…Œì´ë„ˆì— requestsì™€ limitsê°€           â”‚                              â”‚
â”‚   â”‚ ì„¤ì •ë˜ì–´ ìˆê³ , ê°’ì´ ë™ì¼í•œê°€?                   â”‚                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                      â”‚                                                      â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚          â”‚                       â”‚                                          â”‚
â”‚        Yes                      No                                          â”‚
â”‚          â”‚                       â”‚                                          â”‚
â”‚          â–¼                       â–¼                                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ Guaranteed  â”‚    â”‚ ìµœì†Œ í•˜ë‚˜ì˜ ì»¨í…Œì´ë„ˆì—                 â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ requests ë˜ëŠ” limitsê°€ ì„¤ì •ë˜ì–´ ìˆëŠ”ê°€?â”‚                   â”‚
â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                         â”‚                                   â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚                          â”‚                             â”‚                    â”‚
â”‚                        Yes                            No                    â”‚
â”‚                          â”‚                             â”‚                    â”‚
â”‚                          â–¼                             â–¼                    â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                   â”‚  Burstable  â”‚               â”‚ BestEffort  â”‚             â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### QoS í´ë˜ìŠ¤ í™•ì¸ ë°©ë²•

```bash
# Podì˜ QoS í´ë˜ìŠ¤ í™•ì¸
$ kubectl get pod <pod-name> -o jsonpath='{.status.qosClass}'

# ë˜ëŠ” describeë¡œ í™•ì¸
$ kubectl describe pod <pod-name> | grep "QoS Class"
```

### QoS í´ë˜ìŠ¤ë³„ OOM Kill ë™ì‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ë…¸ë“œ ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ OOM Kill ìˆœì„œ                            â”‚
â”‚                                                                             â”‚
â”‚   ë…¸ë“œ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰: 100% (ë¶€ì¡±!)                                               â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                          OOM Kill ìˆœì„œ                               â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚  1ìˆœìœ„    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚   â”‚
â”‚   â”‚  (ë¨¼ì €)   â”‚ BestEffort  â”‚  â†’ ë¦¬ì†ŒìŠ¤ ì„¤ì • ì—†ìŒ, ê°€ì¥ ë¨¼ì € ì¢…ë£Œ               â”‚   â”‚
â”‚   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚   â”‚
â”‚   â”‚              â”‚                                                      â”‚   â”‚
â”‚   â”‚              â–¼  ë©”ëª¨ë¦¬ ì—¬ì „íˆ ë¶€ì¡±í•˜ë©´                                   â”‚   â”‚
â”‚   â”‚  2ìˆœìœ„    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚   â”‚
â”‚   â”‚          â”‚  Burstable  â”‚  â†’ requests ì´ˆê³¼ ì‚¬ìš©ëŸ‰ì´ í° Podë¶€í„° ì¢…ë£Œ        â”‚   â”‚
â”‚   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚   â”‚
â”‚   â”‚              â”‚                                                      â”‚   â”‚
â”‚   â”‚              â–¼  ë©”ëª¨ë¦¬ ì—¬ì „íˆ ë¶€ì¡±í•˜ë©´                                    â”‚   â”‚
â”‚   â”‚  3ìˆœìœ„    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                            â”‚   â”‚
â”‚   â”‚  (ë§ˆì§€ë§‰) â”‚ Guaranteed  â”‚  â†’ ìµœí›„ì˜ ìˆ˜ë‹¨ìœ¼ë¡œë§Œ ì¢…ë£Œ                        â”‚   â”‚
â”‚   â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                            â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### QoS í´ë˜ìŠ¤ ì„ íƒ ê°€ì´ë“œ

| ì›Œí¬ë¡œë“œ ìœ í˜• | ê¶Œì¥ QoS | ì´ìœ  |
|-------------|----------|------|
| **í”„ë¡œë•ì…˜ í•µì‹¬ ì„œë¹„ìŠ¤** | Guaranteed | ì•ˆì •ì„±ì´ ê°€ì¥ ì¤‘ìš”, OOM Kill ë°©ì§€ |
| **ì¼ë°˜ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜** | Burstable | íŠ¸ë˜í”½ ë³€ë™ì— ìœ ì—°í•˜ê²Œ ëŒ€ì‘ |
| **ë°°ì¹˜ ì‘ì—…, ê°œë°œ/í…ŒìŠ¤íŠ¸** | BestEffort | ë¦¬ì†ŒìŠ¤ íš¨ìœ¨ì„± ìš°ì„ , ì¢…ë£Œë˜ì–´ë„ ë¬´ë°© |

### ì£¼ì˜ì‚¬í•­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           âš ï¸ QoS ì„¤ì • ì‹œ ì£¼ì˜ì‚¬í•­                               â”‚
â”‚                                                                             â”‚
â”‚  1. limitsë§Œ ì„¤ì •í•˜ë©´ requestsëŠ” ìë™ìœ¼ë¡œ limitsì™€ ë™ì¼í•˜ê²Œ ì„¤ì •ë¨                    â”‚
â”‚     â†’ limitsë§Œ ì„¤ì •í•´ë„ Guaranteedê°€ ë  ìˆ˜ ìˆìŒ                                   â”‚
â”‚                                                                             â”‚
â”‚  2. BestEffort PodëŠ” ë…¸ë“œì˜ ì—¬ìœ  ë¦¬ì†ŒìŠ¤ë¥¼ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆìŒ                         â”‚
â”‚     â†’ ë‹¤ë¥¸ Podì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ í”„ë¡œë•ì…˜ì—ì„œëŠ” ê¶Œì¥í•˜ì§€ ì•ŠìŒ                       â”‚
â”‚                                                                             â”‚
â”‚  3. Burstable Pod ê°„ì˜ OOM Kill ìˆœì„œëŠ” requests ëŒ€ë¹„ ì‹¤ì œ ì‚¬ìš©ëŸ‰ ë¹„ìœ¨ë¡œ ê²°ì •         â”‚
â”‚     â†’ requestsë¥¼ ì´ˆê³¼í•œ ë¹„ìœ¨ì´ ë†’ì„ìˆ˜ë¡ ë¨¼ì € ì¢…ë£Œë¨                                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7.2.5 ë§ê°€ëœ¨ë¦¬ê¸° ë˜ podê°€ ê³ ì¥ë‚¬ë‹¤
ë¦¬ì†ŒìŠ¤ ì„¤ì •ìœ¼ë¡œ ì¸í•´ podê°€ ë™ì‘í•˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìì£¼ ìˆìŠµë‹ˆë‹¤.  
ìš´ì˜ì—ì„œ ë¹ ë¥´ê²Œ ì›ì¸ì„ íŒŒì•…í•  . ìˆëŠ” ëª‡ ê°€ì§€ íŒ¨í„´ì„ ì¬í˜„í•´ë³´ê² ìŠµë‹ˆë‹¤.

```bash
$ kubectl apply --filename deployment-resource-handson.yaml --namespace default
deployment.apps/hello-server configured

// ì•„ë¬´ë¦¬ ê¸°ë‹¤ë ¤ë´ë„ podê°€ ì „ë¶€ ì‘ë™í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.
$ kubectl get pod --namespace default
NAME                            READY   STATUS             RESTARTS   AGE
hello-server-54577b6988-4wzx8   0/1     Pending   0          15h
hello-server-54577b6988-7p94h   0/1     Pending   0          15h
hello-server-54577b6988-nnkq5   0/1     Pending   0          15h

// podì˜ ìƒì„¸ ì •ë³´ë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.
$ kubectl describe pod hello-server-54577b6988-4wzx8 --namespace default
Name: hello-server-54577b6988-4wzx8
... ìƒëµ
Warning FailedScheduling  15h (x4 over 15h)  default-scheduler  0/1 nodes are available: 1 Insufficient memory. preemption: 0/1 nodes are available: 1 No preemption victims found for incoming pod.. <-- (1)

// (1) FailedSchedulingì´ë¼ê³  ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤. ìš”êµ¬í•œ ë©”ëª¨ë¦¬ ì–‘ì„ í• ë‹¹í•  . ìˆëŠ” ë…¸ë“œê°€ ì—†ë‹¤ëŠ” ë©”ì‹œì§€ì…ë‹ˆë‹¤.
// ë…¸ë“œ ì„¤ì •ì„ í™•ì¸í•´ë´…ë‹ˆë‹¤.
$ kubectl describe node --namespace default
Name: kind-control-plane
... ìƒëµ
Capacity: 
    cpu:                4
    memory:             8040056Ki
... ìƒëµ
Non-terminated Pods:         (8 in total)
  Namespace                  Name                                        CPU Requests  CPU Limits  Memory Requests  Memory Limits
  ---------                  ----                                        ------------  ----------  ---------------  -------------
  default                    hello-server-54577b6988-4wzx8              500m (12%)    10m (0%)   2Gi (12%)        5Gi (65%) <-- (2)
  kube-system                coredns-558bd4d5db-5k9s4                   100m (2%)     0 (0%)       70Mi (0%)       170Mi (2%)
  
// ì‹¤ìŠµì— ì‚¬ìš©ì¤‘ì¸ kind í´ëŸ¬ìŠ¤í„°ì—ëŠ” í•˜ë‚˜ì˜ ë…¸ë“œì— ì»¨íŠ¸ë¡¤ í”Œë ˆì¸ë„ í¬í•¨í•˜ê³  ìˆì–´ì„œ kube-apiserver ë“±ì´ ê°™ì€ ë…¸ë“œì—ì„œ ëŒê³ ìˆìŠµë‹ˆë‹¤.
// (2) í•˜ë‚˜ê°€ ì „ì²´ ë©”ëª¨ë¦¬ì˜ 65%ë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŒ€ë¡œëŠ” ë‚˜ë¨¸ì§€ ë‘ê°œì˜ podë¥¼ ì‹¤í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
// ë‹¤ìŒ ëª…ë ¹ìœ¼ë¡œ Deploymentì— ì§€ì •í•œ ë©”ëª¨ë¦¬ì˜ í¬ê¸°ë¥¼ í™•ì¸í•˜ê² ìŠµë‹ˆë‹¤.
$ kubectl get deployment hello-server -o=jsonpath='{.spec.template.spec.containers[0].resources.requests}' --namespace default
{"cpu":"10m", "memory":"5Gi"}

// ì ì ˆí•œ ë¦¬ì†ŒìŠ¤ ìš”ì²­ê°’ì€ ì‹¤ì œ ì‚¬ìš©ëŸ‰ì´ë‚˜ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë“±ì„ ê¸°ë°˜ìœ¼ë¡œ ì¡°ìœ¨í•´ì•¼í•˜ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ë‹¨ìˆœ ë©”ëª¨ë¦¬ì˜ requestsì™€ limitsë¥¼ 63Mië¡œ ë³€ê²½í•˜ì—¬ í•´ê²°í•˜ì˜€ìŠµë‹ˆë‹¤.
$ kubectl edit deployment hello-server --namespace default
medata.resources.limits.memory, medata.resources.requests.memoryì˜ ê°’ì„ 64Mië¡œ ìˆ˜ì •
deployment.apps/hello-server edited

$ kubectl get deployment hello-server -o=jsonpath='{.spec.template.spec.containers[0].resources.requests}' --namespace default
{"cpu":"10m", "memory":"64Mi"}

// ì •ìƒ ë™ì‘
$ kubectl get pod --namespace default
NAME                            READY   STATUS             RESTARTS   AGE
hello-server-54577b6988-4wzx8   1/1     Running   0          8s
hello-server-54577b6988-7p94h   1/1     Running   0          8s
hello-server-54577b6988-nnkq5   1/1     Running   0          8s

// ì‹¤ìŠµ ì •ë¦¬
$ kubectl delete --filename deployment-resource-handson.yaml --namespace default
```

ì´ë²ˆì—ëŠ” ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë°œìƒì‹œì¼œ OOMì„ ë°œìƒì‹œì¼œ ë³´ê² ìŠµë‹ˆë‹¤.
```bash
$ kubectl apply --filename deployment-memory-leak.yaml --namespace default
deployment.apps/memory-leak created

// podê°€ Runningì¸ì§€ í™•ì¸í•©ë‹ˆë‹¤.
$ kubectl get pod --namespace default
NAME                           READY   STATUS    RESTARTS   AGE
memory-leak-7c9f4b6c7b-xtj8k  1/1     Running   0          10s
memory-leak-asdaq4b6ca-xtg23  1/1     Running   0          10s
memory-leak-aaabq211aq-ag12t  1/1     Running   0          10s

// ë‹¤ìŒìœ¼ë¡œ port-forwardë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
$ kubectl port-forward hello-server 8080:8080 --namespace default

// ë³„ë„ì˜ í„°ë¯¸ë„ì„ ì—½ë‹ˆë‹¤.
$ curl localhost:8080

// ê¸°ë‹¤ë ¤ë„ ê²°ê³¼ê°€ ë°˜í™˜ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
// 15ì´ˆ ì •ë„ ì§€ë‚˜ë©´ OOMKilledê°€ í‘œì‹œë©ë‹ˆë‹¤.
$ kubectl get pod --watch --namespace default
NAME                           READY   STATUS             RESTARTS   AGE
memory-leak-7c9f4b6c7b-xtj8k  1/1     Running             0          10s
memory-leak-asdaq4b6ca-xtg23  1/1     Running             0          10s
memory-leak-aaabq211aq-ag12t  1/1     Running             0          10s
memory-leak-aaabq211aq-bh23q  0/1     OOMKilled           0          10s

// OOMKilledê°€ ë°œìƒí•œ podì˜ ì´ë¦„ì„ ë³µì‚¬í•˜ì—¬ ë‚´ìš©ì„ ì‚´í´ë´…ë‹ˆë‹¤.
$ kubectl describe pod memory-leak-aaabq211aq-bh23q --namespace default
Name:         memory-leak-aaabq211aq-bh23q
... ìƒëµ
Events:
  Type     Reason     Age                From               Message
  ----     ------     ----               ----               -------
  Normal   Scheduled  2m10s              default-scheduler  Successfully assigned default/memory-leak-aaabq211aq-bh23q to kind-control-plane
  Normal   Pulled     2m5s               kubelet            Successfully pulled image "blux2/memory-leak:1.0" in 1.234s (3.456s including waiting). Image size: 1234567 bytes.
  Normal   Created    2m4s               kubelet            Created container memory-leak
  Normal   Started    2m4s               kubelet            Started container memory-leak

// Eventsì— ì¶œë ¥ëœ ë‚´ìš©ìœ¼ë¡œëŠ” OOMKilledë˜ì—ˆëŠ”ì§€ ì—¬ë¶€ë¥¼ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. Readiness probeì™€ Liveness probeê°€ ì„¤ì •ë˜ì–´ ìˆì–´ì„œ 'íƒ€ì„ì•„ì›ƒ'ì´ë¼ê³ ë§Œ í‘œì‹œë˜ì–´ ì •í™•í•œ ì´ìœ ë¥¼ ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
// ì´ë•Œ í™•ì¸í•´ì•¼í•˜ëŠ” ê²ƒì´ Last Stateì™€ Reasonì…ë‹ˆë‹¤. JSON í˜•ì‹ìœ¼ë¡œ ë°˜í™˜ë˜ê¸° ë•Œë¬¸ì—, jqë¥¼ ì„¤ì¹˜í•˜ë©´ ë” ì‰½ê²Œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
$ kubectl get pod memory-leak-aaabq211aq-bh23q -output=jsonpath="{.status.containerStatuses[0].lastState}" --namespace default | jq .
{
  "terminated": {
    "exitCode": 137,
    "reason": "OOMKilled",
    "startedAt": "2025-12-11T12:45:10Z",
    "finishedAt": "2025-12-11T12:45:25Z",
    "containerID": "containerd://abcdef1234567890abcdef1234567890abcdef1234567890abcdef1234567890"
  }
}

// íƒ€ì´ë°ì— ë”°ë¼ ì•„ë¬´ê²ƒë„ ì¶œë ¥ë˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
// lastStateê°€ terminatedì´ê³  reasonì— OOMKilledë¼ê³  ì¶œë ¥ë˜ì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ì´ë¯¸ì§€ íƒœê·¸ë¥¼ ë‚®ì€ ë²„ì „ì¸ 1.8ë¡œ ì—…ë°ì´íŠ¸í•˜ë©´ í•´ê²°ë©ë‹ˆë‹¤.
$ kubectl delete --filename deployment-memory-leak.yaml --namespace default
```

## 7.3 pod ìŠ¤ì¼€ì¤„ë§ì˜ í¸ë¦¬í•œ ê¸°ëŠ¥ ì´í•´í•˜ê¸°
### 7.3.1 Node selectorë¡œ ë…¸ë“œ ì§€ì •í•˜ê¸°
Node selectorëŠ” íŠ¹ì • ë…¸ë“œì—ë§Œ ìŠ¤ì¼€ì¤„ë§í•˜ê¸° ìœ„í•´ ì‚¬ìš©í•©ë‹ˆë‹¤. ë…¸ë“œì— ì„¤ì •ëœ ë ˆì´ë¸”ì„ ë°”íƒ•ìœ¼ë¡œ ì œì–´ë©ë‹ˆë‹¤.
Node selectorëŠ” Podë¥¼ íŠ¹ì • ë ˆì´ë¸”ì„ ê°€ì§„ ë…¸ë“œì—ë§Œ ìŠ¤ì¼€ì¤„ë§í•˜ë„ë¡ ì§€ì •í•˜ëŠ” ê°€ì¥ ê°„ë‹¨í•œ ë°©ë²•ì…ë‹ˆë‹¤.  
ë…¸ë“œì— ë ˆì´ë¸”ì„ ë¶€ì—¬í•˜ê³ , Podì˜ nodeSelector í•„ë“œì—ì„œ í•´ë‹¹ ë ˆì´ë¸”ì„ ì§€ì •í•˜ë©´ ë©ë‹ˆë‹¤.
### Node Selectorì˜ ë™ì‘ ì›ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Node Selector ë™ì‘ ì›ë¦¬                              â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                           Kubernetes Cluster                        â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚    Pod ìƒì„± ìš”ì²­                                                      â”‚   â”‚
â”‚   â”‚    nodeSelector:                                                    â”‚   â”‚
â”‚   â”‚      disktype: ssd                                                  â”‚   â”‚
â”‚   â”‚         â”‚                                                           â”‚   â”‚
â”‚   â”‚         â–¼                                                           â”‚   â”‚
â”‚   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                 â”‚   â”‚
â”‚   â”‚    â”‚  Scheduler   â”‚                                                 â”‚   â”‚
â”‚   â”‚    â”‚              â”‚                                                 â”‚   â”‚
â”‚   â”‚    â”‚ "disktype:   â”‚                                                 â”‚   â”‚
â”‚   â”‚    â”‚  ssd ë ˆì´ë¸”ì´ â”‚                                                  â”‚   â”‚
â”‚   â”‚    â”‚  ìˆëŠ” ë…¸ë“œ    â”‚                                                  â”‚   â”‚
â”‚   â”‚    â”‚  ì°¾ê¸°"        â”‚                                                 â”‚   â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                 â”‚   â”‚
â”‚   â”‚           â”‚                                                         â”‚   â”‚
â”‚   â”‚           â–¼                                                         â”‚   â”‚
â”‚   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚   â”‚
â”‚   â”‚    â”‚                    ë…¸ë“œ ê²€ìƒ‰                               â”‚     â”‚   â”‚
â”‚   â”‚    â”‚                                                          â”‚     â”‚   â”‚
â”‚   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚     â”‚   â”‚
â”‚   â”‚    â”‚  â”‚   Node 1    â”‚  â”‚   Node 2    â”‚  â”‚   Node 3    â”‚       â”‚     â”‚   â”‚
â”‚   â”‚    â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚       â”‚     â”‚   â”‚
â”‚   â”‚    â”‚  â”‚ disktype:   â”‚  â”‚ disktype:   â”‚  â”‚ (ë ˆì´ë¸” ì—†ìŒ)  â”‚       â”‚     â”‚   â”‚
â”‚   â”‚    â”‚  â”‚   ssd âœ“     â”‚  â”‚   hdd âœ—     â”‚  â”‚     âœ—       â”‚       â”‚     â”‚   â”‚
â”‚   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚     â”‚   â”‚
â”‚   â”‚    â”‚         â”‚                                                â”‚     â”‚   â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚   â”‚
â”‚   â”‚              â”‚                                                      â”‚   â”‚
â”‚   â”‚              â–¼                                                      â”‚   â”‚
â”‚   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚   â”‚
â”‚   â”‚    â”‚     Node 1      â”‚                                              â”‚   â”‚
â”‚   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                                              â”‚   â”‚
â”‚   â”‚    â”‚  â”‚    Pod    â”‚  â”‚  â† Podê°€ Node 1ì— ìŠ¤ì¼€ì¤„ë§ë¨                     â”‚   â”‚
â”‚   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                              â”‚   â”‚
â”‚   â”‚    â”‚  disktype: ssd  â”‚                                              â”‚   â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Node Selector ì‚¬ìš© ë°©ë²•

**1ë‹¨ê³„: ë…¸ë“œì— ë ˆì´ë¸” ì¶”ê°€**

```bash
# ë…¸ë“œ ëª©ë¡ í™•ì¸
$ kubectl get nodes
NAME                 STATUS   ROLES           AGE   VERSION
kind-control-plane   Ready    control-plane   10d   v1.27.3

# ë…¸ë“œì— ë ˆì´ë¸” ì¶”ê°€
$ kubectl label nodes kind-control-plane disktype=ssd
node/kind-control-plane labeled

# ë ˆì´ë¸” í™•ì¸
$ kubectl get nodes --show-labels
NAME                 STATUS   ROLES           AGE   VERSION   LABELS
kind-control-plane   Ready    control-plane   10d   v1.27.3   disktype=ssd,...

# íŠ¹ì • ë ˆì´ë¸”ë¡œ ë…¸ë“œ í•„í„°ë§
$ kubectl get nodes -l disktype=ssd
NAME                 STATUS   ROLES           AGE   VERSION
kind-control-plane   Ready    control-plane   10d   v1.27.3
```

**2ë‹¨ê³„: Podì— nodeSelector ì§€ì •**

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx-ssd
  labels:
    app: nginx
spec:
  nodeSelector:           # nodeSelector ì§€ì •
    disktype: ssd         # disktype=ssd ë ˆì´ë¸”ì´ ìˆëŠ” ë…¸ë“œì—ë§Œ ìŠ¤ì¼€ì¤„ë§
  containers:
  - name: nginx
    image: nginx:1.25
    ports:
    - containerPort: 80
```

### Node Selector ì‹¤ìŠµ

```bash
# Pod ìƒì„±
$ kubectl apply -f pod-node-selector.yaml
pod/nginx-ssd created

# Podê°€ ì˜¬ë°”ë¥¸ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ë˜ì—ˆëŠ”ì§€ í™•ì¸
$ kubectl get pod nginx-ssd -o wide
NAME        READY   STATUS    RESTARTS   AGE   IP           NODE
nginx-ssd   1/1     Running   0          10s   10.244.0.5   kind-control-plane

# Pod ìƒì„¸ ì •ë³´ì—ì„œ nodeSelector í™•ì¸
$ kubectl describe pod nginx-ssd | grep -A 2 "Node-Selectors"
Node-Selectors:  disktype=ssd
Tolerations:     node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                 node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
```

### ë§¤ì¹­ë˜ëŠ” ë…¸ë“œê°€ ì—†ëŠ” ê²½ìš°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Node Selector ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ                                â”‚
â”‚                                                                             â”‚
â”‚   Pod ìƒì„± ìš”ì²­                                                               â”‚
â”‚   nodeSelector:                                                             â”‚
â”‚     gpu: nvidia          â† gpu=nvidia ë ˆì´ë¸”ì„ ê°€ì§„ ë…¸ë“œ ìš”ì²­                     â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                          â”‚
â”‚   â”‚  Scheduler   â”‚                                                          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                                          â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚   â”‚   Node 1    â”‚  â”‚   Node 2    â”‚  â”‚   Node 3    â”‚                         â”‚
â”‚   â”‚ disktype:   â”‚  â”‚ disktype:   â”‚  â”‚ env: prod   â”‚                         â”‚
â”‚   â”‚   ssd âœ—     â”‚  â”‚   hdd âœ—     â”‚  â”‚     âœ—       â”‚                         â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚          â”‚                                                                  â”‚
â”‚          â–¼                                                                  â”‚
â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—   â”‚
â”‚   â•‘                        ìŠ¤ì¼€ì¤„ë§ ì‹¤íŒ¨!                                  â•‘   â”‚
â”‚   â•‘                                                                     â•‘   â”‚
â”‚   â•‘   Pod Status: Pending                                               â•‘   â”‚
â”‚   â•‘   Reason: 0/3 nodes are available: 3 node(s) didn't match           â•‘   â”‚
â”‚   â•‘           Pod's node affinity/selector.                             â•‘   â”‚
â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```bash
# ë§¤ì¹­ë˜ëŠ” ë…¸ë“œê°€ ì—†ì„ ë•Œ Pod ìƒíƒœ
$ kubectl get pod nginx-gpu
NAME        READY   STATUS    RESTARTS   AGE
nginx-gpu   0/1     Pending   0          30s

# ì›ì¸ í™•ì¸
$ kubectl describe pod nginx-gpu
...
Events:
  Type     Reason            Age   From               Message
  ----     ------            ----  ----               -------
  Warning  FailedScheduling  30s   default-scheduler  0/1 nodes are available:
           1 node(s) didn't match Pod's node affinity/selector.
```

### Node Selector ì‚¬ìš© ì‚¬ë¡€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Node Selector ì‚¬ìš© ì‚¬ë¡€                               â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. í•˜ë“œì›¨ì–´ ìš”êµ¬ì‚¬í•­                                                      â”‚  â”‚
â”‚  â”‚     â€¢ GPUê°€ ìˆëŠ” ë…¸ë“œì— ë¨¸ì‹ ëŸ¬ë‹ ì›Œí¬ë¡œë“œ ë°°ì¹˜                                 â”‚  â”‚
â”‚  â”‚     â€¢ SSDê°€ ìˆëŠ” ë…¸ë“œì— ë°ì´í„°ë² ì´ìŠ¤ ë°°ì¹˜                                     â”‚  â”‚
â”‚  â”‚     â€¢ ê³ ì„±ëŠ¥ CPU ë…¸ë“œì— ì—°ì‚° ì§‘ì•½ì  ì‘ì—… ë°°ì¹˜                                  â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚     nodeSelector:                                                     â”‚  â”‚
â”‚  â”‚       gpu: nvidia                                                     â”‚  â”‚
â”‚  â”‚       disktype: ssd                                                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  2. í™˜ê²½ ë¶„ë¦¬                                                            â”‚  â”‚
â”‚  â”‚     â€¢ í”„ë¡œë•ì…˜ ì›Œí¬ë¡œë“œë¥¼ í”„ë¡œë•ì…˜ ë…¸ë“œì—ë§Œ ë°°ì¹˜                                 â”‚  â”‚
â”‚  â”‚     â€¢ ê°œë°œ/í…ŒìŠ¤íŠ¸ ì›Œí¬ë¡œë“œë¥¼ ê°œë°œ ë…¸ë“œì— ë°°ì¹˜                                   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚     nodeSelector:                                                     â”‚  â”‚
â”‚  â”‚       env: production                                                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  3. ì§€ì—­/ì¡´ ê¸°ë°˜ ë°°ì¹˜                                                     â”‚  â”‚
â”‚  â”‚     â€¢ íŠ¹ì • ë°ì´í„°ì„¼í„°ë‚˜ ê°€ìš© ì˜ì—­ì— Pod ë°°ì¹˜                                   â”‚  â”‚
â”‚  â”‚     â€¢ ì§€ì—° ì‹œê°„ì— ë¯¼ê°í•œ ì„œë¹„ìŠ¤ë¥¼ íŠ¹ì • ë¦¬ì „ì— ë°°ì¹˜                               â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚     nodeSelector:                                                     â”‚  â”‚
â”‚  â”‚       topology.kubernetes.io/zone: ap-northeast-2a                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## 7.3.2 Affinityì™€ Anti-affinityë¡œ pod ìŠ¤ì¼€ì¤„ë§ì„ ìœ ì—°í•˜ê²Œ ì§€ì •í•˜ê¸°
AffinityëŠ” 'ìœ ì‚¬ì„±'ì´ë‚˜ 'ë°€ì ‘í•œ ê´€ê³„'ë¼ëŠ” ëœ»ì˜ ë‹¨ì–´ì…ë‹ˆë‹¤.
ë…¸ë“œì™€ pod, ë˜ëŠ” podë¼ë¦¬ 'ê°€ê¹Œì›Œì§€ë„ë¡' ë˜ëŠ” 'ê°€ê¹Œì›Œì§€ì§€ ì•Šë„ë¡' ìŠ¤ì¼€ì¤„ë§ì„ ì œì•½í•©ë‹ˆë‹¤.

### Affinityì˜ ì¢…ë¥˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Affinityì˜ ì¢…ë¥˜                                     â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚   â”‚   â”‚   Node Affinity     â”‚         â”‚   Pod Affinity      â”‚           â”‚   â”‚
â”‚   â”‚   â”‚                     â”‚         â”‚   Pod Anti-Affinity â”‚           â”‚   â”‚
â”‚   â”‚   â”‚  Podë¥¼ íŠ¹ì • ë…¸ë“œì—     â”‚         â”‚                     â”‚           â”‚   â”‚
â”‚   â”‚   â”‚  ë°°ì¹˜í•˜ë„ë¡ ì œì–´        â”‚         â”‚  Podë¥¼ ë‹¤ë¥¸ Podì™€     â”‚           â”‚   â”‚
â”‚   â”‚   â”‚                     â”‚         â”‚  ê°€ê¹ê²Œ/ë©€ê²Œ ë°°ì¹˜       â”‚           â”‚   â”‚
â”‚   â”‚   â”‚  (Node Selectorì˜    â”‚         â”‚                    â”‚           â”‚   â”‚
â”‚   â”‚   â”‚   í™•ì¥ ë²„ì „)          â”‚         â”‚                     â”‚           â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚   â”‚              â”‚                              â”‚                       â”‚   â”‚
â”‚   â”‚              â–¼                              â–¼                       â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚   â”‚   â”‚  ë…¸ë“œì˜ ë ˆì´ë¸” ê¸°ë°˜      â”‚         â”‚  Podì˜ ë ˆì´ë¸” ê¸°ë°˜     â”‚           â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Node Affinity

Node AffinityëŠ” Node Selectorì˜ í™•ì¥ ë²„ì „ìœ¼ë¡œ, ë” í’ë¶€í•œ í‘œí˜„ì‹ì„ ì§€ì›í•©ë‹ˆë‹¤.  
Node selectorì™€ ê±°ì˜ ìœ ì‚¬í•˜ì§€ë§Œ, Node selectorì™€ ë‹¬ë¦¬ 'ê°€ëŠ¥í•˜ë©´ ìŠ¤ì¼€ì¤„ë§í•œë‹¤'ëŠ” ì„ íƒì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.  

Node selectorëŠ” í•´ë‹¹ ë…¸ë“œê°€ ì¡´ì¬í•˜ì§€ ì•Šìœ¼ë©´ podë¥¼ ìŠ¤ì¼€ì¤„ë§ í•  ìˆ˜ ì—†ê¸° ë–„ë¬¸ì— ë…¸ë“œ ì¥ì• ì— ì·¨ì•½í•©ë‹ˆë‹¤.  
ìŠ¤ì¼€ì¤„ë§ì„ ì œì–´í•˜ë©´ì„œë„ ë…¸ë“œ ì¥ì• ì—ë„ ëŒ€ì‘í•  ìˆ˜ ìˆê¸°ë•Œë¬¸ì— ë°˜ë“œì‹œ íŠ¹ì • ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§í• ê²Œ ì•„ë‹ˆë©´ ì‚¬ìš©ì¶”ì²œ!

#### Node Affinityì˜ ë‘ ê°€ì§€ ìœ í˜•

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       Node Affinity ìœ í˜•                                     â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  1. requiredDuringSchedulingIgnoredDuringExecution (í•„ìˆ˜)              â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚     â€¢ ì¡°ê±´ì„ ë°˜ë“œì‹œ ë§Œì¡±í•˜ëŠ” ë…¸ë“œì—ë§Œ ìŠ¤ì¼€ì¤„ë§                                  â”‚  â”‚
â”‚  â”‚     â€¢ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë…¸ë“œê°€ ì—†ìœ¼ë©´ PodëŠ” Pending ìƒíƒœ                         â”‚  â”‚
â”‚  â”‚     â€¢ Node Selectorì™€ ìœ ì‚¬í•˜ì§€ë§Œ ë” í’ë¶€í•œ í‘œí˜„ì‹ ì§€ì›                        â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚     â”‚   Pod   â”‚ â”€â”€â”€ ë°˜ë“œì‹œ ë°°ì¹˜ â”€â”€â”€â–¶    â”‚  Node   â”‚  (ì¡°ê±´ ë§Œì¡±)           â”‚  â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  2. preferredDuringSchedulingIgnoredDuringExecution (ì„ í˜¸)             â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚     â€¢ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë…¸ë“œë¥¼ ì„ í˜¸í•˜ì§€ë§Œ, í•„ìˆ˜ëŠ” ì•„ë‹˜                             â”‚  â”‚
â”‚  â”‚     â€¢ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë…¸ë“œê°€ ì—†ì–´ë„ ì ì ˆí•œ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ ê°€ëŠ¥                      â”‚  â”‚
â”‚  â”‚     â€¢ weight(1-100)ë¡œ ì„ í˜¸ë„ ê°•ë„ë¥¼ ì§€ì •                                   â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚     â”‚   Pod   â”‚ â”€â”€â”€ ê°€ëŠ¥í•˜ë©´ ë°°ì¹˜ â”€â”€â–¶   â”‚  Node   â”‚  (ì¡°ê±´ ë§Œì¡±)            â”‚  â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â”‚                         â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚  â”‚
â”‚  â”‚                         â””â”€ ì•„ë‹ˆë©´ â”€â”€â–¶ â”‚  Node   â”‚  (ë‹¤ë¥¸ ë…¸ë“œ)            â”‚  â”‚
â”‚  â”‚                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â€» IgnoredDuringExecution: ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ PodëŠ” ë…¸ë“œ ë ˆì´ë¸”ì´ ë³€ê²½ë˜ì–´ë„              â”‚
â”‚     í‡´ê±°(eviction)ë˜ì§€ ì•ŠìŒ                                                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### matchExpressions êµ¬ì¡°

`matchExpressions`ëŠ” Node Affinityì—ì„œ ë…¸ë“œë¥¼ ì„ íƒí•˜ê¸° ìœ„í•œ ì¡°ê±´ì„ ì •ì˜í•˜ëŠ” í•µì‹¬ ìš”ì†Œì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         matchExpressions êµ¬ì¡°                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  nodeSelectorTerms:           # ì—¬ëŸ¬ Termì€ OR ê´€ê³„                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Term 1                                                              â”‚    â”‚
â”‚  â”‚   matchExpressions:        # ê°™ì€ Term ë‚´ ì¡°ê±´ë“¤ì€ AND ê´€ê³„              â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
â”‚  â”‚   â”‚  - key: disktype       # ë ˆì´ë¸” í‚¤                            â”‚   â”‚    â”‚
â”‚  â”‚   â”‚    operator: In        # ì—°ì‚°ì (In, NotIn, Exists ë“±)        â”‚   â”‚    â”‚
â”‚  â”‚   â”‚    values: [ssd]       # ê°’ ëª©ë¡                              â”‚   â”‚    â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
â”‚  â”‚   â”‚  - key: zone           # ë‘ ë²ˆì§¸ ì¡°ê±´ (AND)                    â”‚   â”‚   â”‚
â”‚  â”‚   â”‚    operator: In                                             â”‚   â”‚   â”‚
â”‚  â”‚   â”‚    values: [ap-northeast-2a]                                â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              OR                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Term 2                                                              â”‚   â”‚
â”‚  â”‚   matchExpressions:                                                 â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚  - key: node-type                                            â”‚  â”‚   â”‚
â”‚  â”‚   â”‚    operator: In                                              â”‚  â”‚   â”‚
â”‚  â”‚   â”‚    values: [high-memory]                                     â”‚  â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                            â”‚
â”‚  ìœ„ ì˜ˆì‹œì˜ ë…¼ë¦¬: (disktype=ssd AND zone=ap-northeast-2a) OR node-type=high-memory â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**matchExpressions êµ¬ì„± ìš”ì†Œ:**

| í•„ë“œ | ì„¤ëª… | í•„ìˆ˜ ì—¬ë¶€ |
|------|------|-----------|
| **key** | ë…¸ë“œ ë ˆì´ë¸”ì˜ í‚¤ ì´ë¦„ | í•„ìˆ˜ |
| **operator** | ë¹„êµ ì—°ì‚°ì (In, NotIn, Exists, DoesNotExist, Gt, Lt) | í•„ìˆ˜ |
| **values** | ë¹„êµí•  ê°’ ëª©ë¡ (Exists, DoesNotExistëŠ” ìƒëµ) | ì—°ì‚°ìì— ë”°ë¼ ë‹¤ë¦„ |

**matchExpressions vs matchFields:**

| êµ¬ë¶„ | matchExpressions | matchFields |
|------|------------------|-------------|
| **ëŒ€ìƒ** | ë…¸ë“œ **ë ˆì´ë¸”** (ì‚¬ìš©ì ì •ì˜ ê°€ëŠ¥) | ë…¸ë“œ **í•„ë“œ** (ì‹œìŠ¤í…œ ì†ì„±) |
| **ì˜ˆì‹œ í‚¤** | `disktype`, `zone`, `team` | `metadata.name`, `spec.unschedulable` |
| **ìš©ë„** | ì»¤ìŠ¤í…€ ë ˆì´ë¸”ë¡œ ë…¸ë“œ ë¶„ë¥˜ | ë…¸ë“œ ì´ë¦„ ë“± ì‹œìŠ¤í…œ ì •ë³´ë¡œ ì„ íƒ |

#### Node Affinity ì—°ì‚°ì

| ì—°ì‚°ì | ì„¤ëª… | ì˜ˆì‹œ |
|--------|------|------|
| **In** | ê°’ì´ ëª©ë¡ì— í¬í•¨ë¨ | `values: [ssd, nvme]` |
| **NotIn** | ê°’ì´ ëª©ë¡ì— í¬í•¨ë˜ì§€ ì•ŠìŒ | `values: [hdd]` |
| **Exists** | í‚¤ê°€ ì¡´ì¬í•¨ (ê°’ ë¬´ê´€) | `key: gpu` |
| **DoesNotExist** | í‚¤ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ | `key: spot-instance` |
| **Gt** | ê°’ì´ ì§€ì •ê°’ë³´ë‹¤ í¼ | `values: ["4"]` (CPU > 4) |
| **Lt** | ê°’ì´ ì§€ì •ê°’ë³´ë‹¤ ì‘ìŒ | `values: ["8"]` (Memory < 8) |

#### Node Affinity YAML ì˜ˆì‹œ

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: node-affinity-pod
spec:
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution: <-- ëŒ€ì‘í•˜ëŠ” ë…¸ë“œê°€ ì—†ì–´ë„ ìŠ¤ì¼€ì¤„ë§í•œë‹¤.
        - weight: 1
          preference:
            matchExpressions:
              - key: disktype <-- ë…¸ë“œì— ì„¤ì •ëœ í‚¤ê°€ disktypeì´ê³ 
                operator: In
                values:
                  - ssd <-- valueê°€ ssdì¸ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§í•˜ë˜
  containers:
    - name: node-affinity-pod
      image: nginx:1.25.3
```

### Pod Affinityì™€ Pod Anti-Affinity

í˜„ì¬ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ëœ podì˜ ë ˆì´ë¸”ì„ ê¸°ë°˜ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§í•©ë‹ˆë‹¤.  
ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒ¨í„´ì€ ë…¸ë“œì˜ ì¥ì• ì— ëŒ€ë¹„í•˜ì—¬ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ podë¥¼ ê°™ì€ ë…¸ë“œì— ë°°ì¹˜í•˜ì§€ ì•Šë„ë¡ ê·œì¹™ì„ ì„¤ì •í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. 
Deploymentë¡œ podë¥¼ ë‹¤ì¤‘í™”í•´ë„ ì „ë¶€ ê°™ì€ ë…¸ë“œì— ë°°ì¹˜ëœë‹¤ë©´ í•´ë‹¹ ë…¸ë“œê°€ ì¥ì• ê°€ ë‚¬ì„ ë•Œ ì„œë¹„ìŠ¤ ì „ì²´ê°€ ì˜í–¥ì„ ë°›ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.ì´ ê·œì¹™ì„ ì¶”ê°€í•¨ìœ¼ë¡œì¨ podë¥¼ ì—¬ëŸ¬ ë…¸ë“œì— ë¶„ì‚° ë°°ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ë‹¤ë§Œ ìµœê·¼ ë“±ì¥í•œ <mark>Topology Spread Constraints</mark>ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê²½ìš°ë„ ìˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Pod Affinity vs Pod Anti-Affinity                        â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Pod Affinity                                  â”‚  â”‚
â”‚  â”‚                    "íŠ¹ì • Podì™€ ê°™ì€ ê³³ì— ë°°ì¹˜"                             â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚         Node 1                           Node 2                       â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â”‚  Pod A    â”‚  â”‚              â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â”‚ app:cache â”‚  â”‚              â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â”‚  Pod B    â”‚â—€â”€â”¼â”€â”€ ê°™ì€ ë…¸ë“œì—   â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â”‚ app:web   â”‚  â”‚   ë°°ì¹˜ë¨       â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚   ì‚¬ìš© ì‚¬ë¡€: ìºì‹œ ì„œë²„ì™€ ì›¹ ì„œë²„ë¥¼ ê°™ì€ ë…¸ë“œì— ë°°ì¹˜í•˜ì—¬ ì§€ì—° ì‹œê°„ ìµœì†Œí™”              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                       Pod Anti-Affinity                               â”‚  â”‚
â”‚  â”‚                   "íŠ¹ì • Podì™€ ë‹¤ë¥¸ ê³³ì— ë°°ì¹˜"                              â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚         Node 1                           Node 2                       â”‚  â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚  â”‚
â”‚  â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â”‚  Pod A    â”‚  â”‚     ì„œë¡œ      â”‚  â”‚  Pod B    â”‚  â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â”‚ app:web   â”‚  â”‚â—€â”€â”€ ë‹¤ë¥¸ â”€â”€â”€â–¶  â”‚  â”‚ app:web   â”‚  â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â”‚ replica 1 â”‚  â”‚   ë…¸ë“œì—       â”‚  â”‚ replica 2 â”‚  â”‚                â”‚  â”‚
â”‚  â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   ë°°ì¹˜ë¨       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                â”‚  â”‚
â”‚  â”‚   â”‚                 â”‚              â”‚                 â”‚                â”‚  â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚   ì‚¬ìš© ì‚¬ë¡€: ê³ ê°€ìš©ì„±ì„ ìœ„í•´ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ replicaë¥¼ ë‹¤ë¥¸ ë…¸ë“œì— ë¶„ì‚°           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### topologyKey ì´í•´í•˜ê¸°

Pod Affinity/Anti-Affinityì—ì„œ topologyKeyëŠ” "ê°™ì€ ê³³"ì˜ ë²”ìœ„ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          topologyKey ê°œë…                                    â”‚
â”‚                                                                             â”‚
â”‚   topologyKeyëŠ” ë…¸ë“œì˜ ë ˆì´ë¸” í‚¤ë¥¼ ì§€ì •í•˜ì—¬ "ê°™ì€ ìœ„ì¹˜"ì˜ ë²”ìœ„ë¥¼ ê²°ì •í•©ë‹ˆë‹¤.               â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  topologyKey: kubernetes.io/hostname                                â”‚   â”‚
â”‚   â”‚  â†’ ê°™ì€ ë…¸ë“œ (ë…¸ë“œ ë‹¨ìœ„)                                                â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   Node 1              Node 2              Node 3                    â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”                   â”‚   â”‚
â”‚   â”‚  â”‚ Pod  â”‚            â”‚      â”‚            â”‚      â”‚                   â”‚   â”‚
â”‚   â”‚  â”‚  A   â”‚  ê°™ì€ ë…¸ë“œ   â”‚      â”‚            â”‚      â”‚                   â”‚   â”‚
â”‚   â”‚  â”‚ Pod  â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚            â”‚      â”‚                   â”‚   â”‚
â”‚   â”‚  â”‚  B   â”‚            â”‚      â”‚            â”‚      â”‚                   â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”˜                   â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  topologyKey: topology.kubernetes.io/zone                           â”‚   â”‚
â”‚   â”‚  â†’ ê°™ì€ ê°€ìš© ì˜ì—­ (Zone ë‹¨ìœ„)                                           â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€ Zone A â”€â”€â”€â”         â”Œâ”€â”€â”€ Zone B â”€â”€â”€â”                         â”‚   â”‚
â”‚   â”‚   â”‚ Node1  Node2 â”‚         â”‚ Node3  Node4 â”‚                         â”‚   â”‚
â”‚   â”‚   â”‚ â”Œâ”€â”€â”  â”Œâ”€â”€â”   â”‚  ê°™ì€    â”‚ â”Œâ”€â”€â”  â”Œâ”€â”€â”   â”‚                         â”‚   â”‚
â”‚   â”‚   â”‚ â”‚A â”‚  â”‚B â”‚   â”‚â—€â”€Zoneâ”€â”€ â”‚ â”‚  â”‚  â”‚  â”‚   â”‚                         â”‚   â”‚
â”‚   â”‚   â”‚ â””â”€â”€â”˜  â””â”€â”€â”˜   â”‚         â”‚ â””â”€â”€â”˜  â””â”€â”€â”˜   â”‚                         â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Pod Anti-Affinity YAML ì˜ˆì‹œ

ê³ ê°€ìš©ì„±ì„ ìœ„í•´ ê°™ì€ ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ Podë¥¼ ë‹¤ë¥¸ ë…¸ë“œì— ë¶„ì‚° ë°°ì¹˜í•˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: pod-anti-affinity
  labels:
    app: nginx
spec:
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchExpressions:
                - key: app
                  operator: In
                  values:
                    - nginx
            topologyKey: kubernetes.io/hostname <-- ê°™ì€ ë…¸ë“œì— ë°°ì¹˜ë˜ì§€ ì•Šë„ë¡ ì„¤ì • kubernetes.io/zone ìœ¼ë¡œ ì„¤ì •í•˜ë©´ ê°™ì€ ë°ì´í„°ì„¼í„°(Zone)ì— ë°°ì¹˜ë˜ì§€ ì•Šë„ë¡ ì„¤ì • ê°€ëŠ¥
  containers:
    - name: nginx
      image: nginx:1.25.3
```

### Affinity ì‚¬ìš© ì‚¬ë¡€ ì •ë¦¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Affinity ì‚¬ìš© ì‚¬ë¡€                                    â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Node Affinity ì‚¬ìš© ì‚¬ë¡€                                                â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â€¢ GPU ì›Œí¬ë¡œë“œë¥¼ GPU ë…¸ë“œì— ë°°ì¹˜                                           â”‚  â”‚
â”‚  â”‚  â€¢ SSDê°€ í•„ìš”í•œ DBë¥¼ SSD ë…¸ë“œì— ë°°ì¹˜                                        â”‚  â”‚
â”‚  â”‚  â€¢ íŠ¹ì • ê°€ìš© ì˜ì—­ì— ì„œë¹„ìŠ¤ ë°°ì¹˜ (ì§€ì—° ì‹œê°„ ìµœì í™”)                               â”‚  â”‚
â”‚  â”‚  â€¢ spot instance ë…¸ë“œ íšŒí”¼ (ì•ˆì •ì„±ì´ ì¤‘ìš”í•œ ì„œë¹„ìŠ¤)                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Pod Affinity ì‚¬ìš© ì‚¬ë¡€                                                 â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â€¢ ìºì‹œ ì„œë²„ì™€ ì›¹ ì„œë²„ë¥¼ ê°™ì€ ë…¸ë“œì— ë°°ì¹˜ (ë„¤íŠ¸ì›Œí¬ ì§€ì—° ìµœì†Œí™”)                    â”‚  â”‚
â”‚  â”‚  â€¢ í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œë¥¼ ê°™ì€ Zoneì— ë°°ì¹˜                                      â”‚  â”‚
â”‚  â”‚  â€¢ ìì£¼ í†µì‹ í•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ë¥¼ ê°€ê¹ê²Œ ë°°ì¹˜                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Pod Anti-Affinity ì‚¬ìš© ì‚¬ë¡€                                            â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â€¢ ê°™ì€ ì„œë¹„ìŠ¤ì˜ replicaë¥¼ ë‹¤ë¥¸ ë…¸ë“œì— ë¶„ì‚° (ê³ ê°€ìš©ì„±)                          â”‚  â”‚
â”‚  â”‚  â€¢ ê°™ì€ ì„œë¹„ìŠ¤ì˜ replicaë¥¼ ë‹¤ë¥¸ Zoneì— ë¶„ì‚° (ì¬í•´ ë³µêµ¬)                        â”‚  â”‚
â”‚  â”‚  â€¢ ë¦¬ì†ŒìŠ¤ë¥¼ ë§ì´ ì‚¬ìš©í•˜ëŠ” Pod ë¶„ì‚° (ë¦¬ì†ŒìŠ¤ ê²½í•© ë°©ì§€)                            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Node Selector vs Node Affinity ë¹„êµ

| íŠ¹ì§• | Node Selector | Node Affinity |
|------|---------------|---------------|
| **ë³µì¡ë„** | ë‹¨ìˆœí•¨ | ìƒëŒ€ì ìœ¼ë¡œ ë³µì¡í•¨ |
| **ì—°ì‚°ì** | ë™ë“±(=)ë§Œ ì§€ì› | In, NotIn, Exists, DoesNotExist, Gt, Lt ì§€ì› |
| **í•„ìˆ˜/ì„ í˜¸** | í•„ìˆ˜ë§Œ ê°€ëŠ¥ | í•„ìˆ˜(required)ì™€ ì„ í˜¸(preferred) ëª¨ë‘ ê°€ëŠ¥ |
| **ì‚¬ìš© ì‚¬ë¡€** | ë‹¨ìˆœí•œ ë…¸ë“œ ì„ íƒ | ë³µì¡í•œ ì¡°ê±´ì˜ ë…¸ë“œ ì„ íƒ |

### ì£¼ì˜ì‚¬í•­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        âš ï¸ Affinity ì£¼ì˜ì‚¬í•­                                    â”‚
â”‚                                                                             â”‚
â”‚  1. Pod Anti-Affinityì˜ required ì¡°ê±´ì€ ë…¸ë“œ ìˆ˜ë³´ë‹¤ replicaê°€ ë§ìœ¼ë©´               â”‚
â”‚     ì¼ë¶€ Podê°€ Pending ìƒíƒœê°€ ë¨                                                â”‚
â”‚     â†’ ë…¸ë“œ 3ê°œì¸ë° replica 5ê°œë©´ 2ê°œëŠ” ìŠ¤ì¼€ì¤„ë§ ë¶ˆê°€                                â”‚
â”‚                                                                             â”‚
â”‚  2. topologyKey ì„¤ì • ì‹¤ìˆ˜ ì£¼ì˜                                                 â”‚
â”‚     â†’ hostname vs zoneì— ë”°ë¼ ë¶„ì‚° ë²”ìœ„ê°€ í¬ê²Œ ë‹¬ë¼ì§                              â”‚
â”‚                                                                             â”‚
â”‚  3. ë³µì¡í•œ Affinity ê·œì¹™ì€ ìŠ¤ì¼€ì¤„ë§ ì„±ëŠ¥ì— ì˜í–¥ì„ ì¤„ ìˆ˜ ìˆìŒ                           â”‚
â”‚     â†’ ê¼­ í•„ìš”í•œ ê²½ìš°ì—ë§Œ ì‚¬ìš©                                                     â”‚
â”‚                                                                             â”‚
â”‚  4. IgnoredDuringExecutionì˜ ì˜ë¯¸ ì´í•´ í•„ìš”                                     â”‚
â”‚     â†’ ì‹¤í–‰ ì¤‘ì¸ PodëŠ” ì¡°ê±´ì´ ë³€í•´ë„ í‡´ê±°ë˜ì§€ ì•ŠìŒ                                    â”‚
â”‚     â†’ ìƒˆë¡œìš´ Podë§Œ ìƒˆ ì¡°ê±´ì— ë”°ë¼ ìŠ¤ì¼€ì¤„ë§ë¨                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


## 7.3.3 podë¶„ì‚°ì„ ìœ„í•œ Pod Topology Spread Constraints ì„¤ì •í•˜ê¸°
Pod Topology Spread ConstraintsëŠ” podë¥¼ ë¶„ì‚°ì‹œí‚¤ê¸° ìœ„í•œ ì„¤ì •ì…ë‹ˆë‹¤. topologyKeyë¥¼ ê¸°ì¤€ìœ¼ë¡œ podê°€ ê³ ë¥´ê²Œ ë¶„ì‚°ë˜ë„ë¡ ì œì–´í•©ë‹ˆë‹¤. 
ì—ë¥¼ ë“¤ì–´ topologyKeyì— ë…¸ë“œì˜ ubernetes.io/hostname ë ˆì´ë¸”ì„ ì§€ì •í•˜ë©´, í˜¸ìŠ¤íŠ¸ ê°„ podë¥¼ ë¶„ì‚°í•˜ì—¬ ìŠ¤ì¼€ì¤„ë§ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
pod anti-affinityë¡œë„ ë¹„ìŠ·í•œ ì„¤ì •ì´ ê°€ëŠ¥í•˜ì§€ë§Œ, ë‚˜ì¤‘ì— ë„ì…ëœ ë§Œí¼ ë” ìœ ì—°í•˜ê²Œ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.

Pod Topology Spread Constraintsë¥¼ ì‚¬ìš©í•˜ë©´ podì˜ ìˆ˜ê°€ ë…¸ë“œì˜ ìˆ˜ë¥¼ ì´ˆê³¼í•´ë„ ìµœëŒ€í•œ ë¶„ì‚°ë˜ë„ë¡ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```yaml
kind: Pod
apiVersion: v1
metadata:
  name: mypod
  labels:
    app: nginx
spec:
  topologySpreadConstraints:
    - maxSkew: 1
      topologyKey: zone
      whenUnsatisfiable: DoNotSchedule
      labelSelector:
        matchLabels:
          app: nginx
  containers:
    - name: nginx
      image: nginx:1.25.3
```

### maxSkew ì´í•´í•˜ê¸°

`maxSkew`ëŠ” **í† í´ë¡œì§€ ë„ë©”ì¸ ê°„ Pod ìˆ˜ì˜ ìµœëŒ€ í—ˆìš© ë¶ˆê· í˜• ì •ë„**ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°’ì…ë‹ˆë‹¤. ì‰½ê²Œ ë§í•´, ê°€ì¥ ë§ì€ Podë¥¼ ê°€ì§„ ë„ë©”ì¸ê³¼ ê°€ì¥ ì ì€ Podë¥¼ ê°€ì§„ ë„ë©”ì¸ ê°„ì˜ Pod ìˆ˜ ì°¨ì´ê°€ maxSkew ê°’ì„ ì´ˆê³¼í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

**ê³„ì‚° ê³µì‹:**
```
skew = (í•´ë‹¹ í† í´ë¡œì§€ì˜ ë§¤ì¹­ Pod ìˆ˜) - (ì „ì²´ í† í´ë¡œì§€ ì¤‘ ìµœì†Œ ë§¤ì¹­ Pod ìˆ˜)
```

ìƒˆë¡œìš´ Podê°€ ìŠ¤ì¼€ì¤„ë§ë  ë•Œ, ëª¨ë“  í† í´ë¡œì§€ ë„ë©”ì¸ì—ì„œ ìœ„ ê³„ì‚° ê²°ê³¼(skew)ê°€ maxSkew ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.

---

#### maxSkew=1 ì˜ˆì‹œ (ê· ë“± ë¶„ì‚°)

3ê°œì˜ Zoneì— Podë¥¼ ë¶„ì‚°ì‹œí‚¤ëŠ” ìƒí™©ì„ ê°€ì •í•©ë‹ˆë‹¤.

**ì´ˆê¸° ìƒíƒœ: 6ê°œì˜ Podê°€ ê· ë“±í•˜ê²Œ ë¶„ì‚°ë¨**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    maxSkew = 1 ì„¤ì •                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Zone-A       â”‚      Zone-B       â”‚       Zone-C        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚  â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚  â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜   â”‚
â”‚     Pod ìˆ˜: 2     â”‚     Pod ìˆ˜: 2     â”‚     Pod ìˆ˜: 2       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ìµœì†Œ Pod ìˆ˜: 2                                              â”‚
â”‚  Zone-A skew: 2 - 2 = 0 âœ“ (maxSkew ì´í•˜)                    â”‚
â”‚  Zone-B skew: 2 - 2 = 0 âœ“ (maxSkew ì´í•˜)                    â”‚
â”‚  Zone-C skew: 2 - 2 = 0 âœ“ (maxSkew ì´í•˜)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**7ë²ˆì§¸ Pod ì¶”ê°€ ì‹œ: ì–´ëŠ Zoneì— ë°°ì¹˜í•´ë„ ì¡°ê±´ ì¶©ì¡±**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               7ë²ˆì§¸ Podë¥¼ Zone-Aì— ë°°ì¹˜                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Zone-A       â”‚      Zone-B       â”‚       Zone-C        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚  â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚  â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”          â”‚                   â”‚                     â”‚
â”‚  â”‚ NEW â”‚ â† ì¶”ê°€    â”‚                   â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜          â”‚                   â”‚                     â”‚
â”‚     Pod ìˆ˜: 3      â”‚     Pod ìˆ˜: 2     â”‚     Pod ìˆ˜: 2        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ìµœì†Œ Pod ìˆ˜: 2                                               â”‚
â”‚  Zone-A skew: 3 - 2 = 1 âœ“ (maxSkew ì´í•˜)                     â”‚
â”‚  Zone-B skew: 2 - 2 = 0 âœ“ (maxSkew ì´í•˜)                     â”‚
â”‚  Zone-C skew: 2 - 2 = 0 âœ“ (maxSkew ì´í•˜)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### maxSkew ìœ„ë°˜ ì‚¬ë¡€

**8ë²ˆì§¸ Podë¥¼ Zone-Aì— ì¶”ê°€í•˜ë ¤ëŠ” ê²½ìš° (ì‹¤íŒ¨)**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           8ë²ˆì§¸ Podë¥¼ Zone-Aì— ë°°ì¹˜ ì‹œë„ (ì‹¤íŒ¨!)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚      Zone-A       â”‚      Zone-B       â”‚       Zone-C        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚  â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚  â”‚  â”‚ Pod â”‚ â”‚ Pod â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”  â”‚                   â”‚                     â”‚
â”‚  â”‚ Pod â”‚ â”‚ NEW â”‚  â”‚                   â”‚                     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â”‚                   â”‚                     â”‚
â”‚     Pod ìˆ˜: 4      â”‚     Pod ìˆ˜: 2     â”‚     Pod ìˆ˜: 2        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ìµœì†Œ Pod ìˆ˜: 2                                               â”‚
â”‚  Zone-A skew: 4 - 2 = 2 âœ— (maxSkew ì´ˆê³¼!)                    â”‚
â”‚  â†’ whenUnsatisfiable: DoNotScheduleì´ë©´ ìŠ¤ì¼€ì¤„ë§ ê±°ë¶€            â”‚
â”‚  â†’ whenUnsatisfiable: ScheduleAnywayì´ë©´ ìŠ¤ì¼€ì¤„ë§ í—ˆìš©           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ì´ ê²½ìš° 8ë²ˆì§¸ PodëŠ” Zone-B ë˜ëŠ” Zone-Cì— ë°°ì¹˜ë˜ì–´ì•¼ maxSkew=1 ì¡°ê±´ì„ ë§Œì¡±í•©ë‹ˆë‹¤.

---

#### maxSkew ê°’ì— ë”°ë¥¸ ë¶„ì‚° ì •ë„ ë¹„êµ

| maxSkew ê°’ | ì˜ë¯¸ | ë¶„ì‚° ì •ë„ |
|-----------|------|----------|
| 1 | ë„ë©”ì¸ ê°„ Pod ìˆ˜ ì°¨ì´ ìµœëŒ€ 1ê°œ | ê°€ì¥ ê· ë“±í•œ ë¶„ì‚° (ì—„ê²©) |
| 2 | ë„ë©”ì¸ ê°„ Pod ìˆ˜ ì°¨ì´ ìµœëŒ€ 2ê°œ | ì¤‘ê°„ ì •ë„ì˜ ë¶„ì‚° |
| 3+ | ë„ë©”ì¸ ê°„ Pod ìˆ˜ ì°¨ì´ ìµœëŒ€ Nê°œ | ëŠìŠ¨í•œ ë¶„ì‚° |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 maxSkew ê°’ì— ë”°ë¥¸ ë¶„ì‚° ì˜ˆì‹œ                     â”‚
â”‚                 (10ê°œ Pod, 3ê°œ Zone ê¸°ì¤€)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  maxSkew=1 (ì—„ê²©í•œ ë¶„ì‚°)                                       â”‚
â”‚  Zone-A: â–ˆâ–ˆâ–ˆâ–ˆ (4)                                           â”‚
â”‚  Zone-B: â–ˆâ–ˆâ–ˆ  (3)                                           â”‚
â”‚  Zone-C: â–ˆâ–ˆâ–ˆ  (3)      ì°¨ì´: ìµœëŒ€ 1ê°œ                          â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  maxSkew=2 (ì¤‘ê°„ ë¶„ì‚°)                                        â”‚
â”‚  Zone-A: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (5)                                          â”‚
â”‚  Zone-B: â–ˆâ–ˆâ–ˆ   (3)                                          â”‚
â”‚  Zone-C: â–ˆâ–ˆ    (2)     ì°¨ì´: ìµœëŒ€ 3ê°œ (í—ˆìš©)                    â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  maxSkew=3 (ëŠìŠ¨í•œ ë¶„ì‚°)                                       â”‚
â”‚  Zone-A: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ (6)                                         â”‚
â”‚  Zone-B: â–ˆâ–ˆâ–ˆ    (3)                                         â”‚
â”‚  Zone-C: â–ˆ      (1)    ì°¨ì´: ìµœëŒ€ 5ê°œ (í—ˆìš©)                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### whenUnsatisfiable ì˜µì…˜

maxSkew ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ëª»í•  ë•Œì˜ ë™ì‘ì„ ì§€ì •í•©ë‹ˆë‹¤:

| ì˜µì…˜ | ë™ì‘ |
|-----|------|
| `DoNotSchedule` | ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ëª»í•˜ë©´ ìŠ¤ì¼€ì¤„ë§í•˜ì§€ ì•ŠìŒ (Pending ìƒíƒœ ìœ ì§€) |
| `ScheduleAnyway` | ì¡°ê±´ì„ ë§Œì¡±í•˜ì§€ ëª»í•´ë„ skewë¥¼ ìµœì†Œí™”í•˜ëŠ” ë°©í–¥ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§ |

**ì‹¤ë¬´ ê¶Œì¥ì‚¬í•­:**
- ê³ ê°€ìš©ì„±ì´ ì¤‘ìš”í•œ ê²½ìš°: `maxSkew: 1` + `DoNotSchedule`
- ìœ ì—°ì„±ì´ í•„ìš”í•œ ê²½ìš°: `maxSkew: 1` + `ScheduleAnyway`
- ëŒ€ê·œëª¨ í´ëŸ¬ìŠ¤í„°: `maxSkew: 2~3`ìœ¼ë¡œ ì—¬ìœ ë¥¼ ë‘ 
  
Pod Topology Spread ConstraintsëŠ” ìŠ¤ì¼€ì¼ ë‹¤ìš´ ì‹œ ì¬ë¶„ì‚°ë˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” í•œê³„ì ë„ ìˆì–´ ë§ŒëŠ¥ì€ ì•„ë‹™ë‹ˆë‹¤. ë”°ë¼ì„œ ë„ì…ì‹œ ê³µì‹ ë¬¸ì„œë¥¼ í†µí•´ ìì„¸í•œ ë‚´ìš©ì„ í™•ì¸í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.

## 7.3.4 Taintì™€ Toleration

Taintì™€ Tolerationì€ íŠ¹ì • ë…¸ë“œì— íŠ¹ì • Podë§Œ ìŠ¤ì¼€ì¤„ë§ë˜ë„ë¡ ì œì–´í•˜ëŠ” ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.  
Node Affinityê°€ "íŠ¹ì • podë¥¼ ì–´ë–¤ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§í• ì§€"ë¥¼ ì§€ì •í•˜ëŠ” ë°©ì‹ì´ë¼ë©´,  
Taint/Tolerationì€ "íŠ¹ì • ë…¸ë“œì— íŠ¹ì • podë§Œì„ ìŠ¤ì¼€ì¤„ë§í•˜ëŠ”(ê·¸ ì™¸ì˜ podëŠ” ê±°ë¶€)"ì§€ì • ë°©ë²•ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Taintì™€ Toleration ê°œë…ë„                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   Node Affinity: Pod â†’ Node (Podê°€ ë…¸ë“œë¥¼ ì„ íƒ)                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚   â”‚  Pod  â”‚ â”€â”€â”€â”€â”€â”€â–¶ â”‚ Node  â”‚  "ë‚˜ëŠ” ì´ ë…¸ë“œì— ê°€ê³  ì‹¶ì–´!"                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                     â”‚
â”‚   Taint/Toleration: Node â†’ Pod (ë…¸ë“œê°€ Podë¥¼ ê±°ë¶€/í—ˆìš©)                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚   â”‚ Node  â”‚ â”€â”€â”€â”€â”€â”€â–¶ â”‚  Pod  â”‚  "ë„ˆëŠ” ì—¬ê¸° ì˜¤ì§€ ë§ˆ!" (Taint)             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚                     â”‚  Pod  â”‚  "ë‚˜ëŠ” ê´œì°®ì•„!" (Toleration)             â”‚
â”‚                     â””â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Taint (ë…¸ë“œì— ì„¤ì •)

TaintëŠ” ë…¸ë“œì— "ì˜¤ì—¼" í‘œì‹œë¥¼ í•˜ì—¬ ì¼ë°˜ì ì¸ Podê°€ ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤.  
ë…¸ë“œì— Taintë¥¼ ì¶”ê°€í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.  
```bash
kubectl taint nodes <ëŒ€ìƒ ë…¸ë“œ ì´ë¦„> <label ì´ë¦„>=<label ê°’>:<Taint íš¨ê³¼>
```

**Taint êµ¬ì¡°:**
```
key=value:effect
```

ë‹¤ìŒê³¼ ê°™ì´ Taintë¥¼ ì„¤ì •í•œë‹¤ê³  í•´ë³´ê² ìŠµë‹ˆë‹¤.
```bash
kubectl taint nodes node1 disktype=ssd:NoSchedule
```

---

### Toleration (Podì— ì„¤ì •)
Tolerationì€ Podê°€ íŠ¹ì • Taintë¥¼ "ìš©ì¸"í•˜ì—¬ í•´ë‹¹ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ë  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

ìœ„ Taintì— ëŒ€ì‘í•˜ëŠ” Tolerationì„ ì§€ì •í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: nginx
spec:
  containers:
    - name: nginx
      image: nginx:1.25.3
      imagePullPolicy: IfNotPresent
  tolerations:
    - key: "disktype"
      value: "ssd"
      operator: "Equal"
      effect: "NoSchedule"

```

Node affinityì˜ ê²½ìš° ë…¸ë“œì—ì„œ ìŠ¤ì¼€ì¤„ë§ì„ ê±°ë¶€í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, Affinityë¥¼ ì„¤ì •í•˜ì§€ ì•Šì€ podë„ ìŠ¤ì¼€ì¤„ë§ë©ë‹ˆë‹¤. ë°˜ë©´ Taintì™€ Toleralationì„ ì„¤ì •í•˜ë©´ SSDë¥¼ 
ì‚¬ìš©í•˜ê³  ì‹¶ì€ pod ì´ì™¸ì—ëŠ” ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ì•Šê²Œ ë©ë‹ˆë‹¤.

** Taintë¡œ ì¸í•´ podê°€ ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆê¸° ë•Œë¬¸ì— Taintì™€ Tolerationì„ í•¨ê»˜ ì•Œì•„ ë‘ëŠ”ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

---

### Effect ì¢…ë¥˜ë³„ ë™ì‘

Taintì˜ effectëŠ” 3ê°€ì§€ê°€ ìˆìœ¼ë©°, ê°ê° ë‹¤ë¥¸ ë™ì‘ì„ í•©ë‹ˆë‹¤.

#### 1. NoSchedule

**Tolerationì´ ì—†ëŠ” PodëŠ” í•´ë‹¹ ë…¸ë“œì— ì ˆëŒ€ ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     NoSchedule ë™ì‘ ë°©ì‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   Node (Taint: gpu=true:NoSchedule)                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  ğŸš« NoSchedule                          â”‚                       â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                       â”‚
â”‚   â”‚  â”‚         (ë¹„ì–´ìˆìŒ)                â”‚    â”‚                       â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚          â–²              â–²                                           â”‚
â”‚          â”‚              â”‚                                           â”‚
â”‚          â”‚              â”‚                                           â”‚
â”‚     â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                                      â”‚
â”‚     â”‚ Pod-A   â”‚    â”‚ Pod-B   â”‚                                      â”‚
â”‚     â”‚ (ì¼ë°˜)   â”‚    â”‚Tolerationâ”‚                                     â”‚
â”‚     â”‚         â”‚    â”‚  ìˆìŒ    â”‚                                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚          âœ—              âœ“                                           â”‚
â”‚     ìŠ¤ì¼€ì¤„ë§ ê±°ë¶€    ìŠ¤ì¼€ì¤„ë§ í—ˆìš©                                         â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ê²°ê³¼:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Node (Taint: gpu=true:NoSchedule)                                 â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  ğŸš« NoSchedule                          â”‚                       â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                       â”‚
â”‚   â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚    â”‚                       â”‚
â”‚   â”‚  â”‚    â”‚ Pod-B   â”‚  â† Toleration    â”‚    â”‚                       â”‚
â”‚   â”‚  â”‚    â”‚         â”‚    ìˆì–´ì„œ ë°°ì¹˜ë¨    â”‚    â”‚                       â”‚
â”‚   â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚    â”‚                       â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                     â”‚
â”‚   Pod-AëŠ” ë‹¤ë¥¸ ë…¸ë“œë¡œ ìŠ¤ì¼€ì¤„ë§ë¨                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 2. PreferNoSchedule

**Tolerationì´ ì—†ëŠ” PodëŠ” ê°€ê¸‰ì  í•´ë‹¹ ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Soft ë²„ì „)**
ë‹¤ë¥¸ ë…¸ë“œì— ì—¬ìœ ê°€ ì—†ìœ¼ë©´ ìŠ¤ì¼€ì¤„ë§ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PreferNoSchedule ë™ì‘ ë°©ì‹                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [ë‹¤ë¥¸ ë…¸ë“œì— ì—¬ìœ ê°€ ìˆëŠ” ê²½ìš°]                                            â”‚
â”‚                                                                     â”‚
â”‚   Node-A (ì¼ë°˜)           Node-B (PreferNoSchedule)                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚  âš ï¸ Prefer       â”‚                       â”‚
â”‚   â”‚  â”‚   Pod     â”‚  â”‚     â”‚    NoSchedule   â”‚                       â”‚
â”‚   â”‚  â”‚  (ë°°ì¹˜ë¨)   â”‚â—€â”€â”¼â”€â”€â”€â”€â”€â”‚                 â”‚                       â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚   (ë¹„ì–´ìˆìŒ)     â”‚                        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚         ìš°ì„  ì„ íƒ              ê°€ê¸‰ì  íšŒí”¼                               â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [ë‹¤ë¥¸ ë…¸ë“œì— ì—¬ìœ ê°€ ì—†ëŠ” ê²½ìš°]                                            â”‚
â”‚                                                                     â”‚
â”‚   Node-A (ì¼ë°˜)           Node-B (PreferNoSchedule)                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”Œâ”€â”€â”€â”â”‚     â”‚  âš ï¸ Prefer       â”‚                       â”‚
â”‚   â”‚  â”‚Podâ”‚â”‚Podâ”‚â”‚Podâ”‚â”‚     â”‚    NoSchedule   â”‚                       â”‚
â”‚   â”‚  â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â””â”€â”€â”€â”˜â”‚     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                       â”‚
â”‚   â”‚    (ê°€ë“ ì°¸)      â”‚     â”‚  â”‚   Pod     â”‚  â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚ (ì–´ì©”ìˆ˜ì—†ì´) â”‚  â”‚                       â”‚
â”‚                           â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                       â”‚
â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                 í—ˆìš©ë¨                                â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

#### 3. NoExecute

**ê°€ì¥ ê°•ë ¥í•œ effectì…ë‹ˆë‹¤. Tolerationì´ ì—†ëŠ” PodëŠ”:**
- ìƒˆë¡œ ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ì•ŠìŒ
- **ì´ë¯¸ ì‹¤í–‰ ì¤‘ì¸ Podë„ ì¶•ì¶œ(Evict)ë¨**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      NoExecute ë™ì‘ ë°©ì‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [Before] Nodeì— Taint ì ìš© ì „                                        â”‚
â”‚                                                                     â”‚
â”‚   Node                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚                       â”‚
â”‚   â”‚  â”‚ Pod-A   â”‚  â”‚ Pod-B   â”‚  â”‚ Pod-C   â”‚  â”‚                       â”‚
â”‚   â”‚  â”‚ (ì¼ë°˜)   â”‚  â”‚ (ì¼ë°˜)   â”‚  â”‚Tolerationâ”‚  â”‚                      â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [After] kubectl taint nodes node1 maintenance=true:NoExecute       â”‚
â”‚                                                                     â”‚
â”‚   Node (Taint: maintenance=true:NoExecute)                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  ğŸ’€ NoExecute                           â”‚                       â”‚
â”‚   â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                       â”‚
â”‚   â”‚                          â”‚ Pod-C   â”‚    â”‚                       â”‚
â”‚   â”‚                          â”‚Tolerationâ”‚   â”‚                       â”‚
â”‚   â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚          â”‚              â”‚                                           â”‚
â”‚          â–¼              â–¼                                           â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚     â”‚ Pod-A   â”‚   â”‚ Pod-B   â”‚   â† ì¦‰ì‹œ ì¶•ì¶œë˜ì–´                        â”‚
â”‚     â”‚ EVICTED â”‚   â”‚ EVICTED â”‚     ë‹¤ë¥¸ ë…¸ë“œë¡œ ì´ë™                     â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**tolerationSecondsë¥¼ ì‚¬ìš©í•œ ìœ ì˜ˆ ì‹œê°„ ì„¤ì •:**

NoExecute Taintì— ëŒ€í•´ tolerationSecondsë¥¼ ì„¤ì •í•˜ë©´, í•´ë‹¹ ì‹œê°„ ë™ì•ˆì€ ì¶•ì¶œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

```yaml
tolerations:
  - key: "maintenance"
    operator: "Equal"
    value: "true"
    effect: "NoExecute"
    tolerationSeconds: 300  # 5ë¶„ í›„ ì¶•ì¶œ
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                tolerationSeconds ë™ì‘ ë°©ì‹                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   ì‹œê°„ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶           â”‚
â”‚                                                                     â”‚
â”‚   0ì´ˆ        100ì´ˆ       200ì´ˆ       300ì´ˆ       400ì´ˆ                 â”‚
â”‚   â”‚          â”‚           â”‚           â”‚           â”‚                  â”‚
â”‚   â–¼          â–¼           â–¼           â–¼           â–¼                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚   â”‚   Pod    â”‚   Pod     â”‚    Pod    â”‚   Pod     â”‚      â”‚           â”‚
â”‚   â”‚ Running  â”‚  Running  â”‚  Running  â”‚  EVICTED  â”‚      â”‚           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚   â”‚                                  â”‚                              â”‚
â”‚   â”‚â—€â”€â”€â”€â”€ tolerationSeconds: 300 â”€â”€â”€â”€â–¶â”‚                              â”‚
â”‚   â”‚         (5ë¶„ê°„ ìœ ì˜ˆ)              â”‚                               â”‚
â”‚   Taint                           ì¶•ì¶œ                               â”‚
â”‚   ì ìš©                             ì™„ë£Œ                               â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Effect ë¹„êµ ìš”ì•½

| Effect | ìƒˆ Pod ìŠ¤ì¼€ì¤„ë§ | ê¸°ì¡´ Pod |
|--------|---------------|----------|
| `NoSchedule` | ê±°ë¶€ | ìœ ì§€ |
| `PreferNoSchedule` | ê°€ê¸‰ì  ê±°ë¶€ (soft) | ìœ ì§€ |
| `NoExecute` | ê±°ë¶€ | **ì¶•ì¶œ** |

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Effect ê°•ë„ ë¹„êµ                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   ì•½í•¨                                                    ê°•í•¨       â”‚
â”‚   â”‚                                                        â”‚        â”‚
â”‚   â–¼                                                        â–¼        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚PreferNo      â”‚  NoSchedule  â”‚       NoExecute          â”‚        â”‚
â”‚   â”‚Schedule      â”‚              â”‚                          â”‚        â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚   â”‚ ìƒˆ Pod:      â”‚ ìƒˆ Pod:      â”‚ ìƒˆ Pod: ê±°ë¶€             â”‚        â”‚
â”‚   â”‚ ê°€ê¸‰ì  ê±°ë¶€   â”‚ ê±°ë¶€         â”‚ ê¸°ì¡´ Pod: ì¶•ì¶œ           â”‚        â”‚
â”‚   â”‚ ê¸°ì¡´ Pod:    â”‚ ê¸°ì¡´ Pod:    â”‚                          â”‚        â”‚
â”‚   â”‚ ìœ ì§€         â”‚ ìœ ì§€         â”‚                          â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Operator ì¢…ë¥˜

Tolerationì—ì„œ ì‚¬ìš©í•˜ëŠ” operatorëŠ” 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

| Operator | ì„¤ëª… | ì˜ˆì‹œ |
|----------|------|------|
| `Equal` | key, value, effect ëª¨ë‘ ì¼ì¹˜í•´ì•¼ í•¨ | `key: "gpu", value: "true"` |
| `Exists` | keyë§Œ ì¡´ì¬í•˜ë©´ ë¨ (value ë¬´ì‹œ) | `key: "gpu"` (value ì—†ìŒ) |

```yaml
# Equal: keyì™€ value ëª¨ë‘ ë§¤ì¹­
tolerations:
  - key: "gpu"
    operator: "Equal"
    value: "true"
    effect: "NoSchedule"

# Exists: keyë§Œ ì¡´ì¬í•˜ë©´ OK
tolerations:
  - key: "gpu"
    operator: "Exists"
    effect: "NoSchedule"

# ëª¨ë“  Taint í—ˆìš© (ë¹ˆ key + Exists)
tolerations:
  - operator: "Exists"
```

---

### ì‹¤ì „ í™œìš© ì˜ˆì‹œ

#### 1. ì „ìš© ë…¸ë“œ êµ¬ì„± (GPU ë…¸ë“œ)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GPU ì „ìš© ë…¸ë“œ êµ¬ì„±                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                    â”‚
â”‚   ì¼ë°˜ ë…¸ë“œ                           GPU ë…¸ë“œ                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚   â”‚                â”‚                â”‚ Taint:          â”‚            â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”   â”‚                â”‚ gpu=true:       â”‚            â”‚
â”‚   â”‚  â”‚Webâ”‚ â”‚APIâ”‚   â”‚                â”‚ NoSchedule      â”‚            â”‚
â”‚   â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜   â”‚                â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚            â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”   â”‚                â”‚  â”‚  ML Pod   â”‚  â”‚            â”‚
â”‚   â”‚  â”‚DB â”‚ â”‚Logâ”‚   â”‚                â”‚  â”‚(Tolerationâ”‚  â”‚            â”‚
â”‚   â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜   â”‚                â”‚  â”‚   ìˆìŒ)    â”‚  â”‚            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚            â”‚
â”‚                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚   ì¼ë°˜ Podë“¤ì€                        GPUê°€ í•„ìš”í•œ ML                   â”‚
â”‚   ì´ìª½ì— ìŠ¤ì¼€ì¤„ë§                      Podë§Œ ìŠ¤ì¼€ì¤„ë§                     â”‚
â”‚                                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. ë…¸ë“œ ìœ ì§€ë³´ìˆ˜

```bash
# 1. ë…¸ë“œì— NoExecute Taint ì ìš©
kubectl taint nodes node1 maintenance=true:NoExecute

# 2. ëª¨ë“  Podê°€ ì¶•ì¶œë¨ (Toleration ìˆëŠ” ê²ƒ ì œì™¸)

# 3. ìœ ì§€ë³´ìˆ˜ ì™„ë£Œ í›„ Taint ì œê±°
kubectl taint nodes node1 maintenance=true:NoExecute-
```

#### 3. ë§ˆìŠ¤í„° ë…¸ë“œ ë³´í˜¸

ì¿ ë²„ë„¤í‹°ìŠ¤ ë§ˆìŠ¤í„° ë…¸ë“œì—ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë‹¤ìŒ Taintê°€ ì„¤ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
```
node-role.kubernetes.io/control-plane:NoSchedule
```

ì´ë¡œ ì¸í•´ ì¼ë°˜ ì›Œí¬ë¡œë“œ PodëŠ” ë§ˆìŠ¤í„° ë…¸ë“œì— ìŠ¤ì¼€ì¤„ë§ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## 7.3.5 Tips: Pod Priorityì™€ Preemption
podì—ëŠ” priorityë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ë¡œ ì¸í•´ ì˜ˆìƒì¹˜ ëª»í•œ ìŠ¤ì¼€ì¤„ë§ì´ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤.
podì˜ priorityëŠ” podë³„ë¡œ ë¶€ì—¬í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, PriorityClassë¼ëŠ” ë¦¬ì†ŒìŠ¤ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Pod Priorityì™€ Preemption ê°œë…                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   Priority: Podì˜ ì¤‘ìš”ë„ë¥¼ ìˆ«ìë¡œ í‘œí˜„ (ë†’ì„ìˆ˜ë¡ ì¤‘ìš”)                       â”‚
â”‚   Preemption: ë†’ì€ Priority Podë¥¼ ìœ„í•´ ë‚®ì€ Priority Podë¥¼ ì¶•ì¶œ           â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                         ìŠ¤ì¼€ì¤„ëŸ¬                              â”‚   â”‚
â”‚   â”‚                           â”‚                                 â”‚   â”‚
â”‚   â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚   â”‚
â”‚   â”‚    â”‚                      â–¼                      â”‚          â”‚   â”‚
â”‚   â”‚    â”‚   ëŒ€ê¸° í (Priority ìˆœìœ¼ë¡œ ì •ë ¬)                â”‚          â”‚   â”‚
â”‚   â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚          â”‚   â”‚
â”‚   â”‚    â”‚   â”‚ Pri:   â”‚ Pri:   â”‚ Pri:   â”‚ Pri:   â”‚     â”‚          â”‚   â”‚
â”‚   â”‚    â”‚   â”‚1000000 â”‚ 10000  â”‚  1000  â”‚   0    â”‚     â”‚          â”‚   â”‚
â”‚   â”‚    â”‚   â”‚ (ë¨¼ì €)  â”‚        â”‚        â”‚ (ë‚˜ì¤‘)  â”‚     â”‚          â”‚   â”‚
â”‚   â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚          â”‚   â”‚
â”‚   â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Priority ì„¤ì • ìˆœì„œ

1. PriorityClassë¥¼ ìƒì„±í•œë‹¤.
2. 1ì—ì„œ ì„¤ì •í•œ PriorityClassë¥¼ podì˜ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì— ì§€ì •í•œë‹¤.

```yaml
apiVersion: scheduling.k8s.io/v1
kind: PriorityClass
metadata:
  name: high-priority
value: 1000000 # <-- valueê°’ì´ í´ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤.
globalDefault: false
description: "This priority class should be used for XYZ service pods only."
```

### PriorityClass ì£¼ìš” í•„ë“œ

| í•„ë“œ | ì„¤ëª… |
|------|------|
| `value` | Priority ê°’ (-2,147,483,648 ~ 1,000,000,000). ë†’ì„ìˆ˜ë¡ ìš°ì„ ìˆœìœ„ ë†’ìŒ |
| `globalDefault` | trueë¡œ ì„¤ì • ì‹œ PriorityClass ë¯¸ì§€ì • Podì˜ ê¸°ë³¸ê°’ìœ¼ë¡œ ì‚¬ìš© |
| `preemptionPolicy` | `PreemptLowerPriority` (ê¸°ë³¸ê°’) ë˜ëŠ” `Never` |
| `description` | PriorityClassì— ëŒ€í•œ ì„¤ëª… |

ì´ì–´ì„œ PriorityClassë¥¼ podì— ì§€ì •í•˜ëŠ” ì˜ˆì‹œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```yaml
apiVersion: v1
kind: Pod
metadata:
    name: nginx
spec:
    containers:
    - name: nginx
      image: nginx:1.25.3
    priorityClassName: high-priority  # <-- ì•ì„œ ìƒì„±í•œ PriorityClassì˜ metadata.nameì„ ì§€ì •í•˜ë©´ podì— Priorityê°€ ì§€ì •ë©ë‹ˆë‹¤.
```

---

### Preemption (ì„ ì ) ë™ì‘ ë°©ì‹

ë¦¬ì†ŒìŠ¤ê°€ ë¶€ì¡±í•  ë•Œ ë†’ì€ Priority Podê°€ ìŠ¤ì¼€ì¤„ë§ë˜ì–´ì•¼ í•˜ë©´, ë‚®ì€ Priority Podë¥¼ ì¶•ì¶œ(Evict)í•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Preemption ë™ì‘ ê³¼ì •                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [Step 1] ìƒˆë¡œìš´ ê³ ìš°ì„ ìˆœìœ„ Pod ìŠ¤ì¼€ì¤„ë§ ìš”ì²­                               â”‚
â”‚                                                                     â”‚
â”‚   ìƒˆ Pod (Priority: 1000000)                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      Node (ë¦¬ì†ŒìŠ¤ ë¶€ì¡±)                              â”‚
â”‚   â”‚  High Pri   â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚   Pod       â”‚ â”€â”€â”€â–¶ â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”    â”‚              â”‚
â”‚   â”‚  (ëŒ€ê¸°ì¤‘)     â”‚  ?   â”‚  â”‚Low  â”‚ â”‚Low  â”‚ â”‚Med  â”‚    â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚Pri:0â”‚ â”‚Pri:0â”‚ â”‚Pri: â”‚    â”‚              â”‚
â”‚                        â”‚  â”‚     â”‚ â”‚     â”‚ â”‚1000 â”‚    â”‚              â”‚
â”‚                        â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜    â”‚              â”‚
â”‚                        â”‚       (ê³µê°„ ì—†ìŒ)             â”‚              â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [Step 2] ìŠ¤ì¼€ì¤„ëŸ¬ê°€ Preemption ëŒ€ìƒ ì„ íƒ                                â”‚
â”‚                                                                     â”‚
â”‚   - ë‚®ì€ Priority Pod ì¤‘ ì¶•ì¶œ ëŒ€ìƒ ì„ íƒ                                  â”‚
â”‚   - ì¶•ì¶œ ì‹œ ë¦¬ì†ŒìŠ¤ í™•ë³´ ê°€ëŠ¥ ì—¬ë¶€ ê³„ì‚°                                      â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚   â”‚         Preemption ëŒ€ìƒ ì„ ì •      â”‚                               â”‚
â”‚   â”‚                                 â”‚                               â”‚
â”‚   â”‚   Pri: 0 â”€â”€â”€â”€â”€â”€â–¶ ì¶•ì¶œ ëŒ€ìƒ âœ“      â”‚                               â”‚
â”‚   â”‚   Pri: 0 â”€â”€â”€â”€â”€â”€â–¶ ì¶•ì¶œ ëŒ€ìƒ âœ“      â”‚                               â”‚
â”‚   â”‚   Pri: 1000 â”€â”€â”€â–¶ ìœ ì§€ (ë” ë†’ìŒ)    â”‚                               â”‚
â”‚   â”‚                                 â”‚                               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [Step 3] ë‚®ì€ Priority Pod ì¶•ì¶œ í›„ ê³ ìš°ì„ ìˆœìœ„ Pod ë°°ì¹˜                    â”‚
â”‚                                                                     â”‚
â”‚   Node                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”      â”‚                       â”‚
â”‚   â”‚  â”‚   High Pri    â”‚         â”‚Med  â”‚      â”‚                       â”‚
â”‚   â”‚  â”‚   Pod         â”‚ â† ë°°ì¹˜   â”‚Pri: â”‚      â”‚                       â”‚
â”‚   â”‚  â”‚ (Priority:    â”‚         â”‚1000 â”‚      â”‚                       â”‚
â”‚   â”‚  â”‚  1000000)     â”‚         â”‚     â”‚      â”‚                       â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”˜      â”‚                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”                                                   â”‚
â”‚   â”‚Low  â”‚ â”‚Low  â”‚  â† ì¶•ì¶œë˜ì–´ ë‹¤ë¥¸ ë…¸ë“œë¡œ ì¬ìŠ¤ì¼€ì¤„ë§ ì‹œë„                    â”‚
â”‚   â”‚Pri:0â”‚ â”‚Pri:0â”‚     (ë¦¬ì†ŒìŠ¤ ì—†ìœ¼ë©´ Pending)                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜                                                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ê¸°ë³¸ ì œê³µ PriorityClass

ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸ë¥¼ ìœ„í•œ ê¸°ë³¸ PriorityClassë¥¼ ì œê³µí•©ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ê¸°ë³¸ PriorityClass ìš°ì„ ìˆœìœ„                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   Priority Value                                                    â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â”‚  2,000,001,000  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                 â”‚ system-node-critical                 â”‚        â”‚
â”‚   â”‚                 â”‚ (kubelet, kube-proxy ë“± ë…¸ë“œ í•„ìˆ˜)      â”‚        â”‚
â”‚   â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â”‚  2,000,000,000  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                 â”‚ system-cluster-critical              â”‚        â”‚
â”‚   â”‚                 â”‚ (kube-dns, metrics-server ë“±)         â”‚        â”‚
â”‚   â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â”‚  1,000,000,000  â”€â”€ ì‚¬ìš©ì ì •ì˜ PriorityClass ìµœëŒ€ê°’ â”€â”€              â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â”‚    1,000,000    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                 â”‚ high-priority (ì‚¬ìš©ì ì •ì˜ ì˜ˆì‹œ)         â”‚        â”‚
â”‚   â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â”‚            0    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                 â”‚ ê¸°ë³¸ê°’ (PriorityClass ë¯¸ì§€ì • ì‹œ)         â”‚        â”‚
â”‚   â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â–¼ (ë‚®ìŒ)                                                           â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| PriorityClass | Value | ìš©ë„ |
|---------------|-------|------|
| `system-node-critical` | 2,000,001,000 | ë…¸ë“œì— í•„ìˆ˜ì ì¸ Pod (kubelet ê´€ë ¨) |
| `system-cluster-critical` | 2,000,000,000 | í´ëŸ¬ìŠ¤í„°ì— í•„ìˆ˜ì ì¸ Pod (DNS ë“±) |
| (ì‚¬ìš©ì ì •ì˜ ìµœëŒ€) | 1,000,000,000 | ì‚¬ìš©ìê°€ ì„¤ì •í•  ìˆ˜ ìˆëŠ” ìµœëŒ€ê°’ |
| (ê¸°ë³¸ê°’) | 0 | PriorityClass ë¯¸ì§€ì • ì‹œ |

---

### preemptionPolicy ì˜µì…˜

| ê°’ | ì„¤ëª… |
|----|------|
| `PreemptLowerPriority` | ê¸°ë³¸ê°’. ë‚®ì€ Priority Podë¥¼ ì¶•ì¶œí•˜ê³  ìŠ¤ì¼€ì¤„ë§ |
| `Never` | Preemption í•˜ì§€ ì•ŠìŒ. ë¦¬ì†ŒìŠ¤ê°€ í™•ë³´ë  ë•Œê¹Œì§€ ëŒ€ê¸° |

```yaml
apiVersion: scheduling.k8s.io/v1
kind: PriorityClass
metadata:
  name: high-priority-no-preempt
value: 1000000
preemptionPolicy: Never  # ë‹¤ë¥¸ Podë¥¼ ì¶•ì¶œí•˜ì§€ ì•ŠìŒ
globalDefault: false
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                preemptionPolicy ë™ì‘ ë¹„êµ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [PreemptLowerPriority - ê¸°ë³¸ê°’]                                      â”‚
â”‚                                                                     â”‚
â”‚   High Pri Pod â”€â”€â”€â–¶ ë‚®ì€ Pri Pod ì¶•ì¶œ â”€â”€â”€â–¶ ì¦‰ì‹œ ìŠ¤ì¼€ì¤„ë§                  â”‚
â”‚                                                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  [Never]                                                            â”‚
â”‚                                                                     â”‚
â”‚   High Pri Pod â”€â”€â”€â–¶ ì¶•ì¶œ ì•ˆí•¨ â”€â”€â”€â–¶ ë¦¬ì†ŒìŠ¤ í™•ë³´ë  ë•Œê¹Œì§€ Pending            â”‚
â”‚                                                                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  ì‚¬ìš© ì‚¬ë¡€:                                                   â”‚   â”‚
â”‚   â”‚  - ë°°ì¹˜ ì‘ì—…ì´ ë‹¤ë¥¸ Podë¥¼ ë°©í•´í•˜ë©´ ì•ˆ ë˜ëŠ” ê²½ìš°                      â”‚   â”‚
â”‚   â”‚  - ë¦¬ì†ŒìŠ¤ê°€ ìì—°ìŠ¤ëŸ½ê²Œ í™•ë³´ë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ë„ ë˜ëŠ” ê²½ìš°                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ì£¼ì˜ì‚¬í•­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    âš ï¸ Priority ì‚¬ìš© ì‹œ ì£¼ì˜ì‚¬í•­                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚  1. ì˜ˆìƒì¹˜ ëª»í•œ Pod ì¶•ì¶œ                                                â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚     â”‚ ë†’ì€ Priority Podê°€ ìƒì„±ë˜ë©´ ìš´ì˜ ì¤‘ì¸ ë‚®ì€ Priority Podê°€        â”‚   â”‚
â”‚     â”‚ ê°‘ìê¸° ì¶•ì¶œë  ìˆ˜ ìˆìŒ â†’ ì„œë¹„ìŠ¤ ì¤‘ë‹¨ ê°€ëŠ¥ì„±                          â”‚   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  2. ìš°ì„ ìˆœìœ„ ì—­ì „ (Priority Inversion)                                 â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚     â”‚ ë‚®ì€ Priority Podê°€ ë†’ì€ Priority Podì— í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼          â”‚   â”‚
â”‚     â”‚ ì ìœ í•˜ê³  ìˆì„ ë•Œ ë°œìƒí•  ìˆ˜ ìˆìŒ                                  â”‚   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â”‚  3. PriorityClass ì„¤ê³„ ê¶Œì¥ì‚¬í•­                                        â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚     â”‚ - 2~3ê°œ ì •ë„ì˜ Priority ë ˆë²¨ë§Œ ì‚¬ìš© (ë„ˆë¬´ ë§ìœ¼ë©´ ë³µì¡)             â”‚   â”‚
â”‚     â”‚ - Critical > Default > Background ì •ë„ë¡œ ë‹¨ìˆœí™”              â”‚   â”‚
â”‚     â”‚ - system-* PriorityClassëŠ” ì‹œìŠ¤í…œ ì»´í¬ë„ŒíŠ¸ ì „ìš©ìœ¼ë¡œ ìœ ì§€          â”‚   â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì‹¤ì „ ì˜ˆì‹œ: 3ë‹¨ê³„ Priority êµ¬ì„±

```yaml
# 1. í¬ë¦¬í‹°ì»¬ ì„œë¹„ìŠ¤ìš© (ê²°ì œ, ì¸ì¦ ë“±)
apiVersion: scheduling.k8s.io/v1
kind: PriorityClass
metadata:
  name: critical
value: 1000000
preemptionPolicy: PreemptLowerPriority
---
# 2. ì¼ë°˜ ì„œë¹„ìŠ¤ìš© (ê¸°ë³¸ê°’)
apiVersion: scheduling.k8s.io/v1
kind: PriorityClass
metadata:
  name: default
value: 0
globalDefault: true
---
# 3. ë°±ê·¸ë¼ìš´ë“œ ì‘ì—…ìš© (ë°°ì¹˜, ë¡œê·¸ ì²˜ë¦¬ ë“±)
apiVersion: scheduling.k8s.io/v1
kind: PriorityClass
metadata:
  name: background
value: -1000
preemptionPolicy: Never  # ë‹¤ë¥¸ Podë¥¼ ì¶•ì¶œí•˜ì§€ ì•ŠìŒ
```

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    3ë‹¨ê³„ Priority êµ¬ì„± ì˜ˆì‹œ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                     â”‚
â”‚   Priority                                                          â”‚
â”‚   â–²                                                                 â”‚
â”‚   â”‚  1,000,000  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚             â”‚ critical (ê²°ì œ, ì¸ì¦)                     â”‚         â”‚
â”‚   â”‚             â”‚ â†’ ë¦¬ì†ŒìŠ¤ ë¶€ì¡± ì‹œ ë‹¤ë¥¸ Pod ì¶•ì¶œ ê°€ëŠ¥            â”‚         â”‚
â”‚   â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â”‚          0  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚             â”‚ default (ì¼ë°˜ ì„œë¹„ìŠ¤)                      â”‚         â”‚
â”‚   â”‚             â”‚ â†’ globalDefault: true                   â”‚         â”‚
â”‚   â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â”‚     -1,000  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚   â”‚             â”‚ background (ë°°ì¹˜, ë¡œê·¸)                   â”‚         â”‚
â”‚   â”‚             â”‚ â†’ preemptionPolicy: Never               â”‚         â”‚
â”‚   â”‚             â”‚ â†’ ë‹¤ë¥¸ Podë¥¼ ì¶•ì¶œí•˜ì§€ ì•Šê³  ëŒ€ê¸°               â”‚         â”‚
â”‚   â”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚   â”‚                                                                 â”‚
â”‚   â–¼ (ë‚®ìŒ)                                                           â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

ì°¸ê³ ë¡œ ì¿ ë²„ë„¤í‹°ìŠ¤ì—ì„œëŠ” system-cluster-critialê³¼ system-node-criticalì´ë¼ëŠ” PriorityClassë¥¼ ê¸°ë³¸ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.
```bash
$ kubectl describe priorityclasses --namespace default
## ì¼ë°˜ ì• í”Œë¦¬ì¼€ì´ì…˜ë³´ë‹¤ ì¿ ë²„ë„¤í‹°ìŠ¤ í´ëŸ¬ìŠ¤í„°ìš© podë¥¼ ìš°ì„ ì ìœ¼ë¡œ ìŠ¤ì¼€ì¤„ë§í•˜ê¸° ìœ„í•´ ë†’ì€ Priorityê°€ ë¶€ì—¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
Name:              system-cluster-critical
Value:             2000000000
GlobalDefault:     false
PreemptionPolicy:  PreemptLowerPriority
Description:       Used for system critical pods that must run in the cluster, but can be moved to another node if necessary.
Annotations:       <none>
Events:            <none>


Name:              system-node-critical
Value:             2000001000
GlobalDefault:     false
PreemptionPolicy:  PreemptLowerPriority
Description:       Used for system critical pods that must not be moved from their current node.
Annotations:       <none>
Events:            <none>

# system-node-critical PriorityClassë¥¼ ì‚¬ìš©í•˜ëŠ” podë¥¼ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.
$ kubectl get pods --all-namespaces -o jsonpath="{range .items[?(@.spec.priorityClassName=='system-node-critical')]}{.metadata.namespace}{'\t'}{.metadata.name}{'\n'}{end}"
etcd-kind-control-plane                       kube-system
kube-apiserver-kind-control-plane             kube-system
kube-controller-manager-kind-control-plane    kube-system
kube-proxy-5x4k7                              kube-system
kube-scheduler-kind-control-plane             kube-system
```

## 7.3.6 ë§ê°€ëœ¨ë¦¬ê¸° pod ìŠ¤ì¼€ì¤„ë§ ì‹¤íŒ¨


# 7.4 ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤ì¼€ì¼ë§í•˜ê¸° 
ì• í”Œë¦¬ì¼€ì´ì…˜ì— ëŒ€í•œ ìš”ì²­ì´ ì¦ê°€í•˜ë©´ í•˜ë‚˜ì˜ podë¡œëŠ” ë¶€í•˜ë¥¼ ê²¬ë”œ ìˆ˜ ì—†ê²Œ ë˜ë¯€ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìŠ¤ì¼€ì¼ë§í•˜ì—¬ ì•ˆì •ì„±ì„ ë†’ì—¬ì•¼í•©ë‹ˆë‹¤.  
ì¼ë°˜ì ìœ¼ë¡œ ìŠ¤ì¼€ì¼ë§ì—ëŠ” ìˆ˜í‰ê³¼ ìˆ˜ì§ì˜ ë‘ê°€ì§€ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.
* ìˆ˜í‰ ìŠ¤ì¼€ì¼ë§: ë™ì‹œì— ë™ì‘í•˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°œìˆ˜ë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.
* ìˆ˜ì§ ìŠ¤ì¼€ì¼ë§: ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë™ì‘í•˜ëŠ” ìì›ì˜ í¬ê¸°ë¥¼ ëŠ˜ë¦¬ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤.

## 7.4.1 ìˆ˜í‰ ìŠ¤ì¼€ì¼ë§
### Horizontal Pod Autoscaler
HPAë¥¼ ì‚¬ìš©í•˜ë©´ ìë™ìœ¼ë¡œ podì˜ ìˆ˜ë¥¼ ëŠ˜ë¦¬ê±°ë‚˜ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
HPAëŠ” ì¼ë°˜ì ìœ¼ë¡œ CPUë‚˜ ë©”ëª¨ë¦¬ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ pod ìˆ˜ë¥¼ ì¡°ì ˆí•˜ì§€ë§Œ, ë‹¤ë¥¸ ë©”íŠ¸ë¦­ì„ ê¸°ì¤€ìœ¼ë¡œ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.  
HPAë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ metics-serverë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.

```bash
$ kubectl apply --filename https://github.com/kubernetes-sigs/metrics-server/releases/download/v0.6.4/components.yaml

# kindë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²½ìš°, ë‹¤ìŒ ëª…ë ¹ì–´ë„ ì‹¤í–‰í•´ ì£¼ì„¸ìš”
kubectl patch --namespace kube-system deployment metrics-server --type='json' -p='[{"op":"add","path":"/spec/template/spec/containers/0/args/-","value":"--kubelet-insecure-tls"}]'

# metrics-serverê°€ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•©ë‹ˆë‹¤.
$ kubectl get deployment metrics-server --namespace kube-system
# Ready 1, Available 1ì´ í‘œì‹œë˜ë©´ ì •ìƒì…ë‹ˆë‹¤.
NAME             READY   UP-TO-DATE   AVAILABLE   AGE
metrics-server   1/1     1            1           10m
```

ë‹¤ìŒê³¼ ê°™ì´ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ ìˆ˜í‰ìŠ¤ì¼€ì¼ë§ì´ ë™ì‘í•˜ê²Œ ë©ë‹ˆë‹¤.
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hpa-handson
  labels:
    app: hello-server
spec:
  selector:
    matchLabels:
      app: hello-server
  template:
    metadata:
      labels:
        app: hello-server
    spec:
      containers:
      - name: hello-server
        image: blux2/hello-server:1.8
        ports:
        - containerPort: 8080
        resources:
          requests:
            memory: "10Mi"
            cpu: "5m"
          limits:
            memory: "10Mi"
            cpu: "5m"
---
apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: hello-server-hpa
spec:
  minReplicas: 1  # <---- (1)
  maxReplicas: 10 # <---- (2)
  metrics:
  - resource:
      name: cpu
      target:
        averageUtilization: 50 # <---- (3) CPU ì‚¬ìš©ë¥ ì´ ì–¸ì œë‚˜ 50% ì´í•˜ê°€ ë˜ë„ë¡ pod ìˆ˜ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤.
        type: Utilization
    type: Resource
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: hpa-handson
---
apiVersion: v1
kind: Service
metadata:
  name: hello-server-service
spec:
  selector:
    app: hello-server
  ports:
    - protocol: TCP
      port: 8080
      targetPort: 8080
```

ë§¤ë‹ˆí˜ìŠ¤íŠ¸ì˜ (1)minReplicasì™€ (2)maxReplicasì—ëŠ” ìë™ìœ¼ë¡œ ì¡°ì ˆë  pod ê°œìˆ˜ì˜ ìµœì†Ÿê°’ê³¼ ìµœëŒ“ê°’ì„ ì§€ì •í•©ë‹ˆë‹¤.  
(3)ì—ëŠ” ì¡°ì ˆì˜ ê¸°ì¤€ì´ ë˜ëŠ” ë©”íŠ¸ë¦­ì„ ì§€ì •í•©ë‹ˆë‹¤. (4)target.averageUtilizationì—ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ë°”ëŒì§í•œ CPU ì‚¬ìš©ë¥ ì„ ì§€ì •í•©ë‹ˆë‹¤.  
  
ê·¸ëŸ¼ ì´ ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì‹¤ì œë¡œ ìŠ¤ì¼€ì¼ë§í•˜ëŠ” ëª¨ìŠµì„ ë³´ê² ìŠµë‹ˆë‹¤.  
```bash
$ kubectl apply --filename hpa-hello-server.yaml --namespace default

# HPAì˜ ë™ì‘ì„ ì§€ì¼œë³´ê² ìŠµë‹ˆë‹¤.
$ kubelctl get hpa --watch -=-namespace default
NAME                REFERENCE                 TARGETS            MINPODS   MAXPODS   REPLICAS     AGE
hello-server-hpaa   Deployment/hpa-handson   <unknown>/50%      1         10         1            10s
hello-server-hpaa   Deployment/hpa-handson   <unknown>/50%      1         10         1            10s
hello-server-hpaa   Deployment/hpa-handson   0%/50%             1         10         1            10s

# TARGETì´ 0%ì—ì„œ ë³€í•˜ì§€ ì•Šê³ , REPLICASë„ 1ì—ì„œ ë³€í•˜ì§€ ì•ŠëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ë„ì ìœ¼ë¡œ ë¶€í•˜ë¥¼ ê±¸ì–´ podê°€ ì¦ê°€í•˜ëŠ” ëª¨ìŠµì„ í™•ì¸í•´ ë³´ê² ìŠµë‹ˆë‹¤.
# ì•ì„œ ì‚¬ìš©í•œ í„°ë¯¸ë„ê³¼ëŠ” ë‹¤ë¥¸ í„°ë¯¸ë„ì„ ì—´ê³ , ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.
$ kubectl --namespace default run --stdin --tty load-generator --rm --image=busybox:1.28 --restart=Never -- /bin/sh -c "while sleep 0.01; do wget -q -0- http://hello-server-service.default.svc.cluster.local:8080; done"

# ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•œ ì±„ ì´ì „ í„°ë¯¸ë„ë¡œ ëŒì•„ê°‘ë‹ˆë‹¤. ì ì‹œ í›„ REPLICASê°€ ì¦ê°€í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.
# ë¶€í•˜ë¥¼ ê³„ì† ê±¸ë©´, maxReplicasë¡œ ì§€ì •í•œ 10ê°œê¹Œì§€ podê°€ ì¦ê°€í•©ë‹ˆë‹¤. ì´ì²˜ëŸ¼ ë¶€í•˜ê°€ ë°œìƒí•¨ì— ë”°ë¼ podê°€ ìŠ¤ì¼€ì¼ë§ë˜ë¯€ë¡œ ê°‘ì‘ìŠ¤ëŸ° ë¶€í•˜ì˜ ì¦ê°€ì— ëŒ€ì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
# ë‹¤ë§Œ ì‹¤ìŠµì„ í†µí•´ ì•Œ ìˆ˜ ìˆë“¯ì´ ìŠ¤ì¼€ì¼ë§ì—ëŠ” ì•½ê°„ì˜ ì‹œê°„ì´ ê±¸ë¦¬ê¸° ë•Œë¬¸ì— ê¸‰ê²©í•œ ìŠ¤íŒŒì´í¬ì—ëŠ” ëŒ€ì‘í•  ìˆ˜ ì—†ìŒì— ì£¼ì˜í•´ì•¼í•©ë‹ˆë‹¤.
# ì‹¤ìŠµì„ ì •ë¦¬í•©ë‹ˆë‹¤.
$ kubectl --namespace default runì„ ì‹¤í–‰í•œ í„°ë¯¸ë„ì€ ì¤‘ë‹¨í•©ë‹ˆë‹¤.
$ kubectl delete --filename hpa-hello-server.yaml --namespace default  
```

## 7.4.2 ìˆ˜ì§ ìŠ¤ì¼€ì¼ë§
VPAë¥¼ ì‚¬ìš©í•˜ë©´ Resource requests/limits ê°’ì„ ìë™ìœ¼ë¡œ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ VPAëŠ” HPAì™€ ë™ì‹œì— ì‚¬ìš©í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—,  
HPAë§Œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. VPAëŠ” ë³„ë„ì˜ ì„¤ì¹˜ê°€ í•„ìš”í•©ë‹ˆë‹¤.

# 7.5 ë…¸ë“œ ì •ì§€ì— ëŒ€ë¹„í•˜ê¸° 
ë…¸ë“œì˜ ê³ ì¥ì´ë‚˜, ì¿ ë²„ë„¤í‹°ìŠ¤ ë²„ì „ ì—…ë°ì´íŠ¸ ë“±ì˜ ì´ìœ ë¡œ ë…¸ë“œë¥¼ ì…§ë‹¤ìš´í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì¢…ì¢… ë°œìƒí•©ë‹ˆë‹¤. ì¿ ë²„ë„¤í‹°ìŠ¤ëŠ” ë…¸ë“œê°€ ì…§ë‹¤ìš´ ë˜ë”ë¼ë„ ì•ˆì „í•˜ê²Œ ì„œë¹„ìŠ¤ë¥¼ ê³„ì† ìš´ì˜í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤.  
ì´ëŸ¬í•œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ ë…¸ë“œê°€ ë©ˆì¶”ë”ë¼ë„ ë¬¸ì œì—†ì´ ì„œë¹„ìŠ¤ë¥¼ ê³„ì™ ìš´ì˜í•  ìˆ˜ ìˆë„ë¡ í•´ì•¼í•©ë‹ˆë‹¤. 

## 7.5.1 ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ê°€ìš©ì„±ì„ ë³´ì¦í•˜ëŠ” PodDisruptionBudget(PDB)
Deploymentë¥¼ ì„¤ëª…í•˜ë©´ì„œ ì•ˆì „í•˜ê²Œ podë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë´¤ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ Deploymentë¡œ ì»¤ë²„í•  ìˆ˜ ìˆëŠ” ê²ƒì€ ì–´ë””ê¹Œì§€ë‚˜ podë¥¼ ì—…ë°ì´íŠ¸í•  ë•Œë¿ì…ë‹ˆë‹¤.  
ì‹¤ì œ ìš´ì˜í™˜ê²½ì—ì„œëŠ” ë…¸ë“œì˜ ìœ ì§€ë³´ìˆ˜ë¥¼ ìœ„í•´ ë…¸ë“œì—ì„œ podë¥¼ ì œê±°í•˜ê±°ë‚˜ ëŠ˜ë¦¬ëŠ” ê²½ìš°ê°€ ìì£¼ ë°œìƒí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê²½ìš°ì— ë…¸ë“œì—ì„œ podë¥¼ ì•ˆì „í•˜ê²Œ ì œê±°í•˜ê¸° ìœ„í•œ ê¸°ëŠ¥ ì¤‘ í•˜ë‚˜ì…ë‹ˆë‹¤.  
ì„œë¹„ìŠ¤ ì¤‘ë‹¨ì´ ë°œìƒí•˜ë©´ ì•ˆë˜ëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì—ê²ŒëŠ” í•„ìˆ˜ì ì¸ ì„¤ì •ì…ë‹ˆë‹¤.  
  
í•´ë‹¹ ëª…ì¹­ì„ ê·¸ëŒ€ë¡œ ë²ˆì—­í•˜ë©´ 'podê°€ íŒŒê´´ë  ë•Œì˜ ì˜ˆì‚°'ìœ¼ë¡œ ì˜ˆì‚°ì„ ì„¤ì •í•´ ë‘ë©´ 'ì˜ˆì‚°ì„ ì´ˆê³¼í•˜ì§€ ì•Šë„ë¡' ì¿ ë²„ë„¤í‹°ìŠ¤ê°€ ë™ì‘í•©ë‹ˆë‹¤. ê°ê° ì •ìˆ˜ê°’(pod ê°œìˆ˜) ë˜ëŠ” ë°±ë¶„ìœ¨(podì˜ ë¹„ìœ¨)ë¡œ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
* minAvailable: 'ìµœì†Œ ëª‡ ê°œì˜ podê°€ ì •ìƒì´ì–´ì•¼ í•˜ëŠ”ì§€' ì˜ˆë¥¼ ë“¤ì–´ 5ë¡œ ì§€ì •í•˜ë©´ 5ê°œì˜ podê°€ ì •ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.
* maxUnavailable: 'ìµœëŒ€ ëª‡ ê°œì˜ podê°€ ë¹„ì •ìƒì´ì–´ë„ ë˜ëŠ”ì§€' ì˜ˆë¥¼ ë“¤ì–´ 5ë¡œ ì§€ì •í•˜ë©´ 5ê°œì˜ podê°€ ë¹„ì •ìƒì´ë„ ë©ë‹ˆë‹¤.
  
```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: hello-server
  labels:
    app: hello-server
spec:
  replicas: 3
  selector:
    matchLabels:
      app: hello-server
  template:
    metadata:
      labels:
        app: hello-server
    spec:
      containers:
      - name: hello-server
        image: blux2/hello-server:1.8
```

ì´ DeploymentëŠ” replicasê°€ 3ì´ì§€ë§Œ ë°˜ë“œì‹œ 2ê°œ ì´ìƒì˜ podê°€ ì¡´ì¬í•´ì•¼ í•˜ëŠ” ìš”êµ¬ì‚¬í•­ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.  
ì´ ìš”êµ¬ì‚¬í•­ì„ ì¶©ì¡±í•˜ê¸° ìœ„í•´ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì´ DPBë¥¼ ì‘ì„±í•˜ë©´ ë©ë‹ˆë‹¤.  
```yaml
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: hello-server-pdb
spec:
  minAvailable: 2
  selector:
    matchLabels:
      app: hello-server
```
ê°€ë ¹ ì–´ë–¤ ì´ìœ ë¡œ í•˜ë‚˜ì˜ podê°€ Pendingì´ ë˜ì—ˆë‹¤ë©´ app:hello-serverì¸ podë¥¼ ë…¸ë“œì—ì„œ ì œê±°í•  ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.  
í•´ë‹¹ ë…¸ë“œë¥¼ ì œê±°í•˜ëŠ”ê²ƒì€ 'ì˜ˆì‚°ì„ ë„˜ëŠ”'ì¼ì´ ë˜ì—ˆê¸° ë•Œë¬¸ì— ë…¸ë“œë¥¼ ìœ ì§€ë³´ìˆ˜í•  ë•Œë„ Pendingì´ í•´ì†Œë  ë–„ê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•©ë‹ˆë‹¤.